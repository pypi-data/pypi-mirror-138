"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{PX:()=>d,z_:()=>c,fs:()=>u,um:()=>m,s:()=>p,Cm:()=>h,tT:()=>g}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/actionCreators/indicator.tsx"),o=s("./app/actions/teamActions.tsx"),a=s("./app/locale.tsx"),n=s("./app/utils/callIfFunction.tsx");if("app"==s.j)var i=s("./app/utils/guid.tsx");const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s=arguments.length,r=new Array(s>2?s-2:0),o=2;o<s;o++)r[o-2]=arguments[o];(0,n.g)(e[t],...r)};async function d(e,t){const s=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);o.Z.loadUserTeams(s)}function c(e,t){o.Z.updateSuccess(e,t)}function u(e,t,s){const r=`/teams/${t.orgId}/${t.teamId}/`;return o.Z.update(t.teamId,t.data),e.request(r,{method:"PUT",data:t.data,success:e=>{c(t.teamId,e),l(s,"success",e)},error:e=>{o.Z.updateError(t.teamId,e),l(s,"error",e)}})}function m(e,t,s){var r;const a=`/organizations/${t.orgId}/members/${null!==(r=t.memberId)&&void 0!==r?r:"me"}/teams/${t.teamId}/`,n=(0,i.E)();return o.Z.update(n,t.teamId),e.request(a,{method:"POST",success:e=>{o.Z.updateSuccess(t.teamId,e),l(s,"success",e)},error:e=>{o.Z.updateError(n,t.teamId,e),l(s,"error",e)}})}function p(e,t,s){const r=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`,a=(0,i.E)();return o.Z.update(a,t.teamId),e.request(r,{method:"DELETE",success:e=>{o.Z.updateSuccess(t.teamId,e),l(s,"success",e)},error:e=>{o.Z.updateError(a,t.teamId,e),l(s,"error",e)}})}function h(e,t,s){return o.Z.createTeam(t),e.requestPromise(`/organizations/${s.orgId}/teams/`,{method:"POST",data:t}).then((e=>(o.Z.createTeamSuccess(e),(0,r.S9)((0,a._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:s.orgId})),e)),(e=>{throw o.Z.createTeamError(t.slug,e),(0,r.Iw)((0,a._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:s.orgId})),e}))}function g(e,t){return o.Z.removeTeam(t.teamId),e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(o.Z.removeTeamSuccess(t.teamId,e),(0,r.S9)((0,a._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw o.Z.removeTeamError(t.teamId,e),(0,r.Iw)((0,a._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/avatar/actorAvatar.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),a=s("../node_modules/@sentry/minimal/esm/index.js"),n=s("./app/components/avatar/teamAvatar.tsx"),i=s("./app/components/avatar/userAvatar.tsx"),l=s("./app/components/loadingIndicator.tsx"),d=s("./app/stores/memberListStore.tsx"),c=s("./app/utils/teams.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends o.Component{render(){const{actor:e,...t}=this.props;if("user"===e.type){var s;const r=e.id&&null!==(s=d.Z.getById(e.id))&&void 0!==s?s:e;return(0,u.tZ)(i.Z,{user:r,...t})}return"team"===e.type?(0,u.tZ)(c.Z,{ids:[e.id],children:e=>{let{initiallyLoaded:s,teams:r}=e;return s?(0,u.tZ)(n.Z,{team:r[0],...t}):(0,u.tZ)(l.Z,{mini:!0})}}):(a.$e((t=>{t.setExtra("actor",e),a.Tb(new Error("Unknown avatar type"))})),null)}}m.displayName="ActorAvatar",(0,r.Z)(m,"defaultProps",{size:24,hasTooltip:!0});const p=m},"./app/components/tag.tsx":(e,t,s)=>{s.d(t,{A:()=>Z,Z:()=>j});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),a=s("./app/components/button.tsx"),n=s("./app/components/links/externalLink.tsx"),i=s("./app/components/links/link.tsx"),l=s("./app/components/tooltip.tsx"),d=s("./app/icons/index.tsx"),c=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),m=s("./app/utils.tsx"),p=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=s("./app/utils/theme.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x="20px";function f(e){let{type:t="default",icon:s,tooltipText:r,to:a,onClick:u,href:x,onDismiss:f,children:j,textMaxWidth:I=150,..._}=e;const S={size:"11px",color:h.ZP.tag[t].iconColor},z=(0,g.tZ)(l.Z,{title:r,containerDisplayMode:"inline-flex",children:(0,g.BX)(Z,{type:t,children:[o.isValidElement(s)?(0,g.tZ)(y,{children:o.cloneElement(s,{...S})}):((0,m.ri)(x)||(0,m.ri)(a))&&void 0===s?(0,g.tZ)(y,{children:(0,g.tZ)(d.V$,{...S})}):null,(0,g.tZ)(w,{type:t,maxWidth:I,children:j}),(0,m.ri)(f)&&(0,g.tZ)(b,{onClick:function(e){e.preventDefault(),null==f||f()},size:"zero",priority:"link","aria-label":(0,c.t)("Dismiss"),children:(0,g.tZ)(d.bM,{isCircled:!0,...S})})]})});return(0,g.tZ)(v,{..._,onClick:()=>{(0,p.Z)("tag.clicked",{is_clickable:(0,m.ri)(u)||(0,m.ri)(a)||(0,m.ri)(x),organization:null})},children:(0,m.ri)(x)?(0,g.tZ)(n.Z,{href:x,children:z}):(0,m.ri)(a)&&(0,m.ri)(u)?(0,g.tZ)(i.Z,{to:a,onClick:u,children:z}):(0,m.ri)(a)?(0,g.tZ)(i.Z,{to:a,children:z}):z})}f.displayName="Tag";const v=(0,r.Z)("span",{target:"e8jgvoh4"})("font-size:",(e=>e.theme.fontSizeSmall),";"),Z=(0,r.Z)("div",{target:"e8jgvoh3"})("display:inline-flex;align-items:center;height:",x,";border-radius:",x,";background-color:",(e=>e.theme.tag[e.type].background),";border:solid 1px ",(e=>e.theme.tag[e.type].border),";padding:0 ",(0,u.Z)(1),";"),y=(0,r.Z)("span",{target:"e8jgvoh2"})("margin-right:",(0,u.Z)(.5),";display:inline-flex;"),w=(0,r.Z)("span",{target:"e8jgvoh1"})("color:",(e=>["black","white"].includes(e.type)?e.theme.tag[e.type].iconColor:e.theme.textColor),";max-width:",(e=>e.maxWidth),"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:",x,";"),b=(0,r.Z)(a.ZP,{target:"e8jgvoh0"})("margin-left:",(0,u.Z)(.5),";border:none;"),j=f},"./app/components/textOverflow.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/react/index.js"),s("./app/styles/overflowEllipsis.tsx")),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,r.Z)((e=>{let{isParagraph:t,className:s,children:r,"data-test-id":o}=e;const n=t?"p":"div";return(0,a.tZ)(n,{className:s,"data-test-id":o,children:r})}),{target:"eyxbn6j0"})((e=>"right"===e.ellipsisDirection?o.Z:"\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  direction: rtl;\n  text-align: left;\n"),";width:auto;line-height:1.2;");n.defaultProps={ellipsisDirection:"right",isParagraph:!1};const i=n},"./app/stores/memberListStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("../node_modules/reflux/src/index.js");const o={loaded:!1,state:[],init(){this.state=[],this.loaded=!1},loadInitialData(e){this.state=e,this.loaded=!0,this.trigger(this.state,"initial")},isLoaded(){return this.loaded},getById(e){if(this.state){e=""+e;for(let t=0;t<this.state.length;t++)if(this.state[t].id===e)return this.state[t]}},getByEmail(e){if(this.state){e=e.toLowerCase();for(let t=0;t<this.state.length;t++)if(this.state[t].email.toLowerCase()===e)return this.state[t]}},getAll(){return this.state}},a=s.n(r)().createStore(o)},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{s.d(t,{M:()=>n});var r=s("../node_modules/js-cookie/src/js.cookie.js"),o=s.n(r),a=s("./app/stores/configStore.tsx");function n(){const{isSuperuser:e}=a.Z.get("user")||{};return!(!e||(o().set("su","test"),void 0!==o().get("su")))}},"./app/utils/teams.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/react/index.js"),o=s("./app/utils/useTeams.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{children:t,...s}=e;const n=(0,o.Z)(s);return(0,a.tZ)(r.Fragment,{children:t(n)})}n.displayName="Teams";const i=n},"./app/utils/useTeams.tsx":(e,t,s)=>{s.d(t,{Z:()=>g}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),a=s.n(o),n=s("./app/actionCreators/teams.tsx"),i=s("./app/actions/teamActions.tsx"),l=s("./app/stores/organizationStore.tsx"),d=s("./app/stores/teamStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),u=s("./app/utils/isActiveSuperuser.tsx"),m=s("./app/utils/parseLinkHeader.tsx"),p=s("./app/utils/useApi.tsx");async function h(e,t){let{slugs:s,ids:r,search:o,limit:a,lastSearch:n,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={};var d;void 0!==s&&s.length>0&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),void 0!==r&&r.length>0&&(l.query=r.map((e=>`id:${e}`)).join(" ")),o&&(l.query=`${null!==(d=l.query)&&void 0!==d?d:""} ${o}`.trim());const c=n===o||!n&&!o;c&&i&&(l.cursor=i),void 0!==a&&(l.per_page=a);let u=!1,p=null;const[h,,g]=await e.requestPromise(`/organizations/${t}/teams/`,{includeAllArgs:!0,query:l}),x=null==g?void 0:g.getResponseHeader("Link");if(x){var f,v;const e=(0,m.Z)(x);u=null==e||null===(f=e.next)||void 0===f?void 0:f.results,p=null==e||null===(v=e.next)||void 0===v?void 0:v.cursor}return{results:h,hasMore:u,nextCursor:p}}const g=function(){var e,t,s;let{limit:o,slugs:m,ids:g,provideUserTeams:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const f=(0,p.Z)(),{organization:v}=(0,c.X)(l.Z),Z=(0,c.X)(d.Z),y=null==v?void 0:v.slug,w=new Set(Z.teams.map((e=>e.slug))),b=null!==(e=null==m?void 0:m.filter((e=>!w.has(e))))&&void 0!==e?e:[],j=new Set(Z.teams.map((e=>e.id))),I=null!==(t=null==g?void 0:g.filter((e=>!j.has(e))))&&void 0!==t?t:[],_=b.length>0,S=I.length>0,z=x&&!Z.loadedUserTeams,C=!_&&!z&&!S,[E,T]=(0,r.useState)({initiallyLoaded:C,fetching:!1,hasMore:Z.hasMore,lastSearch:null,nextCursor:Z.cursor,fetchError:null}),k=(0,r.useRef)(null);if(void 0!==m||void 0!==g){var $;const e=null!==($=m||g)&&void 0!==$?$:[];null===k.current&&(k.current=new Set(e)),(e.length!==k.current.size||e.some((e=>{var t;return!(null!==(t=k.current)&&void 0!==t&&t.has(e))})))&&(k.current=new Set(e))}async function M(){if(void 0!==y){T({...E,fetching:!0});try{await(0,n.PX)(f,{orgId:y}),T({...E,fetching:!1,initiallyLoaded:!0})}catch(e){console.error(e),T({...E,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}async function L(){if(void 0!==y){T({...E,fetching:!0});try{const{results:e,hasMore:t,nextCursor:s}=await h(f,y,{slugs:b,ids:I,limit:o}),r=a()([...Z.teams,...e],(e=>{let{slug:t}=e;return t}));i.Z.loadTeams(r),T({...E,hasMore:t,fetching:!1,initiallyLoaded:!0,nextCursor:s})}catch(e){console.error(e),T({...E,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}async function A(e){""!==e?P(e):E.hasMore===Z.hasMore&&E.nextCursor===Z.cursor||T({...E,lastSearch:e,hasMore:Z.hasMore,nextCursor:Z.cursor})}async function P(e){const{lastSearch:t}=E,s=e?E.nextCursor:Z.cursor;if(void 0!==y){T({...E,fetching:!0});try{f.clear();const{results:r,hasMore:n,nextCursor:l}=await h(f,y,{search:e,limit:o,lastSearch:t,cursor:s}),d=a()([...Z.teams,...r],(e=>{let{slug:t}=e;return t}));e?d.length>Z.teams.length&&i.Z.loadTeams(d):i.Z.loadTeams(d,n,l),T({...E,hasMore:n&&Z.hasMore,fetching:!1,lastSearch:null!=e?e:null,nextCursor:l})}catch(e){console.error(e),T({...E,fetching:!1,fetchError:e})}}else console.error("Cannot fetch teams without an organization in context")}(0,r.useEffect)((()=>{_||S?L():z&&M()}),[k.current,x]);const q=(0,u.M)(),D=m?Z.teams.filter((e=>m.includes(e.slug))):g?Z.teams.filter((e=>g.includes(e.id))):x&&!q?Z.teams.filter((e=>e.isMember)):Z.teams,N={teams:D,fetching:E.fetching||Z.loading,initiallyLoaded:E.initiallyLoaded,fetchError:E.fetchError,hasMore:null!==(s=E.hasMore)&&void 0!==s?s:Z.hasMore,onSearch:A,loadMore:P};return N}}}]);
//# sourceMappingURL=../sourcemaps/app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx.80440b7049b702c332d98288ff59abf8.js.map