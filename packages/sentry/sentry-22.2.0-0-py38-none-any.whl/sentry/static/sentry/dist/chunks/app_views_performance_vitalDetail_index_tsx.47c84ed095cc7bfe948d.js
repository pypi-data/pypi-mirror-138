"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_vitalDetail_index_tsx"],{"./app/utils/performance/histogram/utils.tsx":(e,t,n)=>{n.d(t,{te:()=>i,_W:()=>s,GT:()=>a});var r=n("./app/utils/formatters.tsx");function i(e){return e.length>=2?e[1].bin-e[0].bin:0}function s(e){const t=i(e);return e.map((e=>{const n=e.bin;return{start:n,end:n+t}}))}function a(e){let{precision:t,type:n,additionalFieldsFn:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e=>{switch(n){case"duration":const i=null!=t?t:e<1e3?0:3;return(0,r.g9)(e/1e3,i,!0);case"number":const s=10**(null!=t?t:0);return(Math.round((e+Number.EPSILON)*s)/s).toLocaleString();default:throw new Error(`Unable to format type: ${n}`)}};return e.map((e=>{var t;return{value:e.count,name:s(e.bin),...null!==(t=null==i?void 0:i(e.bin))&&void 0!==t?t:{}}}))}},"./app/views/performance/breadcrumb.tsx":(e,t,n)=>{n.d(t,{Z:()=>f});var r=n("../node_modules/react/index.js"),i=n("./app/components/breadcrumbs.tsx"),s=n("./app/locale.tsx"),a=n("./app/utils/queryString.tsx"),o=n("./app/views/performance/transactionSummary/tabs.tsx"),l=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),p=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),u=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),d=n("./app/views/performance/transactionSummary/utils.tsx"),m=n("./app/views/performance/vitalDetail/utils.tsx"),h=n("./app/views/performance/utils.tsx"),v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class g extends r.Component{getCrumbs(){const e=[],{organization:t,location:n,transaction:r,vitalName:i,spanSlug:v,eventSlug:g,traceSlug:f,tab:y}=this.props,x={pathname:(0,h.de)(t),query:{...n.query,transaction:void 0}};if(e.push({to:x,label:(0,s.t)("Performance"),preservePageFilters:!0}),i){const r=(0,m.i4)({orgSlug:t.slug,vitalName:"fcp",projectID:(0,a.ro)(n.query.project),query:n.query});e.push({to:r,label:(0,s.t)("Vital Detail"),preservePageFilters:!0})}else if(r){const i={orgSlug:t.slug,transaction:r.name,projectID:r.project,query:n.query};switch(y){case o.Z.Tags:{const t=(0,p.vG)(i);e.push({to:t,label:(0,s.t)("Tags"),preservePageFilters:!0});break}case o.Z.Events:{const t=(0,l.xr)(i);e.push({to:t,label:(0,s.t)("All Events"),preservePageFilters:!0});break}case o.Z.WebVitals:{const t=(0,u.Pl)(i);e.push({to:t,label:(0,s.t)("Web Vitals"),preservePageFilters:!0});break}case o.Z.Spans:{const t=(0,c.hN)(i);e.push({to:t,label:(0,s.t)("Spans"),preservePageFilters:!0});break}case o.Z.TransactionSummary:default:{const t=(0,d.e1)(i);e.push({to:t,label:(0,s.t)("Transaction Summary"),preservePageFilters:!0})}}}return r&&v?e.push({to:"",label:(0,s.t)("Span Details")}):r&&g?e.push({to:"",label:(0,s.t)("Event Details")}):f&&e.push({to:"",label:(0,s.t)("Trace View")}),e}render(){return(0,v.tZ)(i.Z,{crumbs:this.getCrumbs()})}}g.displayName="Breadcrumb";const f=g},"./app/views/performance/metricsSwitch.tsx":(e,t,n)=>{n.d(t,{BR:()=>m,z5:()=>g,_4:()=>f,j9:()=>v});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),s=n("./app/components/acl/feature.tsx"),a=n("./app/components/switchButton.tsx"),o=n("./app/locale.tsx"),l=n("./app/styles/space.tsx"),c=n("./app/utils/localStorage.tsx"),p=n("./app/utils/useOrganization.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d="metrics-performance-ui";function m(e){let{onSwitch:t}=e;const n=(0,p.Z)(),{isMetricsData:r,setIsMetricsData:i}=f();return(0,u.tZ)(s.Z,{features:[d],organization:n,children:(0,u.BX)(h,{children:[(0,o.t)("Metrics Data"),(0,u.tZ)(a.Z,{isActive:r,toggle:function(){t(),i(!r)},size:"lg"})]})})}m.displayName="MetricsSwitch";const h=(0,r.Z)("label",{target:"euzi8um0"})("display:flex;align-items:center;justify-content:center;margin-bottom:0;gap:",(0,l.Z)(1),";font-weight:normal;"),v=(0,i.createContext)({isMetricsData:!1,setIsMetricsData:e=>{}});function g(e){let{children:t}=e;const n=(0,p.Z)(),r=`metrics.performance:${n.slug}`,[s,a]=(0,i.useState)("true"===c.Z.getItem(r));return(0,u.tZ)(v.Provider,{value:{isMetricsData:s&&n.features.includes(d),setIsMetricsData:function(e){c.Z.setItem(r,e.toString()),a(e)}},children:t})}function f(){return(0,i.useContext)(v)}g.displayName="MetricsSwitchContextContainer"},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,n)=>{var r;n.d(t,{Z:()=>i}),function(e){e[e.TransactionSummary=0]="TransactionSummary",e[e.WebVitals=1]="WebVitals",e[e.Tags=2]="Tags",e[e.Events=3]="Events",e[e.Spans=4]="Spans",e[e.Anomalies=5]="Anomalies"}(r||(r={}));const i=r},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,n)=>{n.d(t,{q3:()=>o,_S:()=>l,xr:()=>c,tb:()=>p,qg:()=>u,Zq:()=>d});var r=n("./app/locale.tsx"),i=n("./app/utils/queryString.tsx"),s=n("./app/views/performance/transactionSummary/filter.tsx"),a=n("./app/views/performance/transactionSummary/utils.tsx");let o;function l(e,t){const{p99:n,p95:i,p75:a,p50:l}=t||{p99:0,p95:0,p75:0,p50:0};return{[o.p50]:{name:o.p50,query:l?[["transaction.duration",`<=${l.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,s.T$)(e)||"transaction.duration"},label:(0,r.t)("p50")},[o.p75]:{name:o.p75,query:a?[["transaction.duration",`<=${a.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,s.T$)(e)||"transaction.duration"},label:(0,r.t)("p75")},[o.p95]:{name:o.p95,query:i?[["transaction.duration",`<=${i.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,s.T$)(e)||"transaction.duration"},label:(0,r.t)("p95")},[o.p99]:{name:o.p99,query:n?[["transaction.duration",`<=${n.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,s.T$)(e)||"transaction.duration"},label:(0,r.t)("p99")},[o.p100]:{name:o.p100,label:(0,r.t)("p100")}}}function c(e){let{orgSlug:t,transaction:n,projectID:r,query:i}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:n,project:r,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}function p(e){return t=(0,i.ro)(e.query.showTransactions,o.p100),Object.values(o).includes(t)?t:o.p100;var t}function u(e,t){var n,r;const i=l(t),s=null===(n=i[e].sort)||void 0===n?void 0:n.kind,a=null===(r=i[e].sort)||void 0===r?void 0:r.field,o={showTransactions:e};return s&&a&&(o.sort=`${"desc"===s?"-":""}${a}`),o}function d(e){switch(e){case a.K0.OUTLIER:return o.p100;case a.K0.SLOW:return o.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(o||(o={}))},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,n)=>{let r,i;n.d(t,{p:()=>r,g:()=>i}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(r||(r={})),function(e){e.COUNT="count",e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(i||(i={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,n)=>{n.d(t,{hN:()=>m,bc:()=>h,CS:()=>v,E5:()=>g,TK:()=>x,KK:()=>Z,W6:()=>S,xz:()=>w,zW:()=>b,uQ:()=>_}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/lodash/pick.js"),i=n.n(r),s=n("./app/constants/index.tsx"),a=n("./app/locale.tsx"),o=n("./app/utils.tsx"),l=n("./app/utils/discover/eventView.tsx"),c=n("./app/utils/discover/fields.tsx"),p=n("./app/utils/queryString.tsx"),u=n("./app/utils/tokenizeSearch.tsx"),d=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function m(e){let{orgSlug:t,transaction:n,projectID:r,query:i}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/spans/`}({orgSlug:t}),query:{transaction:n,project:r,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}const h=30,v=i()(s.wh,["1h","24h","7d","14d","30d"]),g=[{prefix:(0,a.t)("Sort By"),label:(0,a.t)("Total Exclusive Time"),field:d.g.SUM_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("Average Count"),field:d.g.AVG_OCCURRENCE},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("Total Count"),field:d.g.COUNT},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p50 Exclusive Time"),field:d.p.P50_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p75 Exclusive Time"),field:d.p.P75_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p95 Exclusive Time"),field:d.p.P95_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p99 Exclusive Time"),field:d.p.P99_EXCLUSIVE_TIME}],f=d.g.SUM_EXCLUSIVE_TIME;function y(e){return g.find((t=>t.field===e))||g.find((e=>e.field===f))}function x(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sort";const i=null!==(t=(0,p.ro)(null==e||null===(n=e.query)||void 0===n?void 0:n[r]))&&void 0!==t?t:f;return y(i)}function Z(e){return y(e.sorts.length?e.sorts[0].field:f)}function S(e){if(!(0,o.ri)(e))return;const t=e.lastIndexOf(":");return t<0?void 0:{op:e.slice(0,t),group:e.slice(t+1)}}function w(e){let{location:t,transactionName:n,isMetricsData:r}=e;const i=(0,p.ro)(t.query.query,""),s=new u.MY(i);r||s.setFilterValues("event.type",["transaction"]),s.setFilterValues("transaction",[n]);const a=l.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:[...Object.values(d.g),...Object.values(d.p)],query:s.formatString(),projects:[]},t),o=x(t);return a.withSorts([{field:o.field,kind:"desc"}])}function b(e){const t=e.withColumns([{kind:"function",function:["count","",void 0,void 0]}]),n=new u.MY(e.query);return Object.keys(n.filters).forEach((e=>{(0,c.h1)(e)&&n.removeFilter(e)})),t.query=n.formatString(),t}const _={[d.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.COUNT]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,n)=>{n.d(t,{Zn:()=>s,bZ:()=>a,vG:()=>o,oc:()=>l,oT:()=>c});var r=n("./app/utils/analytics.tsx"),i=n("./app/utils/queryString.tsx");function s(e){return(0,i.ro)(e.query.tagKey)}function a(e){(0,r.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(e.id,10)})}function o(e){let{orgSlug:t,transaction:n,projectID:r,query:i}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/tags/`}({orgSlug:t}),query:{transaction:n,project:r,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query,tagKey:i.tagKey}}}function l(e){var t,n;let r=null!==(t=(0,i.ro)(null===(n=e.query)||void 0===n?void 0:n.tagSort))&&void 0!==t?t:"-frequency";return["sumdelta"].find((e=>{var t;return null===(t=r)||void 0===t?void 0:t.includes(e)}))&&(r="-frequency"),r}function c(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const n=t.split("_");return{histogramField:t,bucketSize:parseInt(n[n.length-3],10),offset:parseInt(n[n.length-2],10),multiplier:parseInt(n[n.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,n)=>{n.d(t,{Pl:()=>i,oZ:()=>s,eH:()=>a,L0:()=>o,jb:()=>l});var r=n("./app/utils/performance/histogram/utils.tsx");function i(e){let{orgSlug:t,transaction:n,projectID:r,query:i}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/vitals/`}({orgSlug:t}),query:{transaction:n,project:r,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}function s(e,t){const n=(0,r.te)(e);return!e.length||t>=e[e.length-1].bin+n?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/n)}function a(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const n=e[t];for(let r=t+1;r<e.length;r++){const i=e[r];if(n.bin!==i.bin&&n.count!==i.count)return{point1:{x:t,y:Math.min(n.count,i.count)},point2:{x:r,y:Math.max(n.count,i.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function o(e,t){const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1]))return null;const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1])?null:{point1:{x:n[0],y:n[1]},point2:{x:r[0],y:r[1]}}}function l(e,t,n){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||n.point1.x===n.point2.x||n.point1.y===n.point2.y)return null;const r=(e.x-t.point1.x)/(t.point2.x-t.point1.x),i=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:n.point1.x+(n.point2.x-n.point1.x)*r,y:n.point1.y+(n.point2.y-n.point1.y)*i}}},"./app/views/performance/vitalDetail/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>He});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react/index.js")),a=n("../node_modules/react-router/es/index.js"),o=n("../node_modules/lodash/isEqual.js"),l=n.n(o),c=n("./app/actionCreators/tags.tsx"),p=n("./app/components/noProjectMessage.tsx"),u=n("./app/components/organizations/pageFilters/container.tsx"),d=n("./app/components/sentryDocumentTitle.tsx"),m=n("./app/locale.tsx"),h=n("./app/styles/organization.tsx"),v=n("./app/utils/discover/fields.tsx"),g=n("./app/utils/performance/contexts/performanceEventViewContext.tsx"),f=n("./app/utils/queryString.tsx"),y=n("./app/utils/withApi.tsx"),x=n("./app/utils/withOrganization.tsx"),Z=n("./app/utils/withPageFilters.tsx"),S=n("./app/utils/withProjects.tsx"),w=n("./app/views/performance/data.tsx"),b=n("./app/views/performance/metricsSwitch.tsx"),_=n("./app/views/performance/utils.tsx"),C=n("../node_modules/lodash/omit.js"),E=n.n(C),q=n("./app/components/acl/feature.tsx"),j=n("./app/components/alert.tsx"),T=n("./app/components/button.tsx"),P=n("./app/components/buttonBar.tsx"),V=n("./app/components/charts/utils.tsx"),I=n("./app/components/createAlertButton.tsx"),D=n("./app/components/events/searchBar.tsx"),M=n("./app/components/layouts/thirds.tsx"),A=n("./app/components/loadingIndicator.tsx"),k=n("./app/components/organizations/pageFilters/parse.tsx"),z=n("./app/components/performance/teamKeyTransactionsManager.tsx"),N=n("./app/icons/index.tsx"),L=n("./app/icons/iconFlag.tsx"),B=n("./app/styles/space.tsx"),O=n("./app/utils.tsx"),F=n("./app/utils/dates.tsx"),X=n("./app/utils/metrics/metricsRequest.tsx"),U=n("./app/utils/performance/vitals/constants.tsx"),R=n("./app/utils/teams.tsx"),W=n("./app/utils/tokenizeSearch.tsx"),$=n("./app/views/performance/landing/widgets/transforms/transformMetricsToArea.tsx"),H=n("./app/views/performance/breadcrumb.tsx"),K=n("./app/views/performance/metricsSearchBar.tsx"),G=n("./app/components/gridEditable/index.tsx"),Q=n("./app/components/gridEditable/sortLink.tsx"),Y=n("./app/components/links/link.tsx"),J=n("./app/components/pagination.tsx"),ee=n("./app/components/tag.tsx"),te=n("./app/utils/analytics.tsx"),ne=n("./app/utils/discover/eventView.tsx"),re=n("./app/utils/discover/fieldRenderers.tsx"),ie=n("./app/utils/discover/genericDiscoverQuery.tsx"),se=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ae(e){return(0,se.tZ)(ie.ZP,{route:"eventsv2",...e})}ae.displayName="VitalsCardsDiscoverQuery";const oe=(0,y.Z)(ae);var le=n("./app/views/eventsV2/table/cellAction.tsx"),ce=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),pe=n("./app/views/performance/transactionSummary/utils.tsx"),ue=n("./app/views/performance/vitalDetail/utils.tsx");const de=["Transaction","Project","Unique Users","Count"];class me extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{widths:[]}),(0,r.Z)(this,"handleCellAction",(e=>(t,n)=>{const{eventView:r,location:i,organization:s}=this.props;(0,te.ec)({eventKey:"performance_views.overview.cellaction",eventName:"Performance Views: Cell Action Clicked",organization_id:parseInt(s.id,10),action:t});const o=new W.MY(r.query);o.removeFilter("event.type"),(0,le.rh)(o,t,e,n),a.browserHistory.push({pathname:i.pathname,query:{...i.query,cursor:void 0,query:o.formatString()}})})),(0,r.Z)(this,"renderBodyCellWithData",((e,t)=>(n,r)=>this.renderBodyCell(e,n,r,t))),(0,r.Z)(this,"renderHeadCellWithMeta",((e,t)=>(n,r)=>this.renderHeadCell(e,n,((e,t)=>{const n=ue.a7[t];return[...de,`p50(${n})`,`p75(${n})`,`p95(${n})`,"Status"][e]})(r,t)))),(0,r.Z)(this,"renderPrependCellWithData",((e,t)=>{const{eventView:n}=this.props,r=n.getColumns().find((e=>"team_key_transaction"===e.name));return(n,i)=>{if(r){if(n){const t=(0,se.tZ)(N.GK,{color:"yellow300",isSolid:!0,"data-test-id":"key-transaction-header"},"keyTransaction");return[this.renderHeadCell(null==e?void 0:e.meta,r,t)]}return[this.renderBodyCell(e,r,i,t)]}return[]}})),(0,r.Z)(this,"handleSummaryClick",(()=>{const{organization:e}=this.props;(0,te.ec)({eventKey:"performance_views.overview.navigate.summary",eventName:"Performance Views: Overview view summary",organization_id:parseInt(e.id,10)})})),(0,r.Z)(this,"handleResizeColumn",((e,t)=>{const n=[...this.state.widths];n[e]=t.width?Number(t.width):G.z7,this.setState({widths:n})}))}renderBodyCell(e,t,n,r){const{eventView:i,organization:s,projects:a,location:o,summaryConditions:l}=this.props;if(!e||!e.meta)return n[t.key];const c=e.meta,p=String(t.key);if(p===(0,ue.Ve)(r))return n[(0,v.LY)(p)]?(0,se.tZ)(he,{children:(0,se.tZ)(fe,{children:(0,m.t)("Poor")})}):n[(0,v.LY)((0,ue.q4)(r))]?(0,se.tZ)(he,{children:(0,se.tZ)(ge,{children:(0,m.t)("Meh")})}):(0,se.tZ)(he,{children:(0,se.tZ)(ve,{children:(0,m.t)("Good")})});const u=(0,re.Js)(p,c)(n,{organization:s,location:o}),d=[le.eX.ADD,le.eX.EXCLUDE,le.eX.SHOW_GREATER_THAN,le.eX.SHOW_LESS_THAN];if("transaction"===p){const e=function(e,t){const n=(null==e?void 0:e.project)||void 0;if(void 0===typeof n)return;const r=t.find((e=>e.slug===n));return r?r.id:void 0}(n,a),o=i.clone(),c=new W.MY(l);c.addFilterValues("has",[`${r}`]),o.query=c.formatString();const p=String(n.transaction)||"",h=(0,pe.e1)({orgSlug:s.slug,transaction:p,query:o.generateQueryStringObject(),projectID:e,showTransactions:pe.K0.RECENT,display:ce.D.VITALS});return(0,se.tZ)(le.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:d,children:(0,se.tZ)(Y.Z,{to:h,"aria-label":(0,m.t)("See transaction summary of the transaction %s",p),onClick:this.handleSummaryClick,children:u})})}return p.startsWith("team_key_transaction")?u:(0,se.tZ)(le.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:d,children:u})}renderHeadCell(e,t,n){const{eventView:r,location:i}=this.props,s=(0,v.qG)(t.name,t.type,e),a={field:t.name,width:t.width},o=r.sortForField(a,e),l=(0,ne.M3)(a,e);return(0,se.tZ)(Q.Z,{align:s,title:n||a.field,direction:o?o.kind:void 0,canSort:l,generateSortLink:function(){if(!e)return;const t=r.sortOnField(a,e).generateQueryStringObject();return{...i,query:{...i.query,sort:t.sort}}}})}getSortedEventView(e){const{eventView:t}=this.props,n=(0,v.LY)((0,ue.Ve)(e)),r=(0,v.LY)((0,ue.q4)(e)),i=t.sorts.some((e=>e.field.includes(n)||e.field.includes(r)))?[]:[{field:"team_key_transaction",kind:"desc"},{field:n,kind:"desc"},{field:r,kind:"desc"}];return t.withSorts([...i,...t.sorts])}render(){const{eventView:e,organization:t,location:n}=this.props,{widths:r}=this.state,i=e.clone();i.fields=[...e.fields];const a=i.getColumns().filter((e=>"team_key_transaction"!==e.name)).slice(0,-1).map(((e,t)=>"number"==typeof r[t]?{...e,width:r[t]}:e)),o=(0,ue.iF)(n),l=this.getSortedEventView(o),c=l.getSorts();return(0,se.tZ)("div",{children:(0,se.tZ)(oe,{eventView:l,orgSlug:t.slug,location:n,limit:10,referrer:"api.performance.vital-detail",children:e=>{let{pageLinks:t,isLoading:r,tableData:i}=e;return(0,se.BX)(s.Fragment,{children:[(0,se.tZ)(G.ZP,{isLoading:r,data:i?i.data:[],columnOrder:a,columnSortBy:c,grid:{onResizeColumn:this.handleResizeColumn,renderHeadCell:this.renderHeadCellWithMeta(null==i?void 0:i.meta,o),renderBodyCell:this.renderBodyCellWithData(i,o),renderPrependColumns:this.renderPrependCellWithData(i,o),prependColumnWidths:["max-content"]},location:n}),(0,se.tZ)(J.Z,{pageLinks:t})]})}})})}}me.displayName="Table";const he=(0,i.Z)("div",{target:"ebw8yf93"})({name:"1gnrgb9",styles:"text-align:right;justify-self:flex-end;flex-grow:1"}),ve=(0,i.Z)(ee.Z,{target:"ebw8yf92"})("div{background-color:",(e=>e.theme[ue.fL[ue.SP.GOOD]]),";}span{color:",(e=>e.theme.white),";}"),ge=(0,i.Z)(ee.Z,{target:"ebw8yf91"})("div{background-color:",(e=>e.theme[ue.fL[ue.SP.MEH]]),";}span{color:",(e=>e.theme.white),";}"),fe=(0,i.Z)(ee.Z,{target:"ebw8yf90"})("div{background-color:",(e=>e.theme[ue.fL[ue.SP.POOR]]),";}span{color:",(e=>e.theme.white),";}"),ye=me;var xe=n("./app/views/performance/vitalDetail/vitalChart.tsx"),Ze=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),Se=n("../node_modules/moment/moment.js"),we=n.n(Se),be=n("./app/components/charts/chartZoom.tsx"),_e=n("./app/components/charts/errorPanel.tsx"),Ce=n("./app/components/charts/lineChart.tsx"),Ee=n("./app/components/charts/releaseSeries.tsx"),qe=n("./app/components/charts/styles.tsx"),je=n("./app/components/charts/transitionChart.tsx"),Te=n("./app/components/charts/transparentLoadingMask.tsx"),Pe=n("./app/components/panels/index.tsx"),Ve=n("./app/components/questionTooltip.tsx"),Ie=n("./app/utils/getDynamicText.tsx"),De=n("./app/views/performance/trends/utils.tsx");function Me(e){let{reloading:t,loading:n,response:r,errored:i,statsPeriod:s,start:o,end:l,project:c,environment:p,field:u,vital:d,router:h,location:v}=e;const g=(0,Ze.u)(),{utc:f,legend:y,vitalPoor:x,markLines:Z,chartOptions:S}=(0,ue.EX)({theme:g,location:v,vital:d,yAxis:u});function w(e){const{selected:t}=e,n=Object.keys(t).filter((e=>!t[e])),r={...v,query:{...v.query,unselectedSeries:n}};a.browserHistory.push(r)}return(0,se.tZ)(Pe.s_,{children:(0,se.BX)(qe.BO,{children:[(0,se.BX)(qe.ws,{children:[(0,m.t)("Duration p75"),(0,se.tZ)(Ve.Z,{size:"sm",position:"top",title:(0,m.t)("The durations shown should fall under the vital threshold.")})]}),(0,se.tZ)(be.Z,{router:h,period:s,start:o,end:l,utc:f,children:e=>{if(i)return(0,se.tZ)(_e.Z,{children:(0,se.tZ)(N.FC,{color:"gray500",size:"lg"})});const a=null==r?void 0:r.groups.map((e=>({seriesName:u,data:r.intervals.map(((t,n)=>({name:we()(t).valueOf(),value:e.series[u][n]})))}))),d=a&&g.charts.getColorPalette(a.length-2)||[],{smoothedResults:m}=(0,De.vq)(a),h=m?m.map(((e,t)=>{let{seriesName:n,...r}=e;return{seriesName:(0,De.HF)(n)||"p75",...r,color:d[t],lineStyle:{opacity:1,width:2}}})):[],v=(0,ue.vk)(h),b=Math.max(v,x);return S.yAxis.max=1.1*b,(0,se.tZ)(Ee.Z,{start:o,end:l,period:s,utc:f,projects:c,environments:p,children:r=>{let{releaseSeries:i}=r;return(0,se.BX)(je.Z,{loading:n,reloading:t,children:[(0,se.tZ)(Te.Z,{visible:t}),(0,Ie.Z)({value:(0,se.tZ)(Ce.Z,{...e,...S,legend:y,onLegendSelectChanged:w,series:[...Z,...i,...h]}),fixed:"Web Vitals Chart"})]})}})}})]})})}Me.displayName="VitalChartMetrics";const Ae=(0,a.withRouter)(Me);var ke=n("./app/views/performance/vitalDetail/vitalInfo.tsx");const ze=[v.Zl.FCP,v.Zl.LCP,v.Zl.FID,v.Zl.CLS];class Ne extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{incompatibleAlertNotice:null,error:void 0}),(0,r.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,n=(0,k.fK)({...t.query||{},query:e}),r=E()(n,"cursor");a.browserHistory.push({pathname:t.pathname,query:r})})),(0,r.Z)(this,"generateTagUrl",((e,t)=>{const{location:n}=this.props,r=(0,O.ZT)(n.query,{key:e,value:t});return{...n,query:r}})),(0,r.Z)(this,"handleIncompatibleQuery",((e,t)=>{const n=e((()=>this.setState({incompatibleAlertNotice:null})));this.setState({incompatibleAlertNotice:n})})),(0,r.Z)(this,"setError",(e=>{this.setState({error:e})}))}renderCreateAlertButton(){const{eventView:e,organization:t,projects:n}=this.props;return(0,se.tZ)(I.K,{eventView:e,organization:t,projects:n,onIncompatibleQuery:this.handleIncompatibleQuery,onSuccess:()=>{},referrer:"performance"})}renderVitalSwitcher(){const{vitalName:e,location:t}=this.props,n=ze.indexOf(e);if(n<0)return null;const r=0===n,i=n===ze.length-1,s=e=>()=>{a.browserHistory.push({pathname:t.pathname,query:{...t.query,vitalName:e}})};return(0,se.BX)(P.ZP,{merged:!0,children:[(0,se.tZ)(T.ZP,{icon:(0,se.tZ)(N.g6,{direction:"left",size:"sm"}),"aria-label":(0,m.t)("Previous"),disabled:r,onClick:s(ze[n-1])}),(0,se.tZ)(T.ZP,{icon:(0,se.tZ)(N.g6,{direction:"right",size:"sm"}),"aria-label":(0,m.t)("Next"),disabled:i,onClick:s(ze[n+1])})]})}renderError(){const{error:e}=this.state;return e?(0,se.tZ)(j.Z,{type:"error",icon:(0,se.tZ)(L.G,{size:"md"}),children:e}):null}renderContent(e){const{isMetricsData:t,location:n,organization:r,eventView:i,api:a,projects:o}=this.props,{fields:l,start:c,end:p,statsPeriod:u,environment:d,project:m}=i,h=(0,f.ro)(n.query.query,""),v=r.slug,g=c?(0,F.hC)(c):null,y=p?(0,F.hC)(p):null,x=(0,V.ZS)({start:g,end:y,period:u},"high");if(t){const r=`p75(${ue.T4[e]})`;return(0,se.BX)(s.Fragment,{children:[(0,se.tZ)(Xe,{searchSource:"performance_vitals_metrics",orgSlug:v,projectIds:m,query:h,onSearch:this.handleSearch}),(0,se.tZ)(X.Z,{api:a,orgSlug:v,start:c,end:p,statsPeriod:u,project:m,environment:d,field:[r],query:new W.MY(h).formatString(),interval:x,children:i=>{var a;const{loading:o,errored:l,response:h,reloading:f}=i,x=(0,$.g)({location:n,fields:[r]},i);return(0,se.BX)(s.Fragment,{children:[(0,se.tZ)(Ae,{start:g,end:y,statsPeriod:u,project:m,environment:d,loading:o,response:h,errored:l,reloading:f,field:r,vital:e}),(0,se.tZ)(Fe,{children:(0,se.tZ)(ke.Z,{orgSlug:v,location:n,vital:e,project:m,environment:d,start:c,end:p,statsPeriod:u,isMetricsData:t,isLoading:o,p75AllTransactions:null===(a=x.dataMean)||void 0===a?void 0:a[0].mean})}),(0,se.tZ)("div",{children:"TODO"})]})}})]})}const Z=function(e){const t=new W.MY(e);return t.freeText=[],t.formatString()}((0,_.Ov)(n));return(0,se.BX)(s.Fragment,{children:[(0,se.tZ)(Oe,{searchSource:"performance_vitals",organization:r,projectIds:m,query:h,fields:l,onSearch:this.handleSearch}),(0,se.tZ)(xe.Z,{organization:r,query:h,project:m,environment:d,start:g,end:y,statsPeriod:u,interval:x}),(0,se.tZ)(Fe,{children:(0,se.tZ)(ke.Z,{orgSlug:v,location:n,vital:e,project:m,environment:d,start:c,end:p,statsPeriod:u})}),(0,se.tZ)(R.Z,{provideUserTeams:!0,children:e=>{let{teams:t,initiallyLoaded:s}=e;return s?(0,se.tZ)(z.z,{organization:r,teams:t,selectedTeams:["myteams"],selectedProjects:m.map(String),children:(0,se.tZ)(ye,{eventView:i,projects:o,organization:r,location:n,setError:this.setError,summaryConditions:Z})}):(0,se.tZ)(A.Z,{})}})]})}render(){const{location:e,organization:t,vitalName:n}=this.props,{incompatibleAlertNotice:r}=this.state,i=n||v.Zl.LCP;return(0,se.BX)(s.Fragment,{children:[(0,se.BX)(M.h4,{children:[(0,se.BX)(M.oB,{children:[(0,se.tZ)(H.Z,{organization:t,location:e,vitalName:i}),(0,se.tZ)(M.Dx,{children:ue.jo[i]})]}),(0,se.tZ)(M.kP,{children:(0,se.BX)(P.ZP,{gap:1,children:[(0,se.tZ)(b.BR,{onSwitch:()=>this.handleSearch("")}),(0,se.tZ)(q.Z,{organization:t,features:["incidents"],children:e=>{let{hasFeature:t}=e;return t&&this.renderCreateAlertButton()}}),this.renderVitalSwitcher()]})})]}),(0,se.BX)(M.uT,{children:[this.renderError(),r&&(0,se.tZ)(M.or,{fullWidth:!0,children:r}),(0,se.BX)(M.or,{fullWidth:!0,children:[(0,se.tZ)(Be,{children:ue.il[n]}),(0,se.tZ)(Ue,{children:Object.values(U.AR).map((e=>{var t;return(0,se.BX)(Re,{children:[null!==(t=ue.cD[n])&&void 0!==t&&t.includes(e)?(0,se.tZ)(N.DL,{color:"green200",size:"sm"}):(0,se.tZ)(N.bM,{color:"red300",size:"sm"}),e]},e)}))}),this.renderContent(i)]})]})]})}}Ne.displayName="VitalDetailContent";const Le=(0,S.Z)(Ne),Be=(0,i.Z)("div",{target:"e150wv1u5"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,B.Z)(3),";"),Oe=(0,i.Z)(D.Z,{target:"e150wv1u4"})("margin-bottom:",(0,B.Z)(2),";"),Fe=(0,i.Z)("div",{target:"e150wv1u3"})("margin-bottom:",(0,B.Z)(3),";"),Xe=(0,i.Z)(K.Z,{target:"e150wv1u2"})("margin-bottom:",(0,B.Z)(2),";"),Ue=(0,i.Z)("div",{target:"e150wv1u1"})("display:inline-flex;gap:",(0,B.Z)(2),";margin-bottom:",(0,B.Z)(3),";"),Re=(0,i.Z)("div",{target:"e150wv1u0"})("display:flex;align-items:center;gap:",(0,B.Z)(1),";");class We extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{eventView:(0,w.AM)(this.props.location,!1)})}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,w.AM)(e.location,!1)}}componentDidMount(){const{api:e,organization:t,selection:n}=this.props;(0,c.QK)(e,t.slug,n),(0,_.n4)(n)}componentDidUpdate(e){const{api:t,organization:n,selection:r}=this.props;l()(e.selection.projects,r.projects)&&l()(e.selection.datetime,r.datetime)||((0,c.QK)(t,n.slug,r),(0,_.n4)(r))}getDocumentTitle(){const e=(0,_.JY)(this.props.location);return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,m.t)("Performance")].join(" - "):[(0,m.t)("Vital Detail"),(0,m.t)("Performance")].join(" - ")}render(){const{organization:e,location:t,router:n,api:r}=this.props,{eventView:i}=this.state;if(!i)return a.browserHistory.replace({pathname:`/organizations/${e.slug}/performance/`,query:{...t.query}}),null;const s=(0,f.ro)(t.query.vitalName),o=-1===Object.values(v.Zl).indexOf(s)?void 0:s;return(0,se.tZ)(d.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,se.tZ)(g.bq,{value:{eventView:this.state.eventView},children:(0,se.tZ)(u.Z,{children:(0,se.tZ)($e,{children:(0,se.tZ)(p.Z,{organization:e,children:(0,se.tZ)(b.j9.Consumer,{children:s=>{let{isMetricsData:a}=s;return(0,se.tZ)(Le,{location:t,organization:e,eventView:i,router:n,vitalName:o||v.Zl.LCP,isMetricsData:a,api:r})}})})})})})})}}We.displayName="VitalDetail";const $e=(0,i.Z)(h.JH,{target:"ekkkevo0"})({name:"1hcx8jb",styles:"padding:0"}),He=(0,y.Z)((0,Z.Z)((0,S.Z)((0,x.Z)(We))))},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,n)=>{n.d(t,{Z:()=>m}),n("../node_modules/react/index.js");var r=n("./app/utils/metrics/metricsRequest.tsx"),i=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),s=n("./app/utils/queryString.tsx"),a=n("./app/utils/tokenizeSearch.tsx"),o=n("./app/utils/useApi.tsx"),l=n("./app/views/performance/landing/vitalsCards.tsx"),c=n("./app/views/performance/landing/widgets/widgets/vitalWidgetMetrics.tsx"),p=n("./app/views/performance/vitalDetail/utils.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{orgSlug:t,start:n,end:d,statsPeriod:m,project:h,environment:v,vital:g,location:f,isLoading:y,hideBar:x,hideStates:Z,hideVitalPercentNames:S,hideDurationDetail:w,p75AllTransactions:b,isMetricsData:_}=e;const C=(0,o.Z)(),E=Array.isArray(g)?g:[g],q={vital:g,showBar:!x,showStates:!Z,showVitalPercentNames:!S,showDurationDetail:!w};if(_){const e=(0,s.ro)(f.query.query,""),i=E.map((e=>`count(${p.T4[e]})`));return(0,u.tZ)(r.Z,{api:C,orgSlug:t,start:n,end:d,statsPeriod:m,project:h,environment:v,field:i,query:new a.MY(e).formatString(),groupBy:["measurement_rating"],children:e=>{let{loading:t,response:n}=e;const r=E.reduce(((e,t,r)=>(e[t]=(0,c.b)({field:i[r],response:n}),e)),{});return Array.isArray(g)||(r[g].p75=null!=b?b:0),(0,u.tZ)(l.JO,{...q,isLoading:y||t,data:r})}})}return(0,u.tZ)(i.Z,{location:f,vitals:E,children:e=>{let{isLoading:t,vitalsData:n}=e;return(0,u.tZ)(l.JO,{...q,isLoading:y||t,data:n})}})}d.displayName="VitalInfo";const m=d}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_vitalDetail_index_tsx.4e206f6ae5e30866b99f1c2b7c19d21d.js.map