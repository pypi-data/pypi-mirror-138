"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionOverview_index_tsx"],{"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>u});var r=n("../node_modules/lodash/omit.js"),i=n.n(r),a=n("./app/utils.tsx"),s=n("./app/utils/discover/genericDiscoverQuery.tsx"),o=n("./app/utils/withApi.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){const{perSuspect:t,spanOps:n,spanGroups:r}=e,i={perSuspect:t,spanOp:n,spanGroup:r};(0,a.ri)(i.perSuspect)||delete i.perSuspect,(0,a.ri)(i.spanOp)||delete i.spanOp,(0,a.ri)(i.spanGroup)||delete i.spanGroup;const s=e.eventView.getEventsAPIPayload(e.location);return Object.assign(i,s)}function p(e){return(0,l.tZ)(s.ZP,{route:"events-spans-performance",getRequestPayload:c,...i()(e,"children"),children:t=>{let{tableData:n,...r}=t;return e.children({suspectSpans:n,...r})}})}p.displayName="SuspectSpansQuery";const u=(0,o.Z)(p)},"./app/views/eventsV2/tags.tsx":(e,t,n)=>{n.d(t,{Z:()=>T});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),s=n("../node_modules/@sentry/minimal/esm/index.js"),o=n("./app/actionCreators/events.tsx"),l=n("./app/components/charts/errorPanel.tsx"),c=n("./app/components/charts/styles.tsx"),p=n("./app/components/emptyStateWarning.tsx"),u=n("./app/components/placeholder.tsx"),d=n("./app/components/tagDistributionMeter.tsx"),m=n("./app/icons/index.tsx"),g=n("./app/locale.tsx"),h=n("./app/styles/space.tsx"),v=n("./app/utils/analytics.tsx"),x=n("./app/utils/discover/eventView.tsx"),f=n("./app/utils/withApi.tsx"),y=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends a.Component{constructor(){var e;super(...arguments),e=this,(0,r.Z)(this,"state",{loading:!0,tags:[],totalValues:null,error:""}),(0,r.Z)(this,"shouldRefetchData",(e=>{const t=this.props.eventView.getFacetsAPIPayload(this.props.location),n=e.eventView.getFacetsAPIPayload(e.location);return!(0,x.ze)(t,n)})),(0,r.Z)(this,"fetchData",(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:n,organization:r,eventView:i,location:a,confirmedQuery:l}=e.props;if(e.setState({loading:!0,error:"",tags:[]}),t||!1!==l)try{const t=await(0,o.eV)(n,r.slug,i.getFacetsAPIPayload(a));e.setState({loading:!1,tags:t})}catch(t){s.Tb(t),e.setState({loading:!1,error:t})}})),(0,r.Z)(this,"handleTagClick",(e=>{const{organization:t}=this.props;(0,v.ec)({eventKey:"discover_v2.facet_map.clicked",eventName:"Discoverv2: Clicked on a tag on the facet map",tag:e,organization_id:parseInt(t.id,10)})})),(0,r.Z)(this,"renderBody",(()=>{const{loading:e,error:t,tags:n}=this.state;return e?this.renderPlaceholders():t?(0,y.tZ)(l.Z,{height:"132px",children:(0,y.tZ)(m.FC,{color:"gray300",size:"lg"})}):n.length>0?n.map((e=>this.renderTag(e))):(0,y.tZ)(w,{small:!0,children:(0,g.t)("No tags found")})}))}componentDidMount(){this.fetchData(!0)}componentDidUpdate(e){(this.shouldRefetchData(e)||e.confirmedQuery!==this.props.confirmedQuery)&&this.fetchData()}renderTag(e){const{generateUrl:t,totalValues:n}=this.props,r=e.topValues.map((n=>(n.url=t(e.key,n.value),n))),i=r.length>0?Math.max(Number(n),r[0].count):n;return(0,y.tZ)(d.Z,{title:e.key,segments:r,totalValues:Number(i),renderLoading:()=>(0,y.tZ)(S,{height:"16px"}),onTagClick:this.handleTagClick,showReleasePackage:!0},e.key)}renderPlaceholders(){return(0,y.BX)(a.Fragment,{children:[(0,y.tZ)(b,{},"title-1"),(0,y.tZ)(S,{},"bar-1"),(0,y.tZ)(b,{},"title-2"),(0,y.tZ)(S,{},"bar-2"),(0,y.tZ)(b,{},"title-3"),(0,y.tZ)(S,{},"bar-3")]})}render(){return(0,y.BX)(a.Fragment,{children:[(0,y.tZ)(c.OT,{children:(0,g.t)("Tag Summary")}),this.renderBody()]})}}Z.displayName="Tags";const w=(0,i.Z)(p.Z,{target:"e1pu9veq2"})({name:"rtpdsm",styles:"height:132px;padding:54px 15%"}),S=(0,i.Z)(u.Z,{target:"e1pu9veq1"})("border-radius:",(e=>e.theme.borderRadius),";height:16px;margin-bottom:",(0,h.Z)(1.5),";"),b=(0,i.Z)(u.Z,{target:"e1pu9veq0"})("width:100px;height:12px;margin-bottom:",(0,h.Z)(.5),";"),T=(0,f.Z)(Z)},"./app/views/performance/transactionSummary/transactionOverview/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>dt}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react/index.js"),i=n("../node_modules/react-router/es/index.js"),a=n("./app/actionCreators/tags.tsx"),s=n("./app/locale.tsx"),o=n("./app/utils/analytics.tsx"),l=n("./app/utils/discover/discoverQuery.tsx"),c=n("./app/utils/discover/eventView.tsx"),p=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/performance/histogram/index.tsx"),d=n("./app/utils/queryString.tsx"),m=n("./app/utils/tokenizeSearch.tsx"),g=n("./app/utils/useApi.tsx"),h=n("./app/utils/withOrganization.tsx"),v=n("./app/utils/withPageFilters.tsx"),x=n("./app/utils/withProjects.tsx"),f=n("./app/views/performance/utils.tsx"),y=n("./app/views/performance/transactionSummary/filter.tsx"),Z=n("./app/views/performance/transactionSummary/pageLayout.tsx"),w=n("./app/views/performance/transactionSummary/tabs.tsx"),S=n("./app/views/performance/transactionSummary/transactionVitals/constants.tsx"),b=n("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),T=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),E=n("../node_modules/lodash/omit.js"),k=n.n(E),q=n("./app/components/acl/feature.tsx"),C=n("./app/components/discover/transactionsList.tsx"),_=n("./app/components/events/searchBar.tsx"),z=n("./app/components/globalSdkUpdateAlert.tsx"),P=n("./app/components/layouts/thirds.tsx"),j=n("./app/components/organizations/pageFilters/parse.tsx"),I=n("./app/constants/index.tsx"),V=n("./app/styles/space.tsx"),L=n("./app/utils.tsx"),N=n("./app/views/eventsV2/table/cellAction.tsx"),O=n("./app/views/eventsV2/tags.tsx"),F=n("./app/views/performance/metricsSearchBar.tsx"),D=n("./app/views/performance/transactionSummary/utils.tsx"),B=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),A=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),M=n("../node_modules/lodash/pick.js"),$=n.n(M),X=n("./app/components/button.tsx"),R=n("./app/components/charts/styles.tsx"),U=n("./app/components/emptyStateWarning.tsx"),W=n("./app/components/issues/groupList.tsx"),K=n("./app/components/panels/index.tsx"),Q=n("./app/constants/pageFilters.tsx"),G=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Y extends r.Component{constructor(){super(...arguments),(0,A.Z)(this,"handleOpenClick",(()=>{const{organization:e}=this.props;(0,o.ec)({eventKey:"performance_views.summary.open_issues",eventName:"Performance Views: Open issues from transaction summary",organization_id:parseInt(e.id,10)})})),(0,A.Z)(this,"renderEmptyMessage",(()=>{const{statsPeriod:e}=this.props,t=e&&I.wh[e],n=t?t.toLowerCase():(0,s.t)("given timeframe");return(0,G.tZ)(K.s_,{children:(0,G.tZ)(K.N,{children:(0,G.tZ)(U.Z,{children:(0,G.tZ)("p",{children:(0,s._N)("No new issues for this transaction for the [timePeriod].",{timePeriod:n})})})})})}))}getIssuesEndpoint(){const{transaction:e,organization:t,start:n,end:r,statsPeriod:i,location:a}=this.props,s={start:n,end:r,statsPeriod:i,limit:5,sort:"new",...$()(a.query,[...Object.values(Q.nF),"cursor"])},o=new m.MY((0,d.ro)(a.query.query,""));return(0,f.m_)(o),o.addFreeText("is:unresolved").setFilterValues("transaction",[e]),{path:`/organizations/${t.slug}/issues/`,queryParams:{...s,query:o.formatString()}}}render(){const{organization:e}=this.props,{path:t,queryParams:n}=this.getIssuesEndpoint(),i={pathname:`/organizations/${e.slug}/issues/`,query:n};return(0,G.BX)(r.Fragment,{children:[(0,G.BX)(H,{children:[(0,G.tZ)(R.OT,{children:(0,s.t)("Related Issues")}),(0,G.tZ)(X.ZP,{"data-test-id":"issues-open",size:"xsmall",to:i,onClick:this.handleOpenClick,children:(0,s.t)("Open in Issues")})]}),(0,G.tZ)(J,{children:(0,G.tZ)(W.Z,{orgId:e.slug,endpointPath:t,queryParams:n,query:"",canSelectGroups:!1,renderEmptyMessage:this.renderEmptyMessage,withChart:!1,withPagination:!1})})]})}}Y.displayName="RelatedIssues";const H=(0,T.Z)("div",{target:"el0d6on1"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,V.Z)(1),";"),J=(0,T.Z)("div",{target:"el0d6on0"})("margin-bottom:",(0,V.Z)(4),";",K.s_,"{margin-bottom:-",(0,V.Z)(1),";}"),ee=Y;var te=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),ne=n("./app/components/charts/chartZoom.tsx"),re=n("./app/components/charts/errorPanel.tsx"),ie=n("./app/components/charts/eventsRequest.tsx"),ae=n("./app/components/charts/lineChart.tsx"),se=n("./app/components/charts/transitionChart.tsx"),oe=n("./app/components/charts/transparentLoadingMask.tsx"),le=n("./app/components/charts/utils.tsx"),ce=n("./app/components/placeholder.tsx"),pe=n("./app/components/questionTooltip.tsx"),ue=n("./app/icons/index.tsx"),de=n("./app/utils/dates.tsx"),me=n("./app/utils/discover/charts.tsx"),ge=n("./app/utils/formatters.tsx"),he=n("./app/utils/getDynamicText.tsx"),ve=n("./app/utils/metrics/fields.tsx"),xe=n("./app/utils/metrics/metricsRequest.tsx"),fe=n("./app/views/performance/data.tsx"),ye=n("./app/views/performance/landing/widgets/transforms/transformMetricsToArea.tsx");function Ze(e){let{organization:t,isLoading:n,error:r,totals:i,start:a,end:o,utc:l,router:c,statsPeriod:p,chartData:u,isMetricsData:d}=e;return(0,G.BX)(be,{children:[(0,G.BX)(Ee,{top:"0px",children:[(0,G.BX)(Te,{children:[(0,s.t)("Apdex"),(0,G.tZ)(pe.Z,{position:"top",title:(0,fe.$r)(t,fe.V$.APDEX_NEW),size:"sm"})]}),d?"TODO Metrics":(0,G.tZ)(Se,{"data-test-id":"apdex-summary-value",isLoading:n,error:r,value:d?null:i?(0,ge.$1)(i.apdex,4):null})]}),(0,G.BX)(Ee,{top:"160px",children:[(0,G.BX)(Te,{children:[(0,s.t)("Failure Rate"),(0,G.tZ)(pe.Z,{position:"top",title:(0,fe.$r)(t,fe.V$.FAILURE_RATE),size:"sm"})]}),(0,G.tZ)(Se,{"data-test-id":"failure-rate-summary-value",isLoading:n,error:r,value:i?(0,ge.rl)(i.failure_rate):null})]}),(0,G.BX)(Ee,{top:"320px",children:[(0,G.BX)(Te,{children:[(0,s.t)("TPM"),(0,G.tZ)(pe.Z,{position:"top",title:(0,fe.$r)(t,fe.V$.TPM),size:"sm"})]}),(0,G.tZ)(Se,{"data-test-id":"tpm-summary-value",isLoading:n,error:r,value:i?(0,s._N)("[tpm] tpm",{tpm:(0,ge.$1)(i.tpm,4)}):null})]}),(0,G.tZ)(ne.Z,{router:c,period:p,start:a,end:o,utc:l,xAxisIndex:[0,1,2],children:e=>{const{errored:t,loading:n,reloading:r,chartOptions:i,series:a}=u;return t?(0,G.tZ)(re.Z,{height:"580px",children:(0,G.tZ)(ue.FC,{color:"gray300",size:"lg"})}):(0,G.BX)(se.Z,{loading:n,reloading:r,height:"580px",children:[(0,G.tZ)(oe.Z,{visible:r}),(0,he.Z)({value:(0,G.tZ)(ae.Z,{...e,...i,series:a}),fixed:(0,G.tZ)(ce.Z,{height:"480px",testId:"skeleton-ui"})})]})}})]})}function we(e){let{location:t,eventView:n,organization:r,router:i,isLoading:a,error:o,totals:l,isMetricsData:c}=e;const p=(0,g.Z)(),u=(0,te.u)(),d=u.charts.getColorPalette(3),h=n.statsPeriod,v=n.start?(0,de.hC)(n.start):void 0,x=n.end?(0,de.hC)(n.end):void 0,f=n.project,y=n.environment,Z=n.query,w="true"===(0,j.fK)(t.query).utc,S={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},b={height:480,grid:[{top:"60px",left:"10px",right:"10px",height:"100px"},{top:"220px",left:"10px",right:"10px",height:"100px"},{top:"380px",left:"10px",right:"10px",height:"120px"}],axisPointer:{link:[{xAxisIndex:[0,1,2]}]},xAxes:Array.from(new Array(3)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,interval:.2,axisLabel:{formatter:e=>(0,ge.$1)(e,1),color:u.chartLabel},...S},{gridIndex:1,splitNumber:4,interval:.5,max:1,axisLabel:{formatter:e=>(0,ge.rl)(e,0),color:u.chartLabel},...S},{gridIndex:2,splitNumber:4,axisLabel:{formatter:ge.Du,color:u.chartLabel},...S}],utc:w,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[d[0],d[1],d[2]],tooltip:{trigger:"axis",truncate:80,valueFormatter:me.CX,nameFormatter:e=>"epm()"===e?"tpm()":e}},T={api:p,start:v,end:x,statsPeriod:h,project:f,environment:y,query:Z},E={organization:r,router:i,error:o,isLoading:a,start:v,end:x,utc:w,totals:l};if(c){const e=[`count(${ve.kY.SENTRY_TRANSACTIONS_TRANSACTION_DURATION})`];return b.tooltip.nameFormatter=t=>"failure_rate()"===t?e[0]:t,(0,G.tZ)(xe.Z,{...T,query:new m.MY(T.query).formatString(),orgSlug:r.slug,field:e,groupBy:["transaction.status"],children:n=>{const i=(0,ye.g)({location:t,fields:e},n,!0),a=i.data.map((e=>({...e,seriesName:"failure_rate()",yAxisIndex:1,xAxisIndex:1})));return(0,G.tZ)(xe.Z,{api:p,orgSlug:r.slug,start:v,end:x,statsPeriod:h,project:f,environment:y,query:new m.MY(Z).formatString(),field:e,children:r=>{var o,l,c,p;const u=(0,ye.g)({location:t,fields:e},r),d=u.data.map((e=>({...e,yAxisIndex:2,xAxisIndex:2})));return(0,G.tZ)(Ze,{...E,totals:{failure_rate:null!==(o=null===(l=i.dataMean)||void 0===l?void 0:l[0].mean)&&void 0!==o?o:0,tpm:null!==(c=null===(p=u.dataMean)||void 0===p?void 0:p[0].mean)&&void 0!==c?c:0},isLoading:n.loading||r.loading,error:n.errored||r.errored?(0,s.t)("Error fetching metrics data"):null,chartData:{loading:n.loading||r.loading,reloading:n.reloading||r.reloading,errored:n.errored||r.errored,chartOptions:b,series:[...a,...d]},isMetricsData:!0})}})}})}const k={start:v||null,end:x||null,period:h};return(0,G.tZ)(ie.Z,{...T,organization:r,interval:(0,le.ZS)(k),showLoading:!1,includePrevious:!1,yAxis:["apdex()","failure_rate()","epm()"],partial:!0,referrer:"api.performance.transaction-summary.sidebar-chart",children:e=>{let{results:t,errored:n,loading:r,reloading:i}=e;const a=t?t.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t}))):[];return(0,G.tZ)(Ze,{...E,chartData:{series:a,errored:n,loading:r,reloading:i,chartOptions:b}})}})}function Se(e){let{error:t,isLoading:n,value:r,...i}=e;return t?(0,G.tZ)("div",{...i,children:"—"}):n?(0,G.tZ)(ce.Z,{height:"24px",...i}):(0,G.tZ)(ke,{...i,children:r})}Ze.displayName="SidebarCharts",we.displayName="SidebarChartsContainer",Se.displayName="ChartSummaryValue";const be=(0,T.Z)("div",{target:"ecri4wp3"})({name:"bjn8wh",styles:"position:relative"}),Te=(0,T.Z)(R.OT,{target:"ecri4wp2"})({name:"ti75j2",styles:"margin:0"}),Ee=(0,T.Z)("div",{target:"ecri4wp1"})("position:absolute;top:",(e=>e.top),";z-index:1;"),ke=(0,T.Z)("div",{target:"ecri4wp0"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";"),qe=(0,i.withRouter)(we);function Ce(e){let{data:t}=e;const n=t.reduce(((e,t)=>t.value+e),0);return(0,G.tZ)(ze,{children:t.map(((e,t)=>(0,G.BX)(r.Fragment,{children:[(0,G.tZ)(Pe,{children:(0,ge.rl)(e.value/n,0)}),(0,G.BX)(je,{"data-test-id":`status-${e.label}`,cursor:e.onClick?"pointer":"default",onClick:e.onClick,children:[(0,G.tZ)(Ve,{style:{width:`${(e.value/n*100).toFixed(2)}%`}}),(0,G.tZ)(Ie,{children:e.label})]})]},`${t}:${e.label}`)))})}Ce.displayName="BreakdownBars";const _e=Ce,ze=(0,T.Z)("div",{target:"e1yzi37b4"})("display:grid;grid-template-columns:min-content auto;column-gap:",(0,V.Z)(1),";row-gap:",(0,V.Z)(1),";"),Pe=(0,T.Z)("div",{target:"e1yzi37b3"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";text-align:right;"),je=(0,T.Z)("div",{target:"e1yzi37b2"})("padding-left:",(0,V.Z)(1),";padding-right:",(0,V.Z)(1),";position:relative;cursor:",(e=>e.cursor),";"),Ie=(0,T.Z)("span",{target:"e1yzi37b1"})("position:relative;color:",(e=>e.theme.textColor),";z-index:2;font-size:",(e=>e.theme.fontSizeSmall),";"),Ve=(0,T.Z)("div",{target:"e1yzi37b0"})("border-radius:2px;background-color:",(e=>e.theme.border),";position:absolute;top:0;left:0;z-index:1;height:100%;width:0%;");function Le(e){let{eventView:t,location:n,organization:a}=e;const o=t.withColumns([{kind:"function",function:["count","","",void 0]},{kind:"field",field:"transaction.status"}]).withSorts([{kind:"desc",field:"count"}]);return(0,G.BX)(r.Fragment,{children:[(0,G.BX)(R.OT,{children:[(0,s.t)("Status Breakdown"),(0,G.tZ)(pe.Z,{position:"top",title:(0,fe.$r)(a,fe.V$.STATUS_BREAKDOWN),size:"sm"})]}),(0,G.tZ)(l.Z,{eventView:o,location:n,orgSlug:a.slug,referrer:"api.performance.status-breakdown",children:e=>{let{isLoading:r,error:a,tableData:o}=e;if(r)return(0,G.tZ)(ce.Z,{height:"124px"});if(a)return(0,G.tZ)(re.Z,{height:"124px",children:(0,G.tZ)(ue.FC,{color:"gray300",size:"lg"})});if(!o||0===o.data.length)return(0,G.tZ)(Ne,{small:!0,children:(0,s.t)("No statuses found")});const l=o.data.map((e=>({label:String(e["transaction.status"]),value:parseInt(String(e.count),10),onClick:()=>{const r=new m.MY(t.query);r.removeFilter("!transaction.status").setFilterValues("transaction.status",[e["transaction.status"]]),i.browserHistory.push({pathname:n.pathname,query:{...n.query,cursor:void 0,query:r.formatString()}})}})));return(0,G.tZ)(_e,{data:l})}})]})}Le.displayName="StatusBreakdown";const Ne=(0,T.Z)(U.Z,{target:"e1ilkz930"})({name:"wwhhbg",styles:"height:124px;padding:50px 15%"}),Oe=Le;var Fe=n("./app/components/featureBadge.tsx"),De=n("./app/components/pagination.tsx"),Be=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),Ae=n("./app/utils/useProjects.tsx"),Me=n("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),$e=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),Xe=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");function Re(e){var t;const{location:n,organization:i,eventView:a,totals:s,projectId:o,transactionName:l}=e,c=(0,Xe.TK)(n,"spanSort"),p=(0,d.ro)(null===(t=n.query)||void 0===t?void 0:t.spansCursor),u=a.withColumns([...Object.values($e.g),...Object.values($e.p)].map((e=>({kind:"field",field:e})))).withSorts([{kind:"desc",field:c.field}]),m=Xe.uQ[c.field];u.fields=m?m.map((e=>({field:e}))):[];const{projects:g}=(0,Ae.Z)();return(0,G.tZ)(Be.Z,{location:n,orgSlug:i.slug,eventView:u,limit:4,perSuspect:0,cursor:p,children:e=>{let{suspectSpans:t,isLoading:a,pageLinks:c}=e;return(0,G.BX)(r.Fragment,{children:[(0,G.tZ)(Ue,{location:n,organization:i,projectId:o,transactionName:l,pageLinks:c}),(0,G.tZ)(Me.Z,{location:n,organization:i,transactionName:l,project:g.find((e=>e.id===o)),isLoading:a,suspectSpans:null!=t?t:[],totals:s,sort:$e.g.SUM_EXCLUSIVE_TIME})]})}})}function Ue(e){const{location:t,organization:n,projectId:r,transactionName:a,pageLinks:o}=e,l=(0,Xe.hN)({orgSlug:n.slug,transaction:a,projectID:r,query:t.query});return(0,G.BX)(We,{children:[(0,G.BX)("div",{children:[(0,G.tZ)(R.OT,{children:(0,s.t)("Suspect Spans")}),(0,G.tZ)(Fe.Z,{type:"new"})]}),(0,G.tZ)(X.ZP,{to:l,size:"xsmall","data-test-id":"suspect-spans-open-tab",children:(0,s.t)("View All Spans")}),(0,G.tZ)(Ke,{pageLinks:o,onCursor:(e,t,n)=>{i.browserHistory.push({pathname:t,query:{...n,spansCursor:e}})},size:"xsmall"})]})}Re.displayName="SuspectSpans",Ue.displayName="SuspectSpansHeader";const We=(0,T.Z)("div",{target:"e96e1ws1"})("display:grid;grid-template-columns:1fr auto auto;margin-bottom:",(0,V.Z)(1),";align-items:center;"),Ke=(0,T.Z)(De.Z,{target:"e96e1ws0"})("margin:0 0 0 ",(0,V.Z)(1),";");var Qe=n("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),Ge=n("./app/components/links/link.tsx"),Ye=n("./app/components/userMisery.tsx"),He=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),Je=n("./app/views/performance/vitalDetail/vitalInfo.tsx");function et(e){let{isLoading:t,hasWebVitals:n,error:i,totals:a,location:o,organization:l,transactionName:c,eventView:u,isMetricsData:m}=e,g=null!==i?(0,G.tZ)("div",{children:"—"}):(0,G.tZ)(ce.Z,{height:"34px"});if(!t&&null===i&&a){const e=a.project_threshold_config[1],t=a.count_miserable_user,n=a.user_misery,r=a.count_unique_user;g=(0,G.tZ)(Ye.Z,{bars:40,barHeight:30,userMisery:n,miseryLimit:e,totalUsers:r,miserableUsers:t})}const h=l.slug,v=(0,He.Pl)({orgSlug:h,transaction:c,projectID:(0,d.ro)(o.query.project),query:o.query});return(0,G.BX)(r.Fragment,{children:[n&&(0,G.BX)(r.Fragment,{children:[(0,G.BX)(tt,{children:[(0,G.BX)(R.OT,{children:[(0,s.t)("Web Vitals"),(0,G.tZ)(pe.Z,{position:"top",title:(0,s.t)('Web Vitals with p75 better than the "poor" threshold, as defined by Google Web Vitals.'),size:"sm"})]}),(0,G.tZ)(Ge.Z,{to:v,children:(0,G.tZ)(ue.V$,{})})]}),(0,G.tZ)(Je.Z,{location:o,vital:[p.Zl.FCP,p.Zl.LCP,p.Zl.FID,p.Zl.CLS],orgSlug:h,environment:u.environment,start:u.start,end:u.end,statsPeriod:u.statsPeriod,project:u.project,isMetricsData:m,hideVitalPercentNames:!0,hideDurationDetail:!0}),(0,G.tZ)(D.uI,{})]}),(0,G.BX)(R.OT,{children:[(0,s.t)("User Misery"),(0,G.tZ)(pe.Z,{position:"top",title:(0,fe.$r)(l,fe.V$.USER_MISERY_NEW),size:"sm"})]}),g,(0,G.tZ)(D.uI,{})]})}et.displayName="UserStats";const tt=(0,T.Z)("div",{target:"e11vlg4d0"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),nt=et;function rt(e){var t;let{eventView:n,location:a,totalValues:l,spanOperationBreakdownFilter:c,organization:u,projects:g,isLoading:h,error:v,projectId:x,transactionName:Z,onChangeFilter:w,isMetricsData:b}=e;function T(e){const t=(0,j.fK)({...a.query||{},query:e}),n=k()(t,"cursor");i.browserHistory.push({pathname:a.pathname,query:n})}const E=u.features.includes("performance-chart-interpolation"),z=(0,d.ro)(a.query.query,""),V=null===l?null:l.count,A=(0,f.Ik)(n,g)||null!==l&&S.PE.some((e=>e.vitals.some((e=>{const t=(0,p.LY)(`percentile(${e}, ${S.GW})`);return Number.isFinite(l[t])})))),M=(0,f.iL)(n,g),$=[(0,s.t)("event id"),(0,s.t)("user"),(0,s.t)("total duration"),(0,s.t)("trace id"),(0,s.t)("timestamp")];let X=n.clone();if(u.features.includes("performance-ops-breakdown")){const e=(0,y.Is)(c,a);e&&(n=n.clone(),n.query=`${n.query} ${e}`.trim(),X=n.clone());const t=c===y.f1.None?(0,s.t)("operation duration"):`${c} duration`;$.splice(2,0,t);let r=p.zD;c!==y.f1.None&&(r=(0,y.T$)(c));const i=[...X.fields];i.splice(2,0,{field:r}),c===y.f1.None&&i.push(...p.$4.map((e=>({field:e})))),X.fields=i}const R={generatePerformanceTransactionEventsView:()=>{const e=function(e,t){var n;const{selected:r}=it(a,{p95:null!==(n=null==l?void 0:l.p95)&&void 0!==n?n:0,spanOperationBreakdownFilter:c}),i=e.withSorts([r.sort]);if(c===y.f1.None){const e=[...i.fields.slice(0,t.length)];i.fields=e.filter((e=>{let{field:t}=e;return!(0,p.sU)(t)}))}return i}(X,$);return e.query=z,e},handleOpenAllEventsClick:function(){(0,o.ec)({eventKey:"performance_views.summary.view_in_transaction_events",eventName:"Performance Views: View in All Events from Transaction Summary",organization_id:parseInt(u.id,10)})}};return(0,G.BX)(r.Fragment,{children:[(0,G.BX)(P.or,{children:[(0,G.BX)(at,{children:[(0,G.tZ)(y.ZP,{organization:u,currentFilter:c,onChangeFilter:w}),(0,G.tZ)(st,{children:b?(0,G.tZ)(F.Z,{searchSource:"transaction_summary_metrics",orgSlug:u.slug,projectIds:n.project,query:z,onSearch:T,maxQueryLength:I.dI}):(0,G.tZ)(_.Z,{searchSource:"transaction_summary",organization:u,projectIds:n.project,query:z,fields:n.fields,onSearch:T,maxQueryLength:I.dI})})]}),(0,G.tZ)(B.Z,{organization:u,location:a,eventView:n,totalValues:V,currentFilter:c,withoutZerofill:E}),(0,G.tZ)(C.Z,{location:a,organization:u,eventView:X,...R,showTransactions:(0,d.ro)(a.query.showTransactions,D.K0.SLOW),breakdown:(0,y.q0)(a),titles:$,handleDropdownChange:function(e){const t={pathname:a.pathname,query:{...a.query,showTransactions:e,transactionCursor:void 0}};i.browserHistory.push(t)},generateLink:{id:(0,D.vd)(Z),trace:(0,D.Z6)(n.normalizeDateSelection(a))},handleCellAction:function(e){return(t,r)=>{const s=new m.MY(n.query);s.removeFilter("event.type"),s.removeFilter("transaction"),(0,N.rh)(s,t,e,r),i.browserHistory.push({pathname:a.pathname,query:{...a.query,cursor:void 0,query:s.formatString()}})}},...it(a,{p95:null!==(t=null==l?void 0:l.p95)&&void 0!==t?t:0,spanOperationBreakdownFilter:c}),forceLoading:h}),(0,G.tZ)(q.Z,{requireAll:!1,features:["organizations:performance-suspect-spans-view"],children:(0,G.tZ)(Re,{location:a,organization:u,eventView:n,totals:(0,L.ri)(null==l?void 0:l.count)?{count:l.count}:null,projectId:x,transactionName:Z})}),(0,G.tZ)(Qe.D_,{eventView:n,organization:u,location:a,projects:g,transactionName:Z,currentFilter:c}),(0,G.tZ)(ee,{organization:u,location:a,transaction:Z,start:n.start,end:n.end,statsPeriod:n.statsPeriod})]}),(0,G.BX)(P.MF,{children:[(0,G.tZ)(nt,{organization:u,location:a,isLoading:h,hasWebVitals:A,error:v,totals:l,transactionName:Z,eventView:n,isMetricsData:b}),!M&&(0,G.tZ)(Oe,{eventView:n,organization:u,location:a}),(0,G.tZ)(D.uI,{}),(0,G.tZ)(qe,{organization:u,isLoading:h,error:v,totals:l,eventView:n,isMetricsData:b}),(0,G.tZ)(D.uI,{}),(0,G.tZ)(O.Z,{generateUrl:function(e,t){const n=(0,L.ZT)(a.query,{key:(0,p.ZC)(e),value:t});return{...a,query:n}},totalValues:V,eventView:n,organization:u,location:a})]})]})}function it(e,t){const n=function(e){let{p95:t,spanOperationBreakdownFilter:n}=e;if(n===y.f1.None)return[{sort:{kind:"asc",field:"transaction.duration"},value:D.K0.FASTEST,label:(0,s.t)("Fastest Transactions")},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:"transaction.duration"},value:D.K0.SLOW,label:(0,s.t)("Slow Transactions (p95)")},{sort:{kind:"desc",field:"transaction.duration"},value:D.K0.OUTLIER,label:(0,s.t)("Outlier Transactions (p100)")},{sort:{kind:"desc",field:"timestamp"},value:D.K0.RECENT,label:(0,s.t)("Recent Transactions")}];const r=(0,y.T$)(n),i=n;return[{sort:{kind:"asc",field:r},value:D.K0.FASTEST,label:(0,s.t)("Fastest %s Operations",i)},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:r},value:D.K0.SLOW,label:(0,s.t)("Slow %s Operations (p95)",i)},{sort:{kind:"desc",field:r},value:D.K0.OUTLIER,label:(0,s.t)("Outlier %s Operations (p100)",i)},{sort:{kind:"desc",field:"timestamp"},value:D.K0.RECENT,label:(0,s.t)("Recent Transactions")}]}(t),r=(0,d.ro)(e.query.showTransactions,D.K0.SLOW);return{selected:n.find((e=>e.value===r))||n[0],options:n}}rt.displayName="SummaryContent";const at=(0,T.Z)("div",{target:"ent1li2"})("display:flex;width:100%;margin-bottom:",(0,V.Z)(3),";"),st=(0,T.Z)("div",{target:"ent1li1"})({name:"1ff36h2",styles:"flex-grow:1"});(0,T.Z)(z.Z,{target:"ent1li0"})("@media (min-width: ",(e=>e.theme.breakpoints[1]),"){margin-bottom:0;}").defaultProps={Wrapper:e=>(0,G.tZ)(P.or,{fullWidth:!0,...e})};const ot=(0,x.Z)(rt);function lt(e){const t=(0,g.Z)(),{location:n,selection:i,organization:s,projects:o}=e;return(0,r.useEffect)((()=>{(0,a.QK)(t,s.slug,i),(0,f.n4)(i)}),[i]),(0,G.tZ)(Z.Z,{location:n,organization:s,projects:o,tab:w.Z.TransactionSummary,getDocumentTitle:pt,generateEventView:ut,childComponent:ct})}function ct(e){const{location:t,organization:n,eventView:r,projectId:a,transactionName:s,transactionThreshold:c,transactionThresholdMetric:p,isMetricsData:d}=e,m=(0,y.q0)(t),g=function(e,t){const n=S.PE.map((e=>{let{vitals:t}=e;return t})).reduce(((e,t)=>(t.forEach((t=>e.push(t))),e)),[]);return t.withColumns([{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["count_unique","user",void 0,void 0]},{kind:"function",function:["failure_rate","",void 0,void 0]},{kind:"function",function:["tpm","",void 0,void 0]},{kind:"function",function:["count_miserable","user",void 0,void 0]},{kind:"function",function:["user_misery","",void 0,void 0]},{kind:"function",function:["apdex","",void 0,void 0]},...n.map((e=>({kind:"function",function:["percentile",e,S.GW.toString(),void 0]})))])}(0,r),h=e=>{(0,o.ec)({eventName:"Performance Views: Filter Dropdown",eventKey:"performance_views.filter_dropdown.selection",organization_id:parseInt(n.id,10),action:e});const r={...(0,u.V)(t,[b.Oo,b.mo]),...(0,y.bz)(e)};e===y.f1.None&&delete r.breakdown,i.browserHistory.push({pathname:t.pathname,query:r})};return(0,G.tZ)(l.Z,{eventView:g,orgSlug:n.slug,location:t,transactionThreshold:c,transactionThresholdMetric:p,referrer:"api.performance.transaction-summary",children:e=>{var i,o;let{isLoading:l,error:c,tableData:p}=e;const u=null!==(i=null==p||null===(o=p.data)||void 0===o?void 0:o[0])&&void 0!==i?i:null;return(0,G.tZ)(ot,{location:t,organization:n,eventView:r,projectId:a,transactionName:s,isLoading:l,error:c,totalValues:u,onChangeFilter:h,spanOperationBreakdownFilter:m,isMetricsData:d})}})}function pt(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,s.t)("Performance")].join(" - "):[(0,s.t)("Summary"),(0,s.t)("Performance")].join(" - ")}function ut(e){let{location:t,transactionName:n,isMetricsData:r}=e;const i=(0,d.ro)(t.query.query,""),a=new m.MY(i);return r||a.setFilterValues("event.type",["transaction"]),a.setFilterValues("transaction",[n]),Object.keys(a.filters).forEach((e=>{(0,p.h1)(e)&&a.removeFilter(e)})),c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:["id","user.display","transaction.duration","trace","timestamp"],query:a.formatString(),projects:[]},t)}lt.displayName="TransactionOverview",ct.displayName="OverviewContentWrapper";const dt=(0,v.Z)((0,x.Z)((0,h.Z)(lt)))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,n)=>{n.d(t,{Z:()=>m});var r=n("./app/components/gridEditable/index.tsx"),i=n("./app/components/gridEditable/sortLink.tsx"),a=n("./app/components/links/link.tsx"),s=n("./app/locale.tsx"),o=n("./app/utils.tsx"),l=n("./app/utils/discover/fieldRenderers.tsx"),c=n("./app/utils/discover/fields.tsx"),p=n("./app/utils/discover/styles.tsx");var u=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){const{location:t,organization:n,transactionName:i,isLoading:a,suspectSpans:s,totals:l,sort:c,project:p}=e,u=s.map((e=>({operation:e.op,group:e.group,description:e.description,totalCount:e.count,frequency:(0,o.ri)(e.frequency)&&(0,o.ri)(null==l?void 0:l.count)?Math.min(1,e.frequency/l.count):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,d.tZ)(r.ZP,{isLoading:a,data:u,columnOrder:v[c].map((e=>x[e])),columnSortBy:[],grid:{renderHeadCell:g,renderBodyCell:h(t,n,i,p)},location:t})}function g(e,t){const n=(0,c.qG)(e.key,f[e.key]);return(0,d.tZ)(i.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function h(e,t,n,r){return(i,o)=>{const c=(0,l.Js)(i.key,f);if("description"===i.key){var u;const l=function(e){let{orgSlug:t,transaction:n,query:r,spanSlug:i,projectID:a}=e;return{pathname:function(e){let{orgSlug:t,spanSlug:n}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(n.op)}:${n.group}/`}({orgSlug:t,spanSlug:i}),query:{transaction:n,project:a,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}({orgSlug:t.slug,transaction:n,query:e.query,spanSlug:{op:o.operation,group:o.group},projectID:null==r?void 0:r.id});return(0,d.tZ)(p.W2,{children:(0,d.tZ)(a.Z,{to:l,children:null!==(u=o[i.key])&&void 0!==u?u:(0,s.t)("(unnamed span)")})})}return c(o,{location:e,organization:t})}}m.displayName="SuspectSpansTable",g.displayName="renderHeadCell";const v={[u.g.COUNT]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[u.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[u.g.SUM_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[u.p.P50_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p50ExclusiveTime","sumExclusiveTime"],[u.p.P75_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[u.p.P95_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p95ExclusiveTime","sumExclusiveTime"],[u.p.P99_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p99ExclusiveTime","sumExclusiveTime"]},x={operation:{key:"operation",name:(0,s.t)("Span Operation"),width:r.z7},description:{key:"description",name:(0,s.t)("Span Name"),width:r.z7},totalCount:{key:"totalCount",name:(0,s.t)("Total Count"),width:r.z7},frequency:{key:"frequency",name:(0,s.t)("Frequency"),width:r.z7},avgOccurrences:{key:"avgOccurrences",name:(0,s.t)("Average Occurrences"),width:r.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,s.t)("P50 Exclusive Time"),width:r.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,s.t)("P75 Exclusive Time"),width:r.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,s.t)("P95 Exclusive Time"),width:r.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,s.t)("P99 Exclusive Time"),width:r.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,s.t)("Total Exclusive Time"),width:r.z7}},f={operation:"string",description:"string",totalCount:"integer",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"./app/views/performance/transactionSummary/transactionVitals/constants.tsx":(e,t,n)=>{n.d(t,{sE:()=>s,GW:()=>o,PE:()=>p,QB:()=>u}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("./app/utils/discover/fields.tsx"),i=n("./app/utils/performance/vitals/constants.tsx"),a=n("./app/utils/theme.tsx");const s=100,o=.75,l=[{vitals:[r.Zl.FP,r.Zl.FCP,r.Zl.LCP],min:0},{vitals:[r.Zl.FID],min:0,precision:2},{vitals:[r.Zl.CLS],min:0,precision:2}],c=[...a.ZP.charts.getColorPalette(l.reduce(((e,t)=>{let{vitals:n}=t;return e+n.length}),0)-1)].reverse(),p=l.map((e=>({...e,colors:c.splice(0,e.vitals.length)}))),u=l.reduce(((e,t)=>{let{vitals:n}=t;return n.forEach((t=>{const n=i.r9[t].slug;e.push(`${n}Start`),e.push(`${n}End`)})),e}),[])},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,n)=>{n.d(t,{Z:()=>m}),n("../node_modules/react/index.js");var r=n("./app/utils/metrics/metricsRequest.tsx"),i=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),a=n("./app/utils/queryString.tsx"),s=n("./app/utils/tokenizeSearch.tsx"),o=n("./app/utils/useApi.tsx"),l=n("./app/views/performance/landing/vitalsCards.tsx"),c=n("./app/views/performance/landing/widgets/widgets/vitalWidgetMetrics.tsx"),p=n("./app/views/performance/vitalDetail/utils.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{orgSlug:t,start:n,end:d,statsPeriod:m,project:g,environment:h,vital:v,location:x,isLoading:f,hideBar:y,hideStates:Z,hideVitalPercentNames:w,hideDurationDetail:S,p75AllTransactions:b,isMetricsData:T}=e;const E=(0,o.Z)(),k=Array.isArray(v)?v:[v],q={vital:v,showBar:!y,showStates:!Z,showVitalPercentNames:!w,showDurationDetail:!S};if(T){const e=(0,a.ro)(x.query.query,""),i=k.map((e=>`count(${p.T4[e]})`));return(0,u.tZ)(r.Z,{api:E,orgSlug:t,start:n,end:d,statsPeriod:m,project:g,environment:h,field:i,query:new s.MY(e).formatString(),groupBy:["measurement_rating"],children:e=>{let{loading:t,response:n}=e;const r=k.reduce(((e,t,r)=>(e[t]=(0,c.b)({field:i[r],response:n}),e)),{});return Array.isArray(v)||(r[v].p75=null!=b?b:0),(0,u.tZ)(l.JO,{...q,isLoading:f||t,data:r})}})}return(0,u.tZ)(i.Z,{location:x,vitals:k,children:e=>{let{isLoading:t,vitalsData:n}=e;return(0,u.tZ)(l.JO,{...q,isLoading:f||t,data:n})}})}d.displayName="VitalInfo";const m=d}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionOverview_index_tsx.ac65f648df7371fc0517509b2fdcda2e.js.map