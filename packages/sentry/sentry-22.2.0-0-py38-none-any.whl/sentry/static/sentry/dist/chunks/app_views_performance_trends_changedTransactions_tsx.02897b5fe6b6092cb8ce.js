"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_trends_changedTransactions_tsx"],{"./app/utils/discover/charts.tsx":(e,t,n)=>{n.d(t,{CX:()=>i,gu:()=>l});var r=n("./app/locale.tsx"),a=n("./app/utils.tsx"),s=n("./app/utils/discover/fields.tsx"),o=n("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(0,a.ri)(e))return"—";switch((0,s.Px)(t)){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,o.rl)(e,2);case"duration":return(0,o.g9)(e/1e3,2,!0);default:return e.toString()}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch((0,s.Px)(t)){case"integer":case"number":return n?(0,o.Du)(e):e.toLocaleString();case"percentage":return(0,o.rl)(e,0);case"duration":return c(e);default:return e.toString()}}function c(e){if(0===e)return"0";if(e>=o.ps){const t=(e/o.ps).toFixed(0);return(0,r.t)("%swk",t)}if(e>=o.x4){const t=(e/o.x4).toFixed(0);return(0,r.t)("%sd",t)}if(e>=o.kr){const t=(e/o.kr).toFixed(0);return(0,r.t)("%shr",t)}if(e>=o.EB){const t=(e/o.EB).toFixed(0);return(0,r.t)("%smin",t)}if(e>=o.sh){const t=(e/o.sh).toFixed(0);return(0,r.t)("%ss",t)}const t=e.toFixed(0);return(0,r.t)("%sms",t)}},"./app/views/performance/trends/changedTransactions.tsx":(e,t,n)=>{n.d(t,{H:()=>H,Z:()=>de});var r,a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react/index.js"),o=n("../node_modules/react-router/es/index.js"),i=n("./app/components/button.tsx"),l=n("./app/components/charts/styles.tsx"),c=n("./app/components/count.tsx"),d=n("./app/components/dropdownLink.tsx"),p=n("./app/components/duration.tsx"),u=n("./app/components/emptyStateWarning.tsx"),m=n("./app/components/forms/controls/radioGroup.tsx"),g=n("./app/components/idBadge/index.tsx"),h=n("./app/components/links/link.tsx"),x=n("./app/components/loadingIndicator.tsx"),Z=n("./app/components/menuItem.tsx"),f=n("./app/components/pagination.tsx"),v=n("./app/components/panels/index.tsx"),w=n("./app/components/questionTooltip.tsx"),y=n("./app/components/radio.tsx"),b=n("./app/components/tooltip.tsx"),_=n("./app/icons/index.tsx"),S=n("./app/locale.tsx"),E=n("./app/styles/overflowEllipsis.tsx"),j=n("./app/styles/space.tsx"),C=n("./app/utils/formatters.tsx"),T=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),k=n("./app/utils/queryString.tsx"),L=n("./app/utils/tokenizeSearch.tsx"),R=n("./app/utils/useApi.tsx"),q=n("./app/utils/withOrganization.tsx"),N=n("./app/utils/withProjects.tsx"),z=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),B=n("./app/views/performance/transactionSummary/utils.tsx"),F=n("./app/views/performance/trends/chart.tsx"),P=n("./app/views/performance/trends/types.tsx"),A=n("./app/views/performance/trends/utils.tsx"),D=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function M(e,t,n){const r=(0,A.j_)(t),a=(0,k.ro)(e.query[r]);if(!n)return;return n.find((e=>`${e.transaction}-${e.project}`===a))||(n.length>0?n[0]:void 0)}function I(e,t){return function(n){const r=(0,A.j_)(t),a={...e.query};n?a[r]=n?`${n.transaction}-${n.project}`:void 0:delete a[r],o.browserHistory.push({pathname:e.pathname,query:a})}}function V(e,t,n,a,s){const i=(0,A.IO)(e,a,s).column,l=(0,k.ro)(e.query.query),c=new L.MY(null!=l?l:""),d=c.getFilterValues(i),p=n===r.GREATER_THAN_EQUALS?">":"<";d&&d.forEach((e=>{(e.startsWith(n)||e.startsWith(p))&&c.removeFilterValue(i,e)})),c.addFilterValues(i,[`${n}${t}`]);const u=c.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(u).trim()}})}function X(e){const{location:t,trendChangeType:n,previousTrendFunction:r,previousTrendColumn:a,organization:i,projects:l,setError:c}=e,d=(0,R.Z)(),p=e.trendView.clone(),u=function(e){switch(e){case P.ER.IMPROVED:return(0,S.t)("Most Improved Transactions");case P.ER.REGRESSION:return(0,S.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}(n);(0,A.kM)(p,t,n,l);const m=(e=>(t,n,r)=>{const a={};e===P.ER.IMPROVED?a.improvedCursor=t:e===P.ER.REGRESSION&&(a.regressionCursor=t),delete r[(0,A.j_)(e)],o.browserHistory.push({pathname:n,query:{...r,...a}})})(n),g=(0,k.ro)(t.query[A.vt[n]]);return(0,D.tZ)(T.ZP,{eventView:p,orgSlug:i.slug,location:t,trendChangeType:n,cursor:g,limit:5,setError:c,children:o=>{let{isLoading:c,trendsData:g,pageLinks:h}=o;const Z=(0,A.CE)(t),v=(0,A.IO)(t,l,p.project),y=(0,A.RP)(g&&g.events&&g.events.data||[]),b=M(t,n,y),_=(null==g?void 0:g.stats)||{},E=y&&y.slice?y.slice(0,5):[],j=c&&r?r:Z.field,C=c&&a?a:v.column,T=(0,S.t)("This compares the baseline (%s) of the past with the present.",Z.legendLabel);return(0,D.BX)(Q,{children:[(0,D.BX)(U,{children:[(0,D.BX)(Y,{children:[u,(0,D.tZ)(w.Z,{size:"sm",position:"top",title:T})]}),c?(0,D.tZ)(x.Z,{style:{margin:"237px auto"}}):(0,D.tZ)(s.Fragment,{children:E.length?(0,D.BX)(s.Fragment,{children:[(0,D.tZ)(W,{children:(0,D.tZ)(F.Z,{statsData:_,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:b,isLoading:c,...e})}),E.map(((r,a)=>(0,D.tZ)(O,{api:d,currentTrendFunction:j,currentTrendColumn:C,trendView:e.trendView,organization:i,transaction:r,index:a,trendChangeType:n,transactions:E,location:t,projects:l,statsData:_,handleSelectTransaction:I(t,n)},r.transaction)))]}):(0,D.tZ)(ee,{small:!0,children:(0,S.t)("No results")})})]}),(0,D.tZ)(f.Z,{pageLinks:h,onCursor:m})]})}})}function O(e){const{transaction:t,transactions:n,trendChangeType:a,currentTrendFunction:i,currentTrendColumn:l,index:p,location:u,projects:h,handleSelectTransaction:x,trendView:f}=e,v=A.es[a].default,w=M(u,a,n)===t,E=h.find((e=>{let{slug:n}=e;return n===t.project})),j=t.aggregate_range_2,T=t.aggregate_range_1,R=(0,C.rl)(Math.abs(t.trend_percentage-1),0),q=(0,C.g9)(T/1e3,T<1e3&&T>10?0:2),N=(0,C.g9)(j/1e3,j<1e3&&j>10?0:2),z=(0,S.t)("Over this period, the %s for %s has %s %s from %s to %s",i,l,a===P.ER.IMPROVED?(0,S.t)("decreased"):(0,S.t)("increased"),R,q,N),B=a===P.ER.IMPROVED?T:j,F=a===P.ER.IMPROVED?q:N;return(0,D.BX)(te,{"data-test-id":"trends-list-item-"+a,children:[(0,D.tZ)(ne,{color:v,children:(0,D.tZ)(b.Z,{title:(0,D.BX)(le,{children:[(0,D.tZ)("span",{children:(0,S.t)("Total Events")}),(0,D.BX)("span",{children:[(0,D.tZ)(c.Z,{value:t.count_range_1}),(0,D.tZ)(ce,{direction:"right",size:"xs"}),(0,D.tZ)(c.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,D.tZ)(m.V,{index:p,role:"radio",children:(0,D.tZ)(y.Z,{checked:w,onChange:()=>x(t)})})})}),(0,D.tZ)($,{...e}),(0,D.tZ)(oe,{children:(0,D.tZ)(b.Z,{title:z,children:(0,D.BX)(s.Fragment,{children:[a===P.ER.REGRESSION?"+":"",(0,C.rl)(t.trend_percentage-1,0)]})})}),(0,D.BX)(d.Z,{caret:!1,anchorRight:!0,title:(0,D.tZ)(K,{size:"xsmall",icon:(0,D.tZ)(_.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,S.t)("Actions")}),children:[(0,D.tZ)(Z.Z,{onClick:()=>V(u,B,r.LESS_THAN_EQUALS,h,f.project),children:(0,D.tZ)(J,{children:(0,S.t)("Show ≤ %s",F)})}),(0,D.tZ)(Z.Z,{onClick:()=>V(u,B,r.GREATER_THAN_EQUALS,h,f.project),children:(0,D.tZ)(J,{children:(0,S.t)("Show ≥ %s",F)})}),(0,D.tZ)(Z.Z,{onClick:()=>function(e,t){const n=(0,k.ro)(e.query.query),r=new L.MY(null!=n?n:"");r.addFilterValues("!transaction",[t]);const a=r.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(a).trim()}})}(u,t.transaction),children:(0,D.tZ)(J,{children:(0,S.t)("Hide from list")})})]}),(0,D.BX)(ae,{children:[E&&(0,D.tZ)(b.Z,{title:t.project,children:(0,D.tZ)(g.Z,{avatarSize:16,project:E,hideName:!0})}),(0,D.tZ)(H,{...e})]}),(0,D.tZ)(ie,{color:v,children:(0,D.tZ)(G,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(r||(r={})),X.displayName="ChangedTransactions",O.displayName="TrendsListItem";const H=e=>{let{transaction:t}=e;const{fromSeconds:n,toSeconds:r,showDigits:a}=(0,A.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,D.BX)(se,{children:[(0,D.tZ)(p.Z,{seconds:n,fixedDigits:a?1:0,abbreviation:!0}),(0,D.tZ)(ce,{direction:"right",size:"xs"}),(0,D.tZ)(p.Z,{seconds:r,fixedDigits:a?1:0,abbreviation:!0})]})};H.displayName="CompareDurations";const G=e=>{let{transaction:t,trendChangeType:n}=e;const{seconds:r,fixedDigits:a,changeLabel:s}=(0,A.wx)(t.trend_difference,n);return(0,D.BX)("span",{children:[(0,D.tZ)(p.Z,{seconds:r,fixedDigits:a,abbreviation:!0})," ",s]})};G.displayName="ValueDelta";const $=e=>{const{organization:t,trendView:n,transaction:r,projects:a,currentTrendFunction:s,currentTrendColumn:o}=e,i=n.clone(),l=(0,A._H)(r,a),c=(0,B.e1)({orgSlug:t.slug,transaction:String(r.transaction),query:i.generateQueryStringObject(),projectID:l,display:z.D.TREND,trendFunction:s,trendColumn:o});return(0,D.tZ)(re,{to:c,children:r.transaction})};$.displayName="TransactionSummaryLink";const Q=(0,a.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),U=(0,a.Z)(v.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),W=(0,a.Z)("div",{target:"e11bn3w113"})("padding:",(0,j.Z)(3),";"),Y=(0,a.Z)(l.ws,{target:"e11bn3w112"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,j.Z)(2)," ",(0,j.Z)(3),";"),K=(0,a.Z)(i.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),J=(0,a.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(e=>e.theme.textColor),";"),ee=(0,a.Z)(u.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),te=(0,a.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,j.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,j.Z)(1)," ",(0,j.Z)(2),";"),ne=(0,a.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),re=(0,a.Z)(h.Z,{target:"e11bn3w16"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,j.Z)(1),";",E.Z,";"),ae=(0,a.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),se=(0,a.Z)("span",{target:"e11bn3w14"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,j.Z)(1),";"),oe=(0,a.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),ie=(0,a.Z)("div",{target:"e11bn3w12"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),le=(0,a.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),ce=(0,a.Z)(_.CC,{target:"e11bn3w10"})("margin:0 ",(0,j.Z)(1),";"),de=(0,N.Z)((0,q.Z)(X))},"./app/views/performance/trends/chart.tsx":(e,t,n)=>{n.d(t,{k:()=>f,Z:()=>v}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),s=n("./app/components/charts/chartZoom.tsx"),o=n("./app/components/charts/lineChart.tsx"),i=n("./app/components/charts/transitionChart.tsx"),l=n("./app/components/charts/transparentLoadingMask.tsx"),c=n("./app/components/organizations/pageFilters/parse.tsx"),d=n("./app/locale.tsx"),p=n("./app/utils/dates.tsx"),u=n("./app/utils/discover/charts.tsx"),m=n("./app/utils/getDynamicText.tsx"),g=n("./app/utils/queryString.tsx"),h=n("./app/views/performance/trends/utils.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function f(e){var t;let{trendChangeType:n,router:f,statsPeriod:v,transaction:w,statsData:y,isLoading:b,location:_,start:S,end:E,trendFunctionField:j,disableXAxis:C,disableLegend:T,grid:k,height:L,projects:R,project:q}=e;const N=(0,a.u)(),z=e=>{const{selected:t}=e,a=Object.keys(t).filter((e=>!t[e])),s={..._.query};s[(0,h.P4)(n)]=a;const o={..._,query:s};r.browserHistory.push(o)},B=h.es[n||""],F=y&&null!=w&&w.project&&null!=w&&w.transaction?y[[w.project,w.transaction].join(",")]:void 0,P=null!==(t=null==F?void 0:F.data)&&void 0!==t?t:[],A=(0,h.CE)(_,j),D=(0,h.IO)(_,R,q),M=(0,h.ed)(A.field,D.column),I=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,n]=e;return{name:1e3*t,value:n.reduce(((e,t)=>{let{count:n}=t;return e+n}),0)}}))}]}(P,M),{smoothedResults:V,minValue:X,maxValue:O}=(0,h.vq)(I,M),H=S?(0,p.hC)(S):null,G=E?(0,p.hC)(E):null,{utc:$}=(0,c.fK)(_.query),Q=(0,g.qP)(_.query[(0,h.P4)(n)]).reduce(((e,t)=>(e[t]=!1,e)),{}),U=T?{show:!1}:{...Z(M),selected:Q},W=b,Y=b,K=Math.max(O,(null==w?void 0:w.aggregate_range_2)||0,(null==w?void 0:w.aggregate_range_1)||0),J=Math.min(X,(null==w?void 0:w.aggregate_range_1)||Number.MAX_SAFE_INTEGER,(null==w?void 0:w.aggregate_range_2)||Number.MAX_SAFE_INTEGER),ee=.1*(K-J),te={tooltip:{valueFormatter:(e,t)=>(0,u.CX)(e,t)},yAxis:{min:Math.max(0,J-ee),max:K+ee,axisLabel:{color:N.chartLabel,formatter:e=>(0,u.gu)(e,"p50()")}}};return(0,x.tZ)(s.Z,{router:f,period:v,start:H,end:G,utc:"true"===$,children:e=>{const t=V?V.map((e=>({...e,color:B.default,lineStyle:{opacity:1}}))):[],n=function(e,t,n,r){if(!(r&&t.length&&t[0].data&&t[0].data.length))return[];const a=parseInt(t[0].data[0].name,0),s=parseInt(t[0].data.slice(-1)[0].name,0);if(s<a)return[];const o={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{color:e.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:e.textColor,silent:!0},l={...o,markLine:{...o.markLine},seriesName:"Baseline"},c={...o,markLine:{...o.markLine},seriesName:"Baseline"},p={...o,markLine:{...o.markLine},seriesName:"Period split"},m=.5*(s-a)+a;return l.markLine.data=[[{value:"Past",coord:[a,r.aggregate_range_1]},{coord:[m,r.aggregate_range_1]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Past Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_1,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},c.markLine.data=[[{value:"Present",coord:[m,r.aggregate_range_2]},{coord:[s,r.aggregate_range_2]}]],c.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Present Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_2,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:m}],label:{show:!1},lineStyle:{color:e.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},l.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},c.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[l,c,p]}(N,V||[],0,w);return(0,x.BX)(i.Z,{loading:W,reloading:Y,children:[(0,x.tZ)(l.Z,{visible:Y}),(0,m.Z)({value:(0,x.tZ)(o.Z,{height:L,...e,...te,onLegendSelectChanged:z,series:[...t,...n],seriesOptions:{showSymbol:!1},legend:U,toolBox:{show:!1},grid:null!=k?k:{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:C?{show:!1}:void 0}),fixed:"Duration Chart"})]})}})}f.displayName="Chart";const v=(0,r.withRouter)(f)}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_changedTransactions_tsx.e86620237bb260e4869ea284ac51b5fe.js.map