(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actionCreators_pageFilters_tsx-app_actions_memberActions_tsx-app_components_charts_styles-01026e","app_components_charts_styles_tsx"],{"./app/actionCreators/pageFilters.tsx":(e,t,s)=>{"use strict";if(s.d(t,{Z5:()=>f,LX:()=>x,id:()=>Z,S:()=>_,dR:()=>j,dk:()=>A}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),"app"==s.j)var i=s("../node_modules/@sentry/minimal/esm/index.js");var a=s("../node_modules/lodash/isInteger.js"),n=s.n(a),o=s("../node_modules/lodash/omit.js"),r=s.n(o),d=s("../node_modules/lodash/pick.js"),l=s.n(d),c=s("../node_modules/query-string/index.js"),h=s("./app/actions/pageFiltersActions.tsx"),u=s("./app/components/organizations/pageFilters/parse.tsx"),p=s("./app/components/organizations/pageFilters/persistence.tsx"),g=s("./app/components/organizations/pageFilters/utils.tsx"),m=s("./app/constants/pageFilters.tsx"),b=s("./app/stores/organizationStore.tsx"),y=s("./app/utils.tsx"),w=s("./app/utils/dates.tsx");function f(){h.Z.reset()}function v(e){return parseInt(e.id,10)}function S(e,t){var s,i,a,n,o,r,d,l;return{start:null!==(s=null!==(i=e.start)&&void 0!==i?i:null==t?void 0:t.start)&&void 0!==s?s:null,end:null!==(a=null!==(n=e.end)&&void 0!==n?n:null==t?void 0:t.end)&&void 0!==a?a:null,period:null!==(o=null!==(r=e.period)&&void 0!==r?r:null==t?void 0:t.period)&&void 0!==o?o:null,utc:null!==(d=null!==(l=e.utc)&&void 0!==l?l:null==t?void 0:t.utc)&&void 0!==d?d:null}}function x(e){var t,s,i;let{organization:a,queryParams:n,pathname:o,router:r,memberProjects:d,skipLoadLastUsed:c,shouldForceProject:b,shouldEnforceSingleProject:y,defaultSelection:w,forceProject:f,showAbsolute:x=!0}=e;const Z=a.slug,_=(0,u.fI)(n,{allowAbsoluteDatetime:x,allowEmptyPeriod:!0}),{datetime:j,...A}=(0,g.Zs)(),{datetime:z,...W}=null!=w?w:{},I={...A,...W,datetime:S(_,z)};null!==(s=(t=I.datetime).period)&&void 0!==s||(t.period=j.period),I.datetime.start&&I.datetime.end&&(I.datetime.period=null);const D=Object.keys(l()(n,m.Nw)).length>0,k=Object.keys(l()(n,[m.nF.PROJECT,m.nF.ENVIRONMENT])).length>0;k&&(I.projects=_.project||[],I.environments=_.environment||[]);const C=c?null:(0,p.EU)(Z);if(C){const{state:e,pinnedFilters:t}=C,s=(0,g.UF)(a).includes(o)?t:new Set(["projects","environments"]);var O,T;if(!k&&s.has("projects")&&(I.projects=null!==(O=e.project)&&void 0!==O?O:[]),!k&&s.has("environments")&&(I.environments=null!==(T=e.environment)&&void 0!==T?T:[]),!D&&s.has("datetime")){const t=(0,u.Sg)(e);I.datetime=S(I.datetime,t)}}const{projects:L,environments:B,datetime:U}=I;let M=null,P=L;b&&f?M=[v(f)]:y&&!b&&(M=L&&L.length>0?"string"==typeof L?[Number(L)]:[L[0]]:[...d].slice(0,1).map(v)),M&&(I.projects=M,P=M);const R=null!==(i=null==C?void 0:C.pinnedFilters)&&void 0!==i?i:new Set;h.Z.initializeUrlState(I,R),E({project:P,environment:B,...{...U,period:_.start||_.end||_.period?U.period:null,utc:_.utc?U.utc:null}},r,{replace:!0,keepCursor:!0})}function Z(e,t,s){!function(e){return Array.isArray(e)&&e.every(n())}(e)?i.$e((t=>{t.setExtra("projects",e),i.Tb(new Error("Invalid projects selected"))})):(h.Z.updateProjects(e,null==s?void 0:s.environments),E({project:e,environment:null==s?void 0:s.environments},t,s),z(s))}function _(e,t,s){h.Z.updateEnvironments(e),E({environment:e},t,s),z(s)}function j(e,t,s){h.Z.updateDateTime(e),E(e,t,s),z(s)}function A(e,t){h.Z.pin(e,t),z({save:!0})}function E(e,t,s){if(!t)return;const i=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{resetParams:i,keepCursor:a}=s,n=null!=i&&i.length?r()(t,i):t,o=(0,u.fI)(n,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0}),d=a?null:"cursor",l=[...Object.values(m.nF),d].filter(y.ri),c=r()(n,l),{project:h,environment:p,start:g,end:b,utc:f}={...o,...e},v=g||b?null:e.period||o.period,S={project:null==h?void 0:h.map(String),environment:p,start:v?null:g instanceof Date?(0,w.v5)(g):g,end:v?null:b instanceof Date?(0,w.v5)(b):b,utc:f?"true":null,statsPeriod:v,...c},x=Object.entries(S).filter((e=>{let[t,s]=e;return(0,y.ri)(s)}));return Object.fromEntries(x)}(e,t.location.query,s);c.stringify(i)!==c.stringify(t.location.query)&&(null!=s&&s.replace?t.replace:t.push)({pathname:t.location.pathname,query:i})}async function z(e){var t;if(null==e||!e.save)return;await new Promise((e=>setTimeout(e,0)));const{organization:s}=b.Z.getState(),i=null!==(t=null==s?void 0:s.slug)&&void 0!==t?t:null;null!==i&&(0,p.eq)(i)}},"./app/actions/memberActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var i=s("../node_modules/reflux/src/index.js");const a=s.n(i)().createActions(["createSuccess","update","updateError","updateSuccess","resendMemberInvite","resendMemberInviteSuccess","resendMemberInviteError"]),n="app"==s.j?a:null},"./app/components/charts/styles.tsx":(e,t,s)=>{"use strict";s.d(t,{OT:()=>n,uN:()=>o,m2:()=>r,xx:()=>d,Gh:()=>l,ws:()=>c,r3:()=>h,BO:()=>u});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/styles/space.tsx");const n=(0,i.Z)("h4",{target:"ey7s1vy7"})("display:inline-grid;grid-auto-flow:column;gap:",(0,a.Z)(1),";align-items:center;color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,a.Z)(1)," 0;"),o=(0,i.Z)("span",{target:"ey7s1vy6"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,a.Z)(1),";"),r=(0,i.Z)("div",{target:"ey7s1vy5"})("display:grid;align-items:center;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-auto-flow:column;grid-column-gap:",(0,a.Z)(1),";}"),d=(0,i.Z)("div",{target:"ey7s1vy4"})("padding:",(0,a.Z)(1)," ",(0,a.Z)(3),";border-top:1px solid ",(e=>e.theme.border),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:flex;justify-content:space-between;flex-wrap:wrap;}"),l=(0,i.Z)("div",{target:"ey7s1vy3"})("display:inline-grid;grid-auto-flow:column;gap:",(0,a.Z)(1),";",(e=>e.theme.text.cardTitle),";color:",(e=>e.theme.headingColor),";align-items:center;"),c="app"==s.j?(0,i.Z)(l,{target:"ey7s1vy2"})("background-color:",(e=>e.theme.background),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";position:absolute;z-index:1;"):null,h=(0,i.Z)("div",{target:"ey7s1vy1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,a.Z)(1),";align-items:baseline;background-color:",(e=>e.theme.background),";position:absolute;top:40px;z-index:1;font-size:",(e=>e.theme.headerFontSize),";"),u=(0,i.Z)("div",{target:"ey7s1vy0"})("padding:",(0,a.Z)(2)," ",(0,a.Z)(3),";")},"./app/components/modals/dashboardWidgetLibraryModal/tabsButtonBar.tsx":(e,t,s)=>{"use strict";s.d(t,{M:()=>b,$:()=>y});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/react/index.js"),s("./app/actionCreators/modal.tsx")),n=s("./app/components/featureBadge.tsx"),o=s("./app/locale.tsx"),r=s("./app/styles/space.tsx"),d=s("./app/utils.tsx"),l=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=s("./app/views/dashboardsV2/types.tsx"),h=s("./app/components/button.tsx"),u=s("./app/components/buttonBar.tsx");const p="dashboard-widget-library-visits";function g(){const e=localStorage.getItem(p);return null===e||(parseInt(e,10)||0)<5}var m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let b;function y(e){let{activeTab:t,organization:s,dashboard:i,selectedWidgets:r,customWidget:h,onAddWidget:u}=e;return(0,m.BX)(w,{active:t,children:[(0,m.tZ)(v,{barId:b.Custom,onClick:()=>{t!==b.Custom&&((0,l.Z)("dashboards_views.widget_library.switch_tab",{organization:s,to:b.Custom}),(0,a.openAddDashboardWidgetModal)({organization:s,dashboard:i,selectedWidgets:r,widget:h,source:c.EN.LIBRARY,onAddLibraryWidget:u}))},children:(0,o.t)("Custom Widget")}),(0,m.BX)(f,{barId:b.Library,"data-test-id":"library-tab",onClick:()=>{t!==b.Library&&((0,l.Z)("dashboards_views.widget_library.switch_tab",{organization:s,to:b.Library}),function(){const e=localStorage.getItem(p);localStorage.setItem(p,null===e?"1":`${(parseInt(e,10)||0)+1}`)}(),(0,d.ri)(u)&&(0,a.openDashboardWidgetLibraryModal)({organization:s,dashboard:i,customWidget:h,initialSelectedWidgets:r,onAddWidget:u}))},children:[(0,o.t)("Widget Library"),g()&&(0,m.tZ)(n.Z,{type:"new"})]})]})}!function(e){e.Library="library",e.Custom="custom"}(b||(b={})),y.displayName="TabsButtonBar";const w=(0,i.Z)(u.ZP,{target:"ea8om9w2"})("display:inline-flex;margin-bottom:",(0,r.Z)(2),";"),f=(0,i.Z)(h.ZP,{target:"ea8om9w1"})({name:"ygoyvl",styles:"border-top-left-radius:0;border-bottom-left-radius:0"}),v=(0,i.Z)(h.ZP,{target:"ea8om9w0"})({name:"1ga8o78",styles:"border-top-right-radius:0;border-bottom-right-radius:0;line-height:17px"})},"./app/stores/groupStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>b});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/lodash/isArray.js")),n=s.n(a),o=s("../node_modules/lodash/isUndefined.js"),r=s.n(o),d=s("../node_modules/reflux/src/index.js"),l=s.n(d),c=s("./app/actions/groupActions.tsx"),h=s("./app/locale.tsx"),u=s("./app/stores/indicatorStore.tsx");function p(e,t){u.Z.addMessage(e,t,{duration:4e3})}class g{constructor(){(0,i.Z)(this,"changes",[])}getForItem(e){return this.changes.filter((t=>t[1]===e))}push(e,t,s){this.changes.push([e,t,s])}remove(e,t){this.changes=this.changes.filter((s=>s[0]!==e||s[1]!==t))}forEach(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.changes.forEach.apply(this.changes,t)}}const m={listenables:[c.Z],pendingChanges:new g,items:[],statuses:{},init(){this.reset()},reset(){this.pendingChanges=new g,this.items=[],this.statuses={}},loadInitialData(e){this.reset();const t=new Set;e.forEach((e=>{t.add(e.id),this.items.push(e)})),this.trigger(t)},add(e){n()(e)||(e=[e]);const t={},s=new Set;e.forEach((e=>{t[e.id]=e,s.add(e.id)})),this.items.forEach(((e,s)=>{t[e.id]&&(this.items[s]={...e,...t[e.id]},delete t[e.id])}));for(const e in t)this.items.push(t[e]);this.trigger(s)},remove(e){this.items=this.items.filter((t=>!e.includes(t.id))),this.trigger(new Set(e))},addStatus(e,t){r()(this.statuses[e])&&(this.statuses[e]={}),this.statuses[e][t]=!0},clearStatus(e,t){r()(this.statuses[e])||(this.statuses[e][t]=!1)},hasStatus(e,t){return!r()(this.statuses[e])&&(this.statuses[e][t]||!1)},indexOfActivity(e,t){const s=this.get(e);if(!s)return-1;for(let e=0;e<s.activity.length;e++)if(s.activity[e].id===t)return e;return-1},addActivity(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const i=this.get(e);i&&(-1===s?i.activity.unshift(t):i.activity.splice(s,0,t),"note"===t.type&&i.numComments++,this.trigger(new Set([e])))},updateActivity(e,t,s){const i=this.get(e);if(!i)return;const a=this.indexOfActivity(e,t);-1!==a&&(i.activity[a].data=Object.assign(i.activity[a].data,s),this.trigger(new Set([i.id])))},removeActivity(e,t){const s=this.get(e);if(!s)return-1;const i=this.indexOfActivity(s.id,t);return-1===i?-1:("note"===s.activity.splice(i,1)[0].type&&s.numComments--,this.trigger(new Set([s.id])),i)},get(e){const t=[];this.pendingChanges.forEach((s=>{s.id===e&&t.push(s)}));for(let s=0;s<this.items.length;s++)if(this.items[s].id===e){let e=this.items[s];if(t.length){e={...e};for(let s=0;s<t.length;s++)e={...e,...t[s].params}}return e}},getAllItemIds(){return this.items.map((e=>e.id))},getAllItems(){const e={};return this.pendingChanges.forEach((t=>{r()(e[t.id])&&(e[t.id]=[]),e[t.id].push(t)})),this.items.map((t=>{let s=t;return r()(e[t.id])||(s={...s},e[t.id].forEach((e=>{s={...s,...e.params}}))),s}))},onAssignTo(e,t,s){this.addStatus(t,"assignTo"),this.trigger(new Set([t]))},onAssignToError(e,t,s){this.clearStatus(t,"assignTo"),p((0,h.t)("Unable to change assignee. Please try again."),"error")},onAssignToSuccess(e,t,s){const i=this.get(t);i&&(i.assignedTo=s.assignedTo,this.clearStatus(t,"assignTo"),this.trigger(new Set([t])))},onDelete(e,t){(t=this._itemIdsOrAll(t)).forEach((e=>{this.addStatus(e,"delete")})),this.trigger(new Set(t))},onDeleteError(e,t,s){p((0,h.t)("Unable to delete events. Please try again."),"error"),t&&(t.forEach((e=>{this.clearStatus(e,"delete")})),this.trigger(new Set(t)))},onDeleteSuccess(e,t,s){t=this._itemIdsOrAll(t);const i=new Set(t);t.forEach((e=>{delete this.statuses[e],this.clearStatus(e,"delete")})),this.items=this.items.filter((e=>!i.has(e.id))),p((0,h.t)("The selected events have been scheduled for deletion."),"success"),this.trigger(new Set(t))},onDiscard(e,t){this.addStatus(t,"discard"),this.trigger(new Set([t]))},onDiscardError(e,t,s){this.clearStatus(t,"discard"),p((0,h.t)("Unable to discard event. Please try again."),"error"),this.trigger(new Set([t]))},onDiscardSuccess(e,t,s){delete this.statuses[t],this.clearStatus(t,"discard"),this.items=this.items.filter((e=>e.id!==t)),p((0,h.t)("Similar events will be filtered and discarded."),"success"),this.trigger(new Set([t]))},onMerge(e,t){(t=this._itemIdsOrAll(t)).forEach((e=>{this.addStatus(e,"merge")})),this.trigger(new Set(t))},onMergeError(e,t,s){(t=this._itemIdsOrAll(t)).forEach((e=>{this.clearStatus(e,"merge")})),p((0,h.t)("Unable to merge events. Please try again."),"error"),this.trigger(new Set(t))},onMergeSuccess(e,t,s){(t=this._itemIdsOrAll(t)).forEach((e=>{this.clearStatus(e,"merge")}));const i=new Set(t);this.items=this.items.filter((e=>!i.has(e.id)||s&&s.merge&&e.id===s.merge.parent)),p((0,h.t)("The selected events have been scheduled for merge."),"success"),this.trigger(new Set(t))},_itemIdsOrAll(e){return r()(e)&&(e=this.items.map((e=>e.id))),e},onUpdate(e,t,s){(t=this._itemIdsOrAll(t)).forEach((t=>{this.addStatus(t,"update"),this.pendingChanges.push(e,t,s)})),this.trigger(new Set(t))},onUpdateError(e,t,s,i){t=this._itemIdsOrAll(t),this.pendingChanges.remove(e),t.forEach((e=>{this.clearStatus(e,"update")})),i||p((0,h.t)("Unable to update events. Please try again."),"error"),this.trigger(new Set(t))},onUpdateSuccess(e,t,s){t=this._itemIdsOrAll(t),this.items.forEach(((e,i)=>{-1!==t.indexOf(e.id)&&(this.items[i]={...e,...s},this.clearStatus(e.id,"update"))})),this.pendingChanges.remove(e),this.trigger(new Set(t))},onPopulateStats(e,t){const s=t.reduce(((e,t)=>(e[t.id]=t,e)),{});this.items.forEach(((t,i)=>{e.includes(t.id)&&(this.items[i]={...t,...s[t.id]})})),this.trigger(new Set(this.items.map((e=>e.id))))},onPopulateReleases(e,t){this.items.forEach(((s,i)=>{s.id===e&&(this.items[i]={...s,...t})})),this.trigger(new Set([e]))}},b=l().createStore(m)},"./app/stores/organizationsStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var i=s("../node_modules/reflux/src/index.js"),a=s.n(i);const n={listenables:[s("./app/actions/organizationsActions.tsx").Z],state:[],loaded:!1,getInitialState(){return this.state},init(){this.state=[],this.loaded=!1},onUpdate(e){this.add(e)},onChangeSlug(e,t){e.slug!==t.slug&&(this.remove(e.slug),this.add(t))},onRemoveSuccess(e){this.remove(e)},get(e){return this.state.find((t=>t.slug===e))},getAll(){return this.state},remove(e){this.state=this.state.filter((t=>e!==t.slug)),this.trigger(this.state)},add(e){let t=!1;this.state.forEach(((s,i)=>{s.id===e.id&&(e={...s,...e},this.state[i]=e,t=!0)})),t||(this.state=[...this.state,e]),this.trigger(this.state)},load(e){this.state=e,this.loaded=!0,this.trigger(e)}},o=a().createStore(n)},"./app/views/dashboardsV2/dashboard.tsx":(e,t,s)=>{"use strict";s.d(t,{re:()=>C,ey:()=>L,ZP:()=>N});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react-grid-layout/css/styles.css"),s("../node_modules/react-resizable/css/styles.css"),s("../node_modules/react/index.js")),o=s("../node_modules/react-grid-layout/index.js"),r=s("../node_modules/react-lazyload/lib/index.js"),d=s("../node_modules/@dnd-kit/core/dist/core.esm.js"),l=s("../node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),c=s("../node_modules/lodash/cloneDeep.js"),h=s.n(c),u=s("../node_modules/lodash/debounce.js"),p=s.n(u),g=s("../node_modules/lodash/isEqual.js"),m=s.n(g),b=s("./app/actionCreators/dashboards.tsx"),y=s("./app/actionCreators/indicator.tsx"),w=s("./app/actionCreators/members.tsx"),f=s("./app/actionCreators/modal.tsx"),v=s("./app/actionCreators/tags.tsx"),S=s("./app/icons/index.tsx"),x=s("./app/styles/space.tsx"),Z=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),_=s("./app/utils/theme.tsx"),j=s("./app/utils/withApi.tsx"),A=s("./app/utils/withPageFilters.tsx"),E=s("./app/views/dashboardsV2/addWidget.tsx"),z=s("./app/views/dashboardsV2/layoutUtils.tsx"),W=s("./app/views/dashboardsV2/sortableWidget.tsx"),I=s("./app/views/dashboardsV2/types.tsx"),D=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),k=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const C="widget-drag",O="desktop",T="mobile",L=6,B=[16,16],U={x:0,y:Number.MAX_SAFE_INTEGER},M=parseInt(_.ZP.breakpoints[0],10),P={[T]:0,[O]:M},R={[T]:2,[O]:L};class F extends n.Component{constructor(e){super(e),(0,i.Z)(this,"debouncedHandleResize",p()((()=>{this.setState({windowWidth:window.innerWidth})}),250)),(0,i.Z)(this,"handleStartAdd",(()=>{const{organization:e,dashboard:t,selection:s,handleUpdateWidgetList:i,handleAddCustomWidget:a}=this.props;if((0,Z.Z)("dashboards_views.add_widget_modal.opened",{organization:e}),e.features.includes("widget-library"))return(0,Z.Z)("dashboards_views.widget_library.opened",{organization:e}),void(0,f.openAddDashboardWidgetModal)({organization:e,dashboard:t,selection:s,onAddWidget:a,onAddLibraryWidget:e=>i(e),source:I.EN.LIBRARY});(0,f.openAddDashboardWidgetModal)({organization:e,dashboard:t,selection:s,onAddWidget:a,source:I.EN.DASHBOARDS})})),(0,i.Z)(this,"handleOpenWidgetBuilder",(()=>{const{router:e,location:t,paramDashboardId:s,organization:i}=this.props;s?e.push({pathname:`/organizations/${i.slug}/dashboard/${s}/widget/new/`,query:{...t.query,source:I.EN.DASHBOARDS}}):e.push({pathname:`/organizations/${i.slug}/dashboards/new/widget/new/`,query:{...t.query,source:I.EN.DASHBOARDS}})})),(0,i.Z)(this,"handleUpdateComplete",(e=>t=>{const{isEditing:s,onUpdate:i,handleUpdateWidgetList:a}=this.props;let n=[...this.props.dashboard.widgets];const o=n.indexOf(e),r={...t,tempId:e.tempId};(0,z.I_)(e.displayType)!==(0,z.I_)(t.displayType)?(n[o]=(0,z.W8)(r),n=(0,z.Bb)(n)):n[o]=r,i(n),s||a(n)})),(0,i.Z)(this,"handleDeleteWidget",(e=>()=>{const{dashboard:t,onUpdate:s,isEditing:i,handleUpdateWidgetList:a}=this.props;let n=t.widgets.filter((t=>t!==e));n=(0,z.Bb)(n),s(n),i||a(n)})),(0,i.Z)(this,"handleDuplicateWidget",((e,t)=>()=>{const{dashboard:s,onUpdate:i,isEditing:a,handleUpdateWidgetList:n}=this.props,o=h()((0,z.TE)({...e,id:void 0,tempId:void 0}));let r=[...s.widgets];r.splice(t,0,o),r=(0,z.Bb)(r),i(r),a||n(r)})),(0,i.Z)(this,"handleEditWidget",(e=>()=>{const{organization:t,dashboard:s,selection:i,router:a,location:n,paramDashboardId:o,onSetWidgetToBeUpdated:r,handleAddCustomWidget:d}=this.props;if(t.features.includes("new-widget-builder-experience")){if(r(e),o)return void a.push({pathname:`/organizations/${t.slug}/dashboard/${o}/widget/${e.id}/edit/`,query:{...n.query,source:I.EN.DASHBOARDS}});a.push({pathname:`/organizations/${t.slug}/dashboards/new/widget/${e.id}/edit/`,query:{...n.query,source:I.EN.DASHBOARDS}})}(0,Z.Z)("dashboards_views.edit_widget_modal.opened",{organization:t});const l={organization:t,widget:e,selection:i,onAddWidget:d,onUpdateWidget:this.handleUpdateComplete(e)};(0,f.openAddDashboardWidgetModal)({...l,dashboard:s,source:I.EN.DASHBOARDS})})),(0,i.Z)(this,"handleLayoutChange",((e,t)=>{const{isMobile:s}=this.state,{dashboard:i,onUpdate:a}=this.props,n=e=>{let{i:t}=e;return t!==E.g},o={[O]:t.desktop.filter(n),[T]:t.mobile.filter(n)};let d=(0,z.Sp)(o.desktop);const l=i.widgets.map((e=>{const t=(0,z.Yb)(e);let i=o.desktop.find((e=>{let{i:s}=e;return s===t}));if(!i){const a=(0,z.I_)(e.displayType),n={w:z.c6,h:a,minH:a,i:t},[r,l]=(0,z.Hh)(d,a);if(d=l,i={...n,...r},s){const e=o.mobile.filter((e=>{let{i:s}=e;return s!==t}));e.push({...n,...U}),o.mobile=e}}return{...e,layout:(0,z.hq)(i)}}));this.setState({layouts:o}),a(l),setTimeout(r.be,400)})),(0,i.Z)(this,"handleBreakpointChange",(e=>{const{layouts:t}=this.state,{dashboard:{widgets:s}}=this.props;e!==T?this.setState({isMobile:!1}):this.setState({isMobile:!0,layouts:{...t,[T]:(0,z.VW)(t.desktop,s)}})})),(0,i.Z)(this,"renderDndDashboard",(()=>{const{isEditing:e,onUpdate:t,dashboard:s,organization:i,widgetLimitReached:a}=this.props;let{widgets:n}=s;i.features.includes("issues-in-dashboards")||(n=n.filter((e=>{let{widgetType:t}=e;return t!==I.l9.ISSUE})));const o=this.getWidgetIds();return(0,D.tZ)(d.LB,{collisionDetection:d.pE,onDragEnd:e=>{let{over:s,active:i}=e;const a=i.id,r=o.indexOf.bind(o),d=a?r(a):-1;if(s&&s.id!==E.g){const e=r(s.id);d!==e&&t((0,l.Rp)(n,d,e))}},children:(0,D.tZ)(q,{children:(0,D.BX)(l.Fo,{items:o,strategy:l.U2,children:[n.map(((e,t)=>this.renderWidget(e,t))),e&&!a&&(0,D.tZ)(E.Z,{orgFeatures:i.features,onAddWidget:this.handleStartAdd,onOpenWidgetBuilder:this.handleOpenWidgetBuilder})]})})})}));const{dashboard:t,organization:s}=e,a=s.features.includes("dashboard-grid-layout"),n=(0,z.RI)(t.widgets);this.state={isMobile:!1,layouts:{[O]:a?n:[],[T]:a?(0,z.VW)(n,t.widgets):[]},windowWidth:window.innerWidth}}static getDerivedStateFromProps(e,t){if(e.organization.features.includes("dashboard-grid-layout")){if(t.isMobile)return null;const s=(0,z.RI)(e.dashboard.widgets);if(!m()(s.map(z.hq),t.layouts.desktop.map(z.hq)))return{...t,layouts:{[O]:s,[T]:(0,z.VW)(s,e.dashboard.widgets)}}}return null}async componentDidMount(){const{isEditing:e,organization:t}=this.props;t.features.includes("dashboard-grid-layout")&&window.addEventListener("resize",this.debouncedHandleResize),e&&this.fetchTags(),this.addNewWidget(),this.fetchMemberList()}async componentDidUpdate(e){const{isEditing:t,newWidget:s}=this.props;e.isEditing!==t&&t&&this.fetchTags(),s!==e.newWidget&&this.addNewWidget(),m()(e.selection.projects,this.props.selection.projects)||this.fetchMemberList()}componentWillUnmount(){const{organization:e}=this.props;e.features.includes("dashboard-grid-layout")&&window.removeEventListener("resize",this.debouncedHandleResize)}fetchMemberList(){var e;const{api:t,selection:s}=this.props;(0,w.MA)(t,this.props.organization.slug,null===(e=s.projects)||void 0===e?void 0:e.map((e=>String(e))))}async addNewWidget(){const{api:e,organization:t,newWidget:s,handleAddCustomWidget:i}=this.props;if(s)try{await(0,b.QL)(e,t.slug,s),i(s)}catch(e){(0,y.Iw)(e)}}fetchTags(){const{api:e,organization:t,selection:s}=this.props;(0,v.QK)(e,t.slug,s)}getWidgetIds(){return[...this.props.dashboard.widgets.map(((e,t)=>(0,z.$n)(e,t))),E.g]}renderWidget(e,t){const{isMobile:s,windowWidth:i}=this.state,{isEditing:a,organization:n,widgetLimitReached:o,isPreview:r}=this.props,d={widget:e,isEditing:a,widgetLimitReached:o,onDelete:this.handleDeleteWidget(e),onEdit:this.handleEditWidget(e),onDuplicate:this.handleDuplicateWidget(e,t),isPreview:r};if(n.features.includes("dashboard-grid-layout")){const t=(0,z.Yb)(e),a=t;return(0,D.tZ)($,{"data-grid":e.layout,children:(0,D.tZ)(W.Z,{...d,dragId:a,isMobile:s,windowWidth:i})},t)}const l=(0,z.$n)(e,t),c=l;return(0,k.az)(W.Z,{...d,key:l,dragId:c})}get addWidgetLayout(){const{isMobile:e,layouts:t}=this.state;let s=U;if(!e){const e=(0,z.Sp)(t.desktop),[i]=(0,z.Hh)(e,1);s=i}return{...s,w:z.c6,h:1,isResizable:!1}}renderGridDashboard(){const{layouts:e,isMobile:t}=this.state,{isEditing:s,dashboard:i,organization:a,widgetLimitReached:n}=this.props;let{widgets:o}=i;a.features.includes("issues-in-dashboards")||(o=o.filter((e=>{let{widgetType:t}=e;return t!==I.l9.ISSUE})));const r=(0,z.Sp)(e.desktop),d=(0,z._F)(o,r),l=!t&&s;return(0,D.BX)(V,{breakpoints:P,cols:R,rowHeight:120,margin:B,draggableHandle:`.${C}`,layouts:e,onLayoutChange:this.handleLayoutChange,onBreakpointChange:this.handleBreakpointChange,isDraggable:l,isResizable:l,resizeHandle:(0,D.tZ)(X,{className:"react-resizable-handle","data-test-id":"custom-resize-handle",children:(0,D.tZ)(S.Iq,{})}),useCSSTransforms:!1,isBounded:!0,children:[d.map(((e,t)=>this.renderWidget(e,t))),s&&!n&&(0,D.tZ)(H,{"data-grid":this.addWidgetLayout,children:(0,D.tZ)(E.Z,{orgFeatures:a.features,onAddWidget:this.handleStartAdd,onOpenWidgetBuilder:this.handleOpenWidgetBuilder})},E.g)]})}render(){const{organization:e}=this.props;return e.features.includes("dashboard-grid-layout")?this.renderGridDashboard():this.renderDndDashboard()}}F.displayName="Dashboard";const N=(0,j.Z)((0,A.Z)(F)),q=(0,a.Z)("div",{target:"e1wa3gzn4"})("display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));grid-auto-flow:row dense;gap:",(0,x.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(4, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-template-columns:repeat(6, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[4]),"){grid-template-columns:repeat(8, minmax(0, 1fr));}"),H=(0,a.Z)("div",{target:"e1wa3gzn3"})("z-index:5;background-color:",(e=>e.theme.background),";"),$=(0,a.Z)("div",{target:"e1wa3gzn2"})({name:"ojhcpn",styles:".react-resizable-handle{z-index:2;}"}),V=(0,a.Z)((0,o.WidthProvider)(o.Responsive),{target:"e1wa3gzn1"})("margin:-",(0,x.Z)(2),";.react-resizable-handle{background-image:none;}.react-grid-item>.react-resizable-handle::after{border:none;}.react-grid-item.react-grid-placeholder{background:",(e=>e.theme.purple200),";}"),X=(0,a.Z)("div",{target:"e1wa3gzn0"})({name:"1jmisum",styles:"position:absolute;bottom:2px;right:2px;cursor:nwse-resize"})},"../node_modules/lodash/isInteger.js":(e,t,s)=>{var i=s("../node_modules/lodash/toInteger.js");e.exports=function(e){return"number"==typeof e&&e==i(e)}},"../node_modules/lodash/isNil.js":e=>{e.exports=function(e){return null==e}}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_pageFilters_tsx-app_actions_memberActions_tsx-app_components_charts_styles-01026e.724fa6114c3d59417f9cf7358e0b871a.js.map