(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actions_organizationsActions_tsx-app_components_modals_dashboardWidgetQuerySelectorModal_-0ed180"],{"./app/actions/organizationsActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("../node_modules/reflux/src/index.js");const o=s.n(r)().createActions(["update","setActive","changeSlug","remove","removeSuccess","removeError"])},"./app/actions/projectActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("../node_modules/reflux/src/index.js");const o=s.n(r)().createActions(["addTeam","addTeamError","addTeamSuccess","changeSlug","createSuccess","loadProjects","loadStats","loadStatsError","loadStatsForProjectSuccess","loadStatsSuccess","removeProject","removeProjectError","removeProjectSuccess","removeTeam","removeTeamError","removeTeamSuccess","reset","setActive","update","updateError","updateSuccess"])},"./app/components/modals/dashboardWidgetQuerySelectorModal.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{modalCss:()=>x,default:()=>P});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),i=s("./app/components/button.tsx"),n=s("./app/components/forms/controls/input.tsx"),d=s("./app/icons/index.tsx"),l=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),u=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=s("./app/utils/discover/types.tsx"),p=s("./app/utils/withApi.tsx"),g=s("./app/utils/withPageFilters.tsx"),m=s("./app/views/dashboardsV2/utils.tsx"),_=s("./app/views/dashboardsV2/widgetBuilder/utils.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class v extends o.Component{renderQueries(){const{organization:e,widget:t,selection:s}=this.props;return t.queries.map(((r,i)=>{const n=(0,m.tT)(t.title,r,s,t.displayType),c=n.getResultsViewUrlTarget(e.slug),p=n.getYAxisOptions().map((e=>{let{value:t}=e;return t}));switch(c.query.yAxis=[...new Set(r.fields.filter((e=>p.includes(e))))].slice(0,3),t.displayType){case _.FO.BAR:c.query.display=h.DC.BAR}return(0,f.tZ)(o.Fragment,{children:(0,f.BX)(b,{children:[(0,f.BX)(y,{children:[(0,f.tZ)(S,{htmlFor:"smart-search-input","aria-label":(0,l.t)("Search events"),children:(0,f.tZ)(d.jV,{})}),(0,f.tZ)(w,{value:r.conditions,disabled:!0})]}),(0,f.tZ)(a.Link,{to:c,children:(0,f.tZ)(j,{priority:"primary",icon:(0,f.tZ)(d.g6,{size:"xs",direction:"right"}),onClick:()=>{(0,u.Z)("dashboards_views.query_selector.selected",{organization:e,widget_type:t.displayType})},"aria-label":(0,l.t)("Open in Discover")})})]})},i)}))}render(){const{Body:e,Header:t,widget:s}=this.props;return(0,f.BX)(o.Fragment,{children:[(0,f.tZ)(t,{closeButton:!0,children:(0,f.tZ)("h4",{children:s.title})}),(0,f.BX)(e,{children:[(0,f.tZ)("p",{children:(0,l.t)("Multiple queries were used to create this widget visualization. Which query would you like to view in Discover?")}),this.renderQueries()]})]})}}v.displayName="DashboardWidgetQuerySelectorModal";const w=(0,r.Z)(n.Z,{target:"e10oo76w4"})({name:"97snz3",styles:"text-overflow:ellipsis;padding:0px;box-shadow:none;height:auto;&:disabled{border:none;cursor:default;}"}),b=(0,r.Z)("div",{target:"e10oo76w3"})("display:flex;margin-bottom:",(0,c.Z)(1),";"),j=(0,r.Z)(i.ZP,{target:"e10oo76w2"})("margin-left:",(0,c.Z)(1),";"),y=(0,r.Z)("div",{target:"e10oo76w1"})("border:1px solid ",(e=>e.theme.border),";box-shadow:inset ",(e=>e.theme.dropShadowLight),";background:",(e=>e.theme.backgroundSecondary),";padding:7px ",(0,c.Z)(1),";position:relative;display:grid;grid-template-columns:max-content 1fr max-content;gap:",(0,c.Z)(1),";align-items:start;flex-grow:1;border-radius:",(e=>e.theme.borderRadius),";"),S=(0,r.Z)("label",{target:"e10oo76w0"})("display:flex;padding:",(0,c.Z)(.5)," 0;margin:0;color:",(e=>e.theme.gray300),";"),x={name:"l07bt5",styles:"width:100%;max-width:700px;margin:70px auto"},P=(0,p.Z)((0,g.Z)(v))},"./app/stores/organizationStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d}),s("../node_modules/core-js/modules/es.string.replace.js");var r=s("../node_modules/reflux/src/index.js"),o=s.n(r),a=s("./app/actions/organizationActions.tsx"),i=s("./app/constants/index.tsx");const n={init(){this.reset(),this.listenTo(a.Z.update,this.onUpdate),this.listenTo(a.Z.reset,this.reset),this.listenTo(a.Z.fetchOrgError,this.onFetchOrgError)},reset(){this.loading=!0,this.error=null,this.errorType=null,this.organization=null,this.dirty=!1,this.trigger(this.get())},onUpdate(e){let{replace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!1,this.error=null,this.errorType=null,this.organization=t?e:{...this.organization,...e},this.dirty=!1,this.trigger(this.get())},onFetchOrgError(e){switch(this.organization=null,this.errorType=null,null==e?void 0:e.status){case 401:this.errorType=i.Yc.ORG_NO_ACCESS;break;case 404:this.errorType=i.Yc.ORG_NOT_FOUND}this.loading=!1,this.error=e,this.dirty=!1,this.trigger(this.get())},get(){return{organization:this.organization,error:this.error,loading:this.loading,errorType:this.errorType,dirty:this.dirty}},getState(){return this.get()}},d=o().createStore(n)},"./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const r=(0,s("./app/utils/analytics/makeAnalyticsFunction.tsx").Z)({"growth.show_mobile_prompt_banner":"Growth: Show Mobile Prompt Banner","growth.dismissed_mobile_prompt_banner":"Growth: Dismissed Mobile Prompt Banner","growth.opened_mobile_project_suggest_modal":"Growth: Open Mobile Project Suggest Modal","growth.clicked_mobile_prompt_setup_project":"Growth: Clicked Mobile Prompt Setup Project","growth.clicked_mobile_prompt_ask_teammate":"Growth: Clicked Mobile Prompt Ask Teammate","growth.submitted_mobile_prompt_ask_teammate":"Growth: Submitted Mobile Prompt Ask Teammate","growth.demo_click_get_started":"Growth: Demo Click Get Started","growth.demo_click_docs":"Growth: Demo Click Docs","growth.demo_click_request_demo":"Growth: Demo Click Request Demo","growth.onboarding_load_choose_platform":"Growth: Onboarding Load Choose Platform Page","growth.onboarding_set_up_your_project":"Growth: Onboarding Click Set Up Your Project","growth.select_platform":"Growth: Onboarding Choose Platform","growth.platformpicker_category":"Growth: Onboarding Platform Category","growth.platformpicker_search":"Growth: Onboarding Platform Search","growth.onboarding_start_onboarding":"Growth: Onboarding Start Onboarding","growth.onboarding_take_to_error":"Growth: Onboarding Take to Error","growth.onboarding_view_full_docs":"Growth: Onboarding View Full Docs","growth.onboarding_view_sample_event":"Growth: Onboarding View Sample Event","invite_request.approved":"Invite Request Approved","invite_request.denied":"Invite Request Denied","growth.demo_modal_clicked_signup":"Growth: Demo Modal Clicked Signup","growth.demo_modal_clicked_continue":"Growth: Demo Modal Clicked Continue","growth.clicked_enter_sandbox":"Growth: Clicked Enter Sandbox","growth.sample_transaction_docs_link_clicked":"Growth: Sample Transaction Docs Link Clicked","growth.sample_error_onboarding_link_clicked":"Growth: Sample Error Onboarding Link Clicked","growth.issue_open_in_discover_btn_clicked":"Growth: Open in Discover Button in Issue Details clicked","member_settings_page.loaded":"Member Settings Page Loaded","invite_modal.opened":"Invite Modal: Opened","invite_modal.closed":"Invite Modal: Closed","invite_modal.add_more":"Invite Modal: Add More","invite_modal.invites_sent":"Invite Modal: Invites Sent","invite_modal.requests_sent":"Invite Modal: Requests Sent","sdk_updates.seen":"SDK Updates: Seen","sdk_updates.snoozed":"SDK Updates: Snoozed","sdk_updates.clicked":"SDK Updates: Clicked","event_cause.viewed":null,"event_cause.docs_clicked":"Event Cause Docs Clicked","event_cause.snoozed":"Event Cause Snoozed","event_cause.dismissed":"Event Cause Dismissed","issue_error_banner.viewed":"Issue Error Banner Viewed","issues_tab.viewed":"Viewed Issues Tab","issue_search.failed":"Issue Search: Failed","issue.search_sidebar_clicked":"Issue Search Sidebar Clicked","inbox_tab.issue_clicked":"Clicked Issue from Inbox Tab","issues_stream.issue_clicked":"Clicked Issue from Issues Stream","issues_stream.issue_assigned":"Assigned Issue from Issues Stream","issue.shared_publicly":"Issue Shared Publicly",resolve_issue:"Resolve Issue","tag.clicked":"Tag: Clicked","performance_views.create_sample_transaction":"Growth: Performance Sample Transaction","performance_views.tour.start":"Performance Views: Tour Start","performance_views.tour.advance":"Performance Views: Tour Advance","performance_views.tour.close":"Performance Views: Tour Close","performance_views.landingv2.transactions.sort":"Performance Views: Landing Transactions Sorted","performance_views.overview.navigate.summary":"Performance Views: Overview view summary","performance_views.overview.cellaction":"Performance Views: Cell Action Clicked","performance_views.landingv3.widget.interaction":"Performance Views: Landing Widget Interaction","performance_views.landingv3.widget.switch":"Performance Views: Landing Widget Switched","performance_views.landingv3.batch_queries":"Performance Views: Landing Query Batching","performance_views.landingv3.display_change":"Performance Views: Switch Landing Tabs","performance_views.spans.change_op":"Performance Views: Change span operation name","performance_views.spans.change_sort":"Performance Views: Change span sort column","dashboards_views.add_widget_modal.opened":"Dashboards2: Add Widget Modal opened","dashboards_views.add_widget_modal.change":"Dashboards2: Field changed in Add Widget Modal","dashboards_views.edit_widget_modal.opened":"Dashboards2: Edit Widget Modal Opened","dashboards_views.query_selector.opened":"Dashboards2: Query Selector opened for Widget","dashboards_views.query_selector.selected":"Dashboards2: Query selected in Query Selector","dashboards_views.open_in_discover.opened":"Dashboards2: Widget Opened In Discover","dashboards_views.add_widget_modal.confirm":"Dashboards2: Add Widget to Dashboard modal form submitted","dashboards_views.add_widget_modal.save":"Dashboards2: Widget saved directly to Dashboard from Add Widget to Dashboard modal","dashboards_views.edit_widget_modal.confirm":"Dashboards2: Edit Dashboard Widget modal form submitted","dashboards_views.widget_library.add":"Dashboards2: Number of prebuilt widgets added","dashboards_views.widget_library.add_widget":"Dashboards2: Title of prebuilt widget added","dashboards_views.widget_library.switch_tab":"Dashboards2: Widget Library tab switched","dashboards_views.widget_library.opened":"Dashboards2: Add Widget Library opened","dashboards_manage.search":"Dashboards Manager: Search","dashboards_manage.change_sort":"Dashboards Manager: Sort By Changed","dashboards_manage.create.start":"Dashboards Manager: Dashboard Create Started","dashboards_manage.templates.toggle":"Dashboards Manager: Template Toggle Changed","dashboards_manage.templates.add":"Dashboards Manager: Template Added","dashboards_manage.templates.preview":"Dashboards Manager: Template Previewed","discover_views.add_to_dashboard.modal_open":"Discover2: Add to Dashboard modal opened","discover_views.add_to_dashboard.confirm":"Discover2: Add to Dashboard modal form submitted","team_insights.viewed":"Team Insights: Viewed","search.searched":"Search: Performed search","search.operator_autocompleted":"Search: Operator Autocompleted","organization_saved_search.selected":"Organization Saved Search: Selected saved search","settings_search.open":"settings_search Open","command_palette.open":"command_palette Open","sidebar_help.open":"sidebar_help Open","settings_search.select":"settings_search Select","command_palette.select":"command_palette Select","sidebar_help.select":"sidebar_help Select","settings_search.query":"settings_search Query","command_palette.query":"command_palette Query","sidebar_help.query":"sidebar_help Query","projectselector.direct_selection":"Project Selector: Direct Selection","projectselector.update":"Project Selector: Update","projectselector.clear":"Project Selector: Clear","projectselector.toggle":"Project Selector: Toggle","projectselector.multi_button_clicked":"Project Selector: Multi Button Clicked","notification_settings.index_page_viewed":"Notification Settings: Index Page Viewed","notification_settings.tuning_page_viewed":"Notification Settings: Tuning Page Viewed","notification_settings.updated_tuning_setting":"Notification Settings: Updated Tuning Setting"})},"./app/utils/parseLinkHeader.tsx":(e,t,s)=>{"use strict";function r(e){if(null===e||""===e)return{};const t=e.split(","),s={};return t.forEach((e=>{const t=/<([^>]+)>; rel="([^"]+)"(?:; results="([^"]+)")?(?:; cursor="([^"]+)")?/g.exec(e),r="true"===t[3]||"false"!==t[3]&&null;s[t[2]]={href:t[1],results:r,cursor:t[4]}})),s}s.d(t,{Z:()=>r})},"./app/utils/projects.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>v});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/lodash/memoize.js"),i=s.n(a),n=s("../node_modules/lodash/partition.js"),d=s.n(n),l=s("../node_modules/lodash/uniqBy.js"),c=s.n(l),u=s("./app/actions/projectActions.tsx"),h=s("./app/stores/projectsStore.tsx"),p=s("./app/utils.tsx"),g=s("./app/utils/parseLinkHeader.tsx"),m=s("./app/utils/withApi.tsx"),_=s("./app/utils/withProjects.tsx");class f extends o.Component{constructor(){var e;super(...arguments),e=this,(0,r.Z)(this,"state",{fetchedProjects:[],projectsFromStore:[],initiallyLoaded:!1,fetching:!1,isIncomplete:null,hasMore:null,prevSearch:null,nextCursor:null,fetchError:null}),(0,r.Z)(this,"fetchQueue",new Set),(0,r.Z)(this,"getProjectsMap",i()((e=>new Map(e.map((e=>[e.slug,e])))))),(0,r.Z)(this,"loadSpecificProjects",(()=>{const{slugs:e,projects:t}=this.props,s=this.getProjectsMap(t),[r,o]=d()(e,(e=>s.has(e))),a=r.map((e=>s.get(e))).filter(p.ri);o.forEach((e=>this.fetchQueue.add(e))),this.setState({fetchedProjects:o.map((e=>({slug:e}))),initiallyLoaded:!!r.length,projectsFromStore:a}),o.length&&this.fetchSpecificProjects()})),(0,r.Z)(this,"fetchSpecificProjects",(async()=>{const{api:e,orgId:t,passthroughPlaceholderProject:s}=this.props;if(!this.fetchQueue.size)return;this.setState({fetching:!0});let r=[],o=null;try{const{results:s}=await w(e,t,{slugs:Array.from(this.fetchQueue)});r=s}catch(e){console.error(e),o=e}const a=this.getProjectsMap(r),i=Array.from(this.fetchQueue).map((e=>a.has(e)?a.get(e):s?{slug:e}:null)).filter(p.ri);this.setState({fetchedProjects:i,isIncomplete:this.fetchQueue.size!==r.length,initiallyLoaded:!0,fetching:!1,fetchError:o}),this.fetchQueue.clear()})),(0,r.Z)(this,"loadAllProjects",(async()=>{const{api:e,orgId:t,limit:s,allProjects:r}=this.props;this.setState({fetching:!0});try{const{results:o,hasMore:a,nextCursor:i}=await w(e,t,{limit:s,allProjects:r});this.setState({fetching:!1,fetchedProjects:o,initiallyLoaded:!0,hasMore:a,nextCursor:i})}catch(e){console.error(e),this.setState({fetching:!1,fetchedProjects:[],initiallyLoaded:!0,fetchError:e})}})),(0,r.Z)(this,"handleSearch",(async function(t){let{append:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{api:r,orgId:o,limit:a}=e.props,{prevSearch:i}=e.state,n=e.state.nextCursor;e.setState({fetching:!0});try{const{results:d,hasMore:l,nextCursor:u}=await w(r,o,{search:t,limit:a,prevSearch:i,cursor:n});e.setState((e=>{let r;return r=s?c()([...e.fetchedProjects,...d],(e=>{let{slug:t}=e;return t})):d,{fetchedProjects:r,hasMore:l,fetching:!1,prevSearch:t,nextCursor:u}}))}catch(t){console.error(t),e.setState({fetching:!1,fetchError:t})}}))}componentDidMount(){const{slugs:e}=this.props;null!=e&&e.length?this.loadSpecificProjects():this.loadAllProjects()}componentDidUpdate(e){const{projects:t}=this.props;t!==e.projects&&this.updateProjectsFromStore()}updateProjectsFromStore(){const{allProjects:e,projects:t,slugs:s}=this.props;if(e)this.setState({fetchedProjects:t});else if(null!=s&&s.length){const e=this.getProjectsMap(t),r=s.map((t=>e.get(t))).filter(p.ri);this.setState({projectsFromStore:r})}}render(){const{slugs:e,children:t}=this.props;return t({projects:this.state.initiallyLoaded?[...this.state.fetchedProjects,...this.state.projectsFromStore]:e&&e.map((e=>({slug:e})))||[],isIncomplete:this.state.isIncomplete,fetching:this.state.fetching,hasMore:this.state.hasMore,onSearch:this.handleSearch,initiallyLoaded:this.state.initiallyLoaded,fetchError:this.state.fetchError})}}f.displayName="Projects",(0,r.Z)(f,"defaultProps",{passthroughPlaceholderProject:!0});const v=(0,_.Z)((0,m.Z)(f));async function w(e,t){let{slugs:s,search:r,limit:o,prevSearch:a,cursor:i,allProjects:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const d={collapse:["latestDeploys"]};if(s&&s.length&&(d.query=s.map((e=>`slug:${e}`)).join(" ")),r&&(d.query=`${d.query?`${d.query} `:""}${r}`),(a||r)&&a!==r||!i||(d.cursor=i),o&&(d.per_page=o),n){const e=h.Z.getAll();if(!h.Z.isLoading())return{results:e,hasMore:!1};d.all_projects=1}let l=!1,c=null;const[p,,m]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:d}),_=null==m?void 0:m.getResponseHeader("Link");if(_){const e=(0,g.Z)(_);l=e&&(e.next.results||e.previous.results),c=e.next.cursor}return n&&u.Z.loadProjects(p),{results:p,hasMore:l,nextCursor:c}}},"./app/utils/useApi.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("../node_modules/react/index.js"),o=s("./app/api.tsx");const a=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,r.useRef)();void 0===s.current&&void 0===t&&(s.current=new o.KU);const a=null!=t?t:s.current;function i(){!e&&a.clear()}return(0,r.useEffect)((()=>i),[]),a}},"./app/utils/useProjects.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>p}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),a=s.n(o),i=s("./app/actions/projectActions.tsx"),n=s("./app/stores/organizationStore.tsx"),d=s("./app/stores/projectsStore.tsx"),l=s("./app/stores/useLegacyStore.tsx"),c=s("./app/utils/parseLinkHeader.tsx"),u=s("./app/utils/useApi.tsx");async function h(e,t){let{slugs:s,search:r,limit:o,lastSearch:a,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={collapse:["latestDeploys"]};var d;void 0!==s&&s.length>0&&(n.query=s.map((e=>`slug:${e}`)).join(" ")),r&&(n.query=`${null!==(d=n.query)&&void 0!==d?d:""}${r}`.trim());const l=!a&&!r||a===r;l&&i&&(n.cursor=i),void 0!==o&&(n.per_page=o);let u=!1,h=null;const[p,,g]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:n}),m=null==g?void 0:g.getResponseHeader("Link");if(m){var _,f,v;const e=(0,c.Z)(m);u=(null==e||null===(_=e.next)||void 0===_?void 0:_.results)||(null==e||null===(f=e.previous)||void 0===f?void 0:f.results),h=null==e||null===(v=e.next)||void 0===v?void 0:v.cursor}return{results:p,hasMore:u,nextCursor:h}}const p=function(){var e;let{limit:t,slugs:s,orgId:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=(0,u.Z)(),{organization:p}=(0,l.X)(n.Z),g=(0,l.X)(d.Z),m=null!=o?o:null==p?void 0:p.slug,_=new Set(g.projects.map((e=>e.slug))),f=null!==(e=null==s?void 0:s.filter((e=>!_.has(e))))&&void 0!==e?e:[],v=f.length>0,[w,b]=(0,r.useState)({initiallyLoaded:!g.loading&&!v,fetching:v,hasMore:null,lastSearch:null,nextCursor:null,fetchError:null}),j=(0,r.useRef)(null);async function y(){if(void 0!==m){b({...w,fetching:!0});try{const{results:e,hasMore:s,nextCursor:r}=await h(c,m,{slugs:f,limit:t}),o=a()([...g.projects,...e],(e=>{let{slug:t}=e;return t}));i.Z.loadProjects(o),b({...w,hasMore:s,fetching:!1,initiallyLoaded:!g.loading,nextCursor:r})}catch(e){console.error(e),b({...w,fetching:!1,initiallyLoaded:!g.loading,fetchError:e})}}else console.error("Cannot use useProjects({slugs}) without an organization in context")}async function S(e){const{lastSearch:s}=w,r=w.nextCursor;if(""!==e)if(void 0!==m){b({...w,fetching:!0});try{c.clear();const{results:o,hasMore:n,nextCursor:d}=await h(c,m,{search:e,limit:t,lastSearch:s,cursor:r}),l=a()([...g.projects,...o],(e=>{let{slug:t}=e;return t}));l.length>g.projects.length&&i.Z.loadProjects(l),b({...w,hasMore:n,fetching:!1,lastSearch:e,nextCursor:d})}catch(e){console.error(e),b({...w,fetching:!1,fetchError:e})}}else console.error("Cannot use useProjects.onSearch without an organization in context")}void 0!==s&&(null===j.current&&(j.current=new Set(s)),(s.length!==j.current.size||s.some((e=>{var t;return!(null!==(t=j.current)&&void 0!==t&&t.has(e))})))&&(j.current=new Set(s))),(0,r.useEffect)((()=>{v&&y()}),[j.current]),(0,r.useEffect)((()=>{const e=!g.loading;w.initiallyLoaded!==e&&(v||b({...w,initiallyLoaded:e}))}),[g.loading]);const{initiallyLoaded:x,fetching:P,fetchError:A,hasMore:k}=w,C=s?g.projects.filter((e=>s.includes(e.slug))):g.projects,D=f.map((e=>({slug:e}))),Z={projects:C,placeholders:D,fetching:P||g.loading,initiallyLoaded:x,fetchError:A,hasMore:k,onSearch:S};return Z}},"./app/utils/withApi.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/utils/getDisplayName.tsx"),o=s("./app/utils/useApi.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=s=>{let{api:r,...i}=s;const n=(0,o.Z)({api:r,...t});return(0,a.tZ)(e,{...i,api:n})};return s.displayName=`withApi(${(0,r.Z)(e)})`,s}},"./app/utils/withProjects.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i}),s("../node_modules/react/index.js");var r=s("./app/utils/getDisplayName.tsx"),o=s("./app/utils/useProjects.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){const t=t=>{const{projects:s,initiallyLoaded:r}=(0,o.Z)(),i=!r;return(0,a.tZ)(e,{...t,projects:s,loadingProjects:i})};return t.displayName=`withProjects(${(0,r.Z)(e)})`,t}},"./app/views/dashboardsV2/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{qk:()=>f,tT:()=>v,y1:()=>b,DW:()=>j,s:()=>y}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/lodash/cloneDeep.js"),o=s.n(r),a=s("../node_modules/lodash/pick.js"),i=s.n(a),n=s("./images/dashboard/widget-area.svg"),d=s("./images/dashboard/widget-bar.svg"),l=s("./images/dashboard/widget-big-number.svg"),c=s("./images/dashboard/widget-line-1.svg"),u=s("./images/dashboard/widget-table.svg"),h=s("./images/dashboard/widget-world-map.svg"),p=s("./app/components/charts/utils.tsx"),g=s("./app/utils/dates.tsx"),m=s("./app/utils/discover/eventView.tsx"),_=s("./app/views/dashboardsV2/types.tsx");function f(e){return o()(e)}function v(e,t,s,r){const{start:o,end:a,period:i}=s.datetime,{projects:n,environments:d}=s,l=r!==_.FO.WORLD_MAP||t.fields.includes("geo.country_code")?t.fields:["geo.country_code",...t.fields],c=r!==_.FO.WORLD_MAP||t.conditions.includes("has:geo.country_code")?t.conditions:`${t.conditions} has:geo.country_code`.trim();return m.ZP.fromSavedQuery({id:void 0,name:e,version:2,fields:l,query:c,orderby:t.orderby,projects:n,range:null!=i?i:void 0,start:o?(0,g.v5)(o):void 0,end:a?(0,g.v5)(a):void 0,environment:d})}function w(e){return"string"==typeof e?[e]:e}function b(e){if(e){const t=w(e.queryNames),s=w(e.queryConditions),r=w(e.queryFields),o=[];if(s&&t&&r&&"string"==typeof e.queryOrderby&&s.forEach(((s,a)=>{o.push({name:t[a],conditions:s,fields:r,orderby:e.queryOrderby})})),e.title&&e.displayType&&e.interval&&o.length>0)return{...i()(e,["title","displayType","interval"]),widgetType:_.l9.DISCOVER,queries:o}}}function j(e){switch(e){case _.FO.BAR:return d;case _.FO.AREA:case _.FO.TOP_N:return n;case _.FO.BIG_NUMBER:return l;case _.FO.TABLE:return u;case _.FO.WORLD_MAP:return h;case _.FO.LINE:default:return c}}function y(e,t){let s="bar"===e.displayType?"1d":e.interval;s||(s="5m");const r=(0,g.YJ)(s);if((0,p.Nm)(t)/(60*r)>66){const e=(0,p.ZS)(t,"high");if(r<(0,g.YJ)(e))return e}return s}},"./app/views/dashboardsV2/widgetBuilder/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{FO:()=>o,qg:()=>a,hV:()=>i});var r=s("./app/locale.tsx");let o,a;!function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.TABLE="table",e.WORLD_MAP="world_map",e.BIG_NUMBER="big_number",e.STACKED_AREA="stacked_area",e.TOP_N="top_n"}(o||(o={})),function(e){e.EVENTS="events",e.ISSUES="issues",e.METRICS="metrics"}(a||(a={}));const i={[o.AREA]:(0,r.t)("Area Chart"),[o.BAR]:(0,r.t)("Bar Chart"),[o.LINE]:(0,r.t)("Line Chart"),[o.TABLE]:(0,r.t)("Table"),[o.WORLD_MAP]:(0,r.t)("World Map"),[o.BIG_NUMBER]:(0,r.t)("Big Number"),[o.TOP_N]:(0,r.t)("Top 5 Events")}},"../node_modules/lodash/_arrayAggregator.js":e=>{e.exports=function(e,t,s,r){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];t(r,i,s(i),e)}return r}},"../node_modules/lodash/_arrayIncludes.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseIndexOf.js");e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},"../node_modules/lodash/_arrayIncludesWith.js":e=>{e.exports=function(e,t,s){for(var r=-1,o=null==e?0:e.length;++r<o;)if(s(t,e[r]))return!0;return!1}},"../node_modules/lodash/_baseAggregator.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseEach.js");e.exports=function(e,t,s,o){return r(e,(function(e,r,a){t(o,e,s(e),a)})),o}},"../node_modules/lodash/_baseFindIndex.js":e=>{e.exports=function(e,t,s,r){for(var o=e.length,a=s+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},"../node_modules/lodash/_baseIndexOf.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseFindIndex.js"),o=s("../node_modules/lodash/_baseIsNaN.js"),a=s("../node_modules/lodash/_strictIndexOf.js");e.exports=function(e,t,s){return t==t?a(e,t,s):r(e,o,s)}},"../node_modules/lodash/_baseIsNaN.js":e=>{e.exports=function(e){return e!=e}},"../node_modules/lodash/_baseRest.js":(e,t,s)=>{var r=s("../node_modules/lodash/identity.js"),o=s("../node_modules/lodash/_overRest.js"),a=s("../node_modules/lodash/_setToString.js");e.exports=function(e,t){return a(o(e,t,r),e+"")}},"../node_modules/lodash/_baseUniq.js":(e,t,s)=>{var r=s("../node_modules/lodash/_SetCache.js"),o=s("../node_modules/lodash/_arrayIncludes.js"),a=s("../node_modules/lodash/_arrayIncludesWith.js"),i=s("../node_modules/lodash/_cacheHas.js"),n=s("../node_modules/lodash/_createSet.js"),d=s("../node_modules/lodash/_setToArray.js");e.exports=function(e,t,s){var l=-1,c=o,u=e.length,h=!0,p=[],g=p;if(s)h=!1,c=a;else if(u>=200){var m=t?null:n(e);if(m)return d(m);h=!1,c=i,g=new r}else g=t?[]:p;e:for(;++l<u;){var _=e[l],f=t?t(_):_;if(_=s||0!==_?_:0,h&&f==f){for(var v=g.length;v--;)if(g[v]===f)continue e;t&&g.push(f),p.push(_)}else c(g,f,s)||(g!==p&&g.push(f),p.push(_))}return p}},"../node_modules/lodash/_createAggregator.js":(e,t,s)=>{var r=s("../node_modules/lodash/_arrayAggregator.js"),o=s("../node_modules/lodash/_baseAggregator.js"),a=s("../node_modules/lodash/_baseIteratee.js"),i=s("../node_modules/lodash/isArray.js");e.exports=function(e,t){return function(s,n){var d=i(s)?r:o,l=t?t():{};return d(s,e,a(n,2),l)}}},"../node_modules/lodash/_createSet.js":(e,t,s)=>{var r=s("../node_modules/lodash/_Set.js"),o=s("../node_modules/lodash/noop.js"),a=s("../node_modules/lodash/_setToArray.js"),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},"../node_modules/lodash/_strictIndexOf.js":e=>{e.exports=function(e,t,s){for(var r=s-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},"../node_modules/lodash/noop.js":e=>{e.exports=function(){}},"../node_modules/lodash/partition.js":(e,t,s)=>{var r=s("../node_modules/lodash/_createAggregator.js")((function(e,t,s){e[s?0:1].push(t)}),(function(){return[[],[]]}));e.exports=r},"../node_modules/lodash/uniqBy.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseIteratee.js"),o=s("../node_modules/lodash/_baseUniq.js");e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}}}]);
//# sourceMappingURL=../sourcemaps/app_actions_organizationsActions_tsx-app_components_modals_dashboardWidgetQuerySelectorModal_-0ed180.0fc06807cf0a861c84ef4e0f0507e311.js.map