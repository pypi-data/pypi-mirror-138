"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_edit_tsx"],{"./app/views/alerts/edit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/components/layouts/thirds.tsx"),n=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/sentryDocumentTitle.tsx"),u=s("./app/locale.tsx"),p=s("./app/styles/space.tsx"),d=s("./app/utils/analytics.tsx"),c=s("./app/utils/teams.tsx"),h=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),m=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),g=s("./app/views/asyncView.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends g.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleSubmitSuccess",(()=>{const{router:e,project:t}=this.props,{orgId:s}=this.props.params;d.oF.endTransaction({name:"saveAlertRule"}),e.push({pathname:`/organizations/${s}/alerts/rules/`,query:{project:t.id}})}))}getDefaultState(){return{...super.getDefaultState(),actions:new Map}}getEndpoints(){const{orgId:e,ruleId:t}=this.props.params;return[["rule",`/organizations/${e}/alert-rules/${t}/`]]}onRequestSuccess(e){let{stateKey:t,data:s}=e;"rule"===t&&s.name&&this.props.onChangeTitle(s.name)}renderBody(){const{ruleId:e}=this.props.params,{rule:t}=this.state;return(0,x.tZ)(m.Z,{...this.props,ruleId:e,rule:t,onSubmitSuccess:this.handleSubmitSuccess})}}const T=Z;var b=s("./app/views/alerts/issueRuleEditor/index.tsx");class j extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{ruleName:""}),(0,r.Z)(this,"handleChangeTitle",(e=>{this.setState({ruleName:e})}))}componentDidMount(){const{organization:e,project:t}=this.props;(0,d.ec)({eventKey:"edit_alert_rule.viewed",eventName:"Edit Alert Rule: Viewed",organization_id:e.id,project_id:t.id,alert_type:this.getAlertType()})}getTitle(){const{ruleName:e}=this.state;return`${e}`}getAlertType(){return location.pathname.includes("/alerts/metric-rules/")?"metric":"issue"}render(){const{hasMetricAlerts:e,location:t,organization:s,project:r,routes:i}=this.props,p=this.getAlertType();return(0,x.BX)(a.Fragment,{children:[(0,x.tZ)(l.Z,{title:this.getTitle(),orgSlug:s.slug,projectSlug:r.slug}),(0,x.tZ)(o.h4,{children:(0,x.BX)(o.oB,{children:[(0,x.tZ)(h.Z,{orgSlug:s.slug,title:(0,u.t)("Edit Alert Rule"),projectSlug:r.slug,routes:i,location:t}),(0,x.tZ)(o.Dx,{children:this.getTitle()})]})}),(0,x.tZ)(y,{children:(0,x.tZ)(o.or,{fullWidth:!0,children:(0,x.tZ)(c.Z,{provideUserTeams:!0,children:t=>{let{teams:s,initiallyLoaded:i}=t;return i?(0,x.BX)(a.Fragment,{children:[(!e||"issue"===p)&&(0,x.tZ)(b.Z,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))}),e&&"metric"===p&&(0,x.tZ)(T,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))})]}):(0,x.tZ)(n.Z,{})}})})})]})}}j.displayName="ProjectAlertsEditor";const y=(0,i.Z)(o.uT,{target:"eqr07hw0"})("margin-bottom:-",(0,p.Z)(3),";*:not(img){max-width:1000px;}"),w=j}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_edit_tsx.1264f567293a7c87c969dd25ac900bed.js.map