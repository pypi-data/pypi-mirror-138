{"version":3,"file":"chunks/app_views_settings_organizationProjects_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/utils/routeTitle.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/components/settingsProjectItem.tsx","webpack:///./app/views/settings/organizationProjects/projectStatsGraph.tsx","webpack:///./app/views/settings/organizationProjects/index.tsx"],"sourcesContent":["function routeTitleGen(\n  routeName: string,\n  orgSlug: string,\n  withSentry: boolean = true,\n  projectSlug?: string\n): string {\n  const tmplBase = `${routeName} - ${orgSlug}`;\n  const tmpl = projectSlug ? `${tmplBase} - ${projectSlug}` : tmplBase;\n\n  return withSentry ? `${tmpl} - Sentry` : tmpl;\n}\n\nexport default routeTitleGen;\n","import * as React from 'react';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import {Component} from 'react';\nimport styled from '@emotion/styled';\n\nimport ProjectBadge from 'sentry/components/idBadge/projectBadge';\nimport BookmarkStar from 'sentry/components/projects/bookmarkStar';\nimport space from 'sentry/styles/space';\nimport {Organization, Project} from 'sentry/types';\n\ntype Props = {\n  organization: Organization;\n  project: Project;\n};\n\ntype State = {\n  isBookmarked: boolean;\n};\n\nclass ProjectItem extends Component<Props, State> {\n  state: State = {\n    isBookmarked: this.props.project.isBookmarked,\n  };\n\n  handleToggleBookmark = (isBookmarked: State['isBookmarked']) => {\n    this.setState({isBookmarked});\n  };\n\n  render() {\n    const {project, organization} = this.props;\n\n    return (\n      <Wrapper>\n        <BookmarkLink\n          organization={organization}\n          project={project}\n          isBookmarked={this.state.isBookmarked}\n          onToggle={this.handleToggleBookmark}\n        />\n        <ProjectBadge\n          to={`/settings/${organization.slug}/projects/${project.slug}/`}\n          avatarSize={18}\n          project={project}\n        />\n      </Wrapper>\n    );\n  }\n}\n\nconst Wrapper = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst BookmarkLink = styled(BookmarkStar)`\n  margin-right: ${space(1)};\n  margin-top: -${space(0.25)};\n`;\n\nexport default ProjectItem;\n","import {Fragment} from 'react';\nimport LazyLoad from 'react-lazyload';\n\nimport MiniBarChart from 'sentry/components/charts/miniBarChart';\nimport {t} from 'sentry/locale';\nimport {Project} from 'sentry/types';\nimport {Series} from 'sentry/types/echarts';\n\ntype Props = {\n  project: Project;\n  stats?: Project['stats'];\n};\n\nconst ProjectStatsGraph = ({project, stats}: Props) => {\n  stats = stats || project.stats || [];\n  const series: Series[] = [\n    {\n      seriesName: t('Events'),\n      data: stats.map(point => ({name: point[0] * 1000, value: point[1]})),\n    },\n  ];\n\n  return (\n    <Fragment>\n      {series && (\n        <LazyLoad height={25} debounce={50}>\n          <MiniBarChart isGroupedByDate showTimeInTooltip series={series} height={25} />\n        </LazyLoad>\n      )}\n    </Fragment>\n  );\n};\n\nexport default ProjectStatsGraph;\n","import * as React from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\n\nimport Button from 'sentry/components/button';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport Pagination from 'sentry/components/pagination';\nimport {Panel, PanelBody, PanelHeader, PanelItem} from 'sentry/components/panels';\nimport Placeholder from 'sentry/components/placeholder';\nimport {IconAdd} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project} from 'sentry/types';\nimport {sortProjects} from 'sentry/utils';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport routeTitleGen from 'sentry/utils/routeTitle';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport AsyncView from 'sentry/views/asyncView';\nimport EmptyMessage from 'sentry/views/settings/components/emptyMessage';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\nimport ProjectListItem from 'sentry/views/settings/components/settingsProjectItem';\n\nimport ProjectStatsGraph from './projectStatsGraph';\n\nconst ITEMS_PER_PAGE = 50;\n\ntype Props = {\n  location: Location;\n  organization: Organization;\n} & RouteComponentProps<{orgId: string}, {}>;\n\ntype ProjectStats = Record<string, Required<Project['stats']>>;\n\ntype State = AsyncView['state'] & {\n  projectList: Project[] | null;\n  projectListPageLinks: string | null;\n  projectStats: ProjectStats | null;\n};\n\nclass OrganizationProjects extends AsyncView<Props, State> {\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {orgId} = this.props.params;\n    const {location} = this.props;\n    const query = decodeScalar(location.query.query);\n    return [\n      [\n        'projectList',\n        `/organizations/${orgId}/projects/`,\n        {\n          query: {\n            query,\n            per_page: ITEMS_PER_PAGE,\n          },\n        },\n      ],\n      [\n        'projectStats',\n        `/organizations/${orgId}/stats/`,\n        {\n          query: {\n            since: new Date().getTime() / 1000 - 3600 * 24,\n            stat: 'generated',\n            group: 'project',\n            per_page: ITEMS_PER_PAGE,\n          },\n        },\n      ],\n    ];\n  }\n\n  getTitle(): string {\n    const {organization} = this.props;\n    return routeTitleGen(t('Projects'), organization.slug, false);\n  }\n\n  renderLoading(): React.ReactNode {\n    return this.renderBody();\n  }\n\n  renderBody(): React.ReactNode {\n    const {projectList, projectListPageLinks, projectStats} = this.state;\n    const {organization} = this.props;\n    const canCreateProjects = new Set(organization.access).has('project:admin');\n\n    const action = (\n      <Button\n        priority=\"primary\"\n        size=\"small\"\n        disabled={!canCreateProjects}\n        title={\n          !canCreateProjects\n            ? t('You do not have permission to create projects')\n            : undefined\n        }\n        to={`/organizations/${organization.slug}/projects/new/`}\n        icon={<IconAdd size=\"xs\" isCircled />}\n      >\n        {t('Create Project')}\n      </Button>\n    );\n\n    return (\n      <React.Fragment>\n        <SettingsPageHeader title=\"Projects\" action={action} />\n        <SearchWrapper>\n          {this.renderSearchInput({\n            updateRoute: true,\n            placeholder: t('Search Projects'),\n            className: 'search',\n          })}\n        </SearchWrapper>\n        <Panel>\n          <PanelHeader>{t('Projects')}</PanelHeader>\n          <PanelBody>\n            {projectList ? (\n              sortProjects(projectList).map(project => (\n                <GridPanelItem key={project.id}>\n                  <ProjectListItemWrapper>\n                    <ProjectListItem project={project} organization={organization} />\n                  </ProjectListItemWrapper>\n                  <ProjectStatsGraphWrapper>\n                    {projectStats ? (\n                      <ProjectStatsGraph\n                        key={project.id}\n                        project={project}\n                        stats={projectStats[project.id]}\n                      />\n                    ) : (\n                      <Placeholder height=\"25px\" />\n                    )}\n                  </ProjectStatsGraphWrapper>\n                </GridPanelItem>\n              ))\n            ) : (\n              <LoadingIndicator />\n            )}\n            {projectList && projectList.length === 0 && (\n              <EmptyMessage>{t('No projects found.')}</EmptyMessage>\n            )}\n          </PanelBody>\n        </Panel>\n        {projectListPageLinks && (\n          <Pagination pageLinks={projectListPageLinks} {...this.props} />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withOrganization(OrganizationProjects);\n\nconst SearchWrapper = styled('div')`\n  margin-bottom: ${space(2)};\n`;\n\nconst GridPanelItem = styled(PanelItem)`\n  display: flex;\n  align-items: center;\n  padding: 0;\n`;\n\nconst ProjectListItemWrapper = styled('div')`\n  padding: ${space(2)};\n  flex: 1;\n`;\n\nconst ProjectStatsGraphWrapper = styled('div')`\n  padding: ${space(2)};\n  width: 25%;\n  margin-left: ${space(2)};\n`;\n"],"names":["routeName","orgSlug","withSentry","projectSlug","tmplBase","tmpl","AsyncView","AsyncComponent","getTitle","render","title","this","renderComponent","ProjectItem","Component","isBookmarked","props","project","setState","organization","Wrapper","BookmarkLink","state","onToggle","handleToggleBookmark","to","slug","avatarSize","BookmarkStar","space","ProjectStatsGraph","stats","series","seriesName","t","data","map","point","name","value","Fragment","height","debounce","isGroupedByDate","showTimeInTooltip","OrganizationProjects","getEndpoints","orgId","params","location","query","decodeScalar","per_page","since","Date","getTime","stat","group","routeTitleGen","renderLoading","renderBody","projectList","projectListPageLinks","projectStats","canCreateProjects","Set","access","has","action","priority","size","disabled","undefined","icon","isCircled","SearchWrapper","renderSearchInput","updateRoute","placeholder","className","sortProjects","GridPanelItem","ProjectListItemWrapper","ProjectStatsGraphWrapper","id","length","pageLinks","withOrganization","PanelItem"],"sourceRoot":""}