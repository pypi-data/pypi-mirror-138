(function(e){function t(t){for(var o,c,l=t[0],s=t[1],r=t[2],d=0,b=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&b.push(i[c][0]),i[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);u&&u(t);while(b.length)b.shift()();return a.push.apply(a,r||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,l=1;l<n.length;l++){var s=n[l];0!==i[s]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},i={app:0},a=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var r=0;r<l.length;r++)t(l[r]);var u=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0d53":function(e,t,n){},"1eca":function(e,t,n){},"2f0f":function(e,t,n){"use strict";n("0d53")},"44dc":function(e,t,n){"use strict";n("1eca")},bf99:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("830f"),i=n("5c40"),a={id:"app"};function c(e,t,n,o,c,l){var s=Object(i["w"])("MyComponent"),r=Object(i["w"])("WithStreamlitConnection");return Object(i["r"])(),Object(i["d"])("div",a,[Object(i["i"])(r,null,{default:Object(i["C"])((function(e){var t=e.args;return[Object(i["i"])(s,{args:t},null,8,["args"])]})),_:1})])}function l(e,t,n,o,a,c){var l=Object(i["w"])("Annotator");return Object(i["r"])(),Object(i["d"])("div",null,[Object(i["i"])(l,{options:e.args.data,"onUi-updated":e.onUIUpdated,"onSubmit-data":e.submitData},null,8,["options","onUi-updated","onSubmit-data"])])}var s=n("d092");function r(){Object(i["o"])((function(){s["a"].setFrameHeight()})),Object(i["q"])((function(){s["a"].setFrameHeight()}))}
/**
 * @license
 * Copyright 2018-2020 Streamlit Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n("caad"),n("2532");var u=n("9ff4"),d=Object(i["E"])("data-v-133ea214");Object(i["t"])("data-v-133ea214");var b={class:"container"},f={class:"menu"},p=Object(i["i"])("div",{class:"arrow"},null,-1),O={key:0,class:"submission"};Object(i["s"])();var h=d((function(e,t,n,a,c,l){return Object(i["r"])(),Object(i["d"])("div",b,[(Object(i["r"])(!0),Object(i["d"])(i["b"],null,Object(i["u"])(e.tokens,(function(t,n){return Object(i["r"])(),Object(i["d"])("div",{class:["token",{labeled:t.labels.length>0,selected:e.selectedToken===t}],key:n,"data-index":n,onClick:function(t){return e.onTokenClick(n,t)}},[e.isHorizontal?(Object(i["r"])(),Object(i["d"])("span",{key:0,class:"text",style:e.styleObjectToString(t.style)},Object(u["F"])(t.text),5)):Object(i["e"])("",!0),(Object(i["r"])(!0),Object(i["d"])(i["b"],null,Object(i["u"])(t.labels,(function(n,o){return Object(i["r"])(),Object(i["d"])("span",{key:o,class:["label",{vertical:!e.isHorizontal,horizontal:e.isHorizontal}],style:n in e.labelDict?e.styleObjectToString(e.labelDict[n].style):""},[Object(i["h"])(Object(u["F"])(n)+" ",1),e.allowEditing?(Object(i["r"])(),Object(i["d"])("span",{key:0,class:"delete-label",onClick:function(n){return e.deleteLabel(t,o,n)}},"Ã—",8,["onClick"])):Object(i["e"])("",!0)],6)})),128)),e.isHorizontal?Object(i["e"])("",!0):(Object(i["r"])(),Object(i["d"])("span",{key:1,class:"text",style:e.styleObjectToString(t.style)},Object(u["F"])(t.text),5))],10,["data-index","onClick"])})),128)),Object(i["D"])(Object(i["i"])("div",f,[p,(Object(i["r"])(!0),Object(i["d"])(i["b"],null,Object(i["u"])(e.labelValues,(function(t,n){return Object(i["r"])(),Object(i["d"])("a",{href:"#",class:["item",{"chosen-label":e.selectedToken&&e.selectedToken.labels.includes(t)}],key:n,onClick:function(n){return e.onMenuItemClick(t)},style:"static"===e.menuType&&t in e.labelDict?e.styleObjectToString(e.labelDict[t].style):""},Object(u["F"])(t),15,["onClick"])})),128))],512),[[o["b"],e.showMenu]]),e.submitMode&&e.isEdited?(Object(i["r"])(),Object(i["d"])("div",O,[Object(i["i"])("button",{onClick:t[1]||(t[1]=function(){return e.onSubmit.apply(e,arguments)}),title:"Submit changes"},"Submit"),Object(i["i"])("button",{onClick:t[2]||(t[2]=function(){return e.onReset.apply(e,arguments)}),title:"Discard and reset all changes"},"Reset")])):Object(i["e"])("",!0)])})),j=(n("99af"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("a434"),n("ac1f"),n("1276"),n("159b"),n("ade3")),m=n("b85c"),v=n("e20a"),y=n("b8ca"),k={name:"Annotator",props:["options"],data:function(){var e={allowEditing:!1,labelOrientation:"vertical",collectLabelsFromTokens:!0,menuType:"static",labels:[],tokens:[{text:"Tokens not found",labels:["Error!"]}]};return Object.assign(e,this.options),e["isEdited"]=!1,e["submitMode"]=!0,e["showMenu"]=!1,e["selectedToken"]=null,e["isHorizontal"]="horizontal"===e.labelOrientation,e.tokens.forEach((function(e){e.labels||(e.labels=[])})),e},computed:{labelValues:function(){return this.labels.map((function(e){return e.text}))},labelDict:function(){return this.labels.reduce((function(e,t){return e[t.text]=t,e}),{})}},methods:{styleObjectToString:function(e,t){if("undefined"===typeof t&&(t=!0),!e||!t)return"";var n="";for(var o in e)n+="".concat(o,":").concat(e[o],";");return n},onTokenClick:function(e,t){var n=this;this.allowEditing&&(this.showMenu=!0,t.target.classList.contains("delete-label")||this.resetSelectedToken(),this.selectedToken=this.tokens[e],this.$nextTick((function(){n.selectedToken["element"]=t.target.closest(".token");n.positionMenu();n.$emit("ui-updated")})))},resetSelectedToken:function(){this.selectedToken&&delete this.selectedToken.element,this.selectedToken=null},deleteLabel:function(e,t,n){e.labels.splice(t,1),this.isEdited=!0,this.resetSelectedToken(),this.selectedToken=e,this.$emit("labels-changed",e),this.$emit("ui-updated")},onMenuItemClick:function(e){var t=this;this.selectedToken.labels.includes(e)?this.selectedToken.labels.splice(this.selectedToken.labels.indexOf(e),1):this.selectedToken.labels.push(e),this.sortTokenLabels(this.selectedToken),this.isEdited=!0,this.$nextTick((function(){t.positionMenu(),t.$emit("menu-item-clicked"),t.$emit("ui-updated")}))},collectAllLabelsFromTokens:function(){var e,t=Object(m["a"])(this.tokens);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.labels.length>0){var o,i=Object(m["a"])(n.labels);try{for(i.s();!(o=i.n()).done;){var a=o.value;this.labelValues.includes(a)||this.labels.push({text:a})}}catch(c){i.e(c)}finally{i.f()}}}}catch(c){t.e(c)}finally{t.f()}},setLabelColors:function(){var e,t=["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],n=["#000000","#ffffff"],o=[1,1,0,1,1,1,0,1,0,0,1,0,1,0,1,0,1,0,1,1],i=0,a=Object(m["a"])(this.labels);try{for(a.s();!(e=a.n()).done;){var c=e.value;if(c.style||(c.style={}),!("background-color"in c.style)&&!("color"in c.style)){var l={"background-color":t[i%20],color:n[o[i%20]]};Object.assign(c.style,l),i++}}}catch(s){a.e(s)}finally{a.f()}},sortTokenLabels:function(e){var t=this;e.labels.sort((function(e,n){return t.labelValues.indexOf(e)-t.labelValues.indexOf(n)}))},partialCopy:function(e,t){var n={};for(var o in e)t.includes(o)||(n[o]=e[o]);return n},getData:function(){var e,t=[],n=Object(m["a"])(this.tokens);try{for(n.s();!(e=n.n()).done;){var o=e.value,i=this.partialCopy(o,["element"]);t.push(i)}}catch(a){n.e(a)}finally{n.f()}return{tokens:t}},positionMenu:function(){if("dropdown"===this.menuType){var e=this.selectedToken.element,t=document.querySelector(".menu"),n=document.querySelector(".menu .arrow"),o=8;return Object.assign(n.style,{width:"".concat(o,"px"),height:"".concat(o,"px")}),v["a"](e,t,{placement:"bottom",middleware:[y["a"]({element:n}),y["c"](o/2)]}).then((function(e){var i=e.x,a=e.y,c=e.placement,l=e.middlewareData;Object.assign(t.style,{left:"".concat(i,"px"),top:"".concat(a,"px")});var s=l.arrow.x,r=l.arrow.y,u={top:"bottom",right:"left",bottom:"top",left:"right"}[c.split("-")[0]];Object.assign(n.style,Object(j["a"])({left:null!=s?"".concat(s,"px"):"",top:null!=r?"".concat(r,"px"):"",right:"",bottom:""},u,"".concat(-o/4,"px")))})),t.getBoundingClientRect()}},onSubmit:function(){this.$emit("submit-data",this.getData()),this.isEdited=!1},onReset:function(){this.labels=JSON.parse(JSON.stringify(this.originalData.labels)),this.tokens=JSON.parse(JSON.stringify(this.originalData.tokens)),this.isEdited=!1,this.$emit("ui-updated")}},created:function(){this.collectLabelsFromTokens&&this.collectAllLabelsFromTokens(),this.setLabelColors(),this.originalData=JSON.parse(JSON.stringify(this.$data))},mounted:function(){var e=this;if("static"===this.menuType){var t=document.querySelector(".menu");Object.assign(t.style,{position:"relative"}),t.classList.add("menu-static")}document.addEventListener("click",(function(t){t.target.closest(".menu")||t.target.closest(".token")||t.target.classList.contains("delete-label")||("dropdown"===e.menuType&&(e.showMenu=!1),e.showMenu=!1,e.resetSelectedToken())}))}};n("d016");k.render=h,k.__scopeId="data-v-133ea214";var g=k,T={name:"MyComponent",props:["args"],components:{Annotator:g},created:function(){r()},methods:{onUIUpdated:function(){console.log("updating"),setTimeout((function(){s["a"].setFrameHeight()}),0)},submitData:function(e){console.log(e),s["a"].setComponentValue(JSON.stringify(e))}}};T.render=l;var S=T,w=Object(i["E"])("data-v-bef81972");Object(i["t"])("data-v-bef81972");var x={key:0},E=Object(i["i"])("h1",{class:"err__title"},"Component Error",-1),C={class:"err__msg"};Object(i["s"])();var D=w((function(e,t,n,o,a,c){return Object(i["r"])(),Object(i["d"])("div",null,[""!=e.componentError?(Object(i["r"])(),Object(i["d"])("div",x,[E,Object(i["i"])("div",C,"Message: "+Object(u["F"])(e.componentError),1)])):null!=e.renderData?Object(i["v"])(e.$slots,"default",{key:1,args:e.renderData.args,disabled:e.renderData.disabled}):Object(i["e"])("",!0)])})),M=n("a1e9"),_=Object(i["j"])({name:"WithStreamlitConnection",setup:function(){var e=Object(M["i"])(void 0),t=Object(M["i"])(""),n=function(n){var o=n;e.value=o.detail,t.value=""};return Object(i["o"])((function(){s["a"].events.addEventListener(s["a"].RENDER_EVENT,n),s["a"].setComponentReady()})),Object(i["q"])((function(){""!=t.value&&s["a"].setFrameHeight()})),Object(i["p"])((function(){s["a"].events.removeEventListener(s["a"].RENDER_EVENT,n)})),Object(i["n"])((function(e){t.value=String(e)})),{renderData:e,componentError:t}}});n("44dc");_.render=D,_.__scopeId="data-v-bef81972";var L=_,F=Object(i["j"])({name:"App",components:{MyComponent:S,WithStreamlitConnection:L}});n("2f0f");F.render=c;var N=F;Object(o["a"])(N).mount("#app")},d016:function(e,t,n){"use strict";n("bf99")}});
//# sourceMappingURL=app.bd665572.js.map