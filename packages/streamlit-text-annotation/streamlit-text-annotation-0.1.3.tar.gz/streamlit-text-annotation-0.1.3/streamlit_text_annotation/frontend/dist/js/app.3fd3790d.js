(function(e){function t(t){for(var o,c,s=t[0],l=t[1],r=t[2],d=0,b=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&b.push(a[c][0]),a[c]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(b.length)b.shift()();return i.push.apply(i,r||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},i=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var r=0;r<s.length;r++)t(s[r]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0d53":function(e,t,n){},"1eca":function(e,t,n){},"2a84":function(e,t,n){"use strict";n("3432")},"2f0f":function(e,t,n){"use strict";n("0d53")},3432:function(e,t,n){},"44dc":function(e,t,n){"use strict";n("1eca")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("830f"),a=n("5c40"),i={id:"app"};function c(e,t,n,o,c,s){var l=Object(a["w"])("MyComponent"),r=Object(a["w"])("WithStreamlitConnection");return Object(a["r"])(),Object(a["d"])("div",i,[Object(a["i"])(r,null,{default:Object(a["C"])((function(e){var t=e.args;return[Object(a["i"])(l,{args:t},null,8,["args"])]})),_:1})])}function s(e,t,n,o,i,c){var s=Object(a["w"])("Annotator");return Object(a["r"])(),Object(a["d"])("div",null,[Object(a["i"])(s,{options:e.args.data,"onUi-updated":e.onUIUpdated,"onSubmit-data":e.submitData},null,8,["options","onUi-updated","onSubmit-data"])])}var l=n("d092");function r(){Object(a["o"])((function(){l["a"].setFrameHeight()})),Object(a["q"])((function(){l["a"].setFrameHeight()}))}
/**
 * @license
 * Copyright 2018-2020 Streamlit Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n("caad"),n("2532");var u=n("9ff4"),d=Object(a["E"])("data-v-260237ba");Object(a["t"])("data-v-260237ba");var b={class:"container"},f={key:0,class:"text"},p={key:1,class:"text"},O={class:"menu"},h=Object(a["i"])("div",{class:"arrow"},null,-1),j={key:0,class:"submission"};Object(a["s"])();var m=d((function(e,t,n,i,c,s){return Object(a["r"])(),Object(a["d"])("div",b,[(Object(a["r"])(!0),Object(a["d"])(a["b"],null,Object(a["u"])(e.tokens,(function(t,n){return Object(a["r"])(),Object(a["d"])("div",{class:["token",{labeled:t.labels.length>0,selected:e.selectedToken===t}],key:n,"data-index":n,onClick:function(t){return e.onTokenClick(n,t)}},[e.isHorizontal?(Object(a["r"])(),Object(a["d"])("span",f,Object(u["F"])(t.text),1)):Object(a["e"])("",!0),(Object(a["r"])(!0),Object(a["d"])(a["b"],null,Object(a["u"])(t.labels,(function(n,o){return Object(a["r"])(),Object(a["d"])("span",{key:o,class:["label",{vertical:!e.isHorizontal,horizontal:e.isHorizontal}],style:n in e.labelDict?e.styleObjectsToString(e.labelDict[n].style):""},[Object(a["h"])(Object(u["F"])(n)+" ",1),e.allowEditing?(Object(a["r"])(),Object(a["d"])("span",{key:0,class:"delete-label",onClick:function(n){return e.deleteLabel(t,o,n)}},"Ã—",8,["onClick"])):Object(a["e"])("",!0)],6)})),128)),e.isHorizontal?Object(a["e"])("",!0):(Object(a["r"])(),Object(a["d"])("span",p,Object(u["F"])(t.text),1))],10,["data-index","onClick"])})),128)),Object(a["D"])(Object(a["i"])("div",O,[h,(Object(a["r"])(!0),Object(a["d"])(a["b"],null,Object(a["u"])(e.labelValues,(function(t,n){return Object(a["r"])(),Object(a["d"])("a",{href:"#",class:["item",{"chosen-label":e.selectedToken&&e.selectedToken.labels.includes(t)}],key:n,onClick:function(n){return e.onMenuItemClick(t)},style:"static"===e.menuType&&t in e.labelDict?e.styleObjectsToString(e.labelDict[t].style):""},Object(u["F"])(t),15,["onClick"])})),128))],512),[[o["b"],e.showMenu]]),e.submitMode&&e.isEdited?(Object(a["r"])(),Object(a["d"])("div",j,[Object(a["i"])("button",{onClick:t[1]||(t[1]=function(){return e.onSubmit.apply(e,arguments)}),title:"Submit changes"},"Submit"),Object(a["i"])("button",{onClick:t[2]||(t[2]=function(){return e.onReset.apply(e,arguments)}),title:"Discard and reset all changes"},"Reset")])):Object(a["e"])("",!0)])})),v=(n("99af"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("a434"),n("ac1f"),n("1276"),n("159b"),n("ade3")),y=n("b85c"),k=n("e20a"),g=n("b8ca"),T={name:"Annotator",props:["options"],data:function(){var e={allowEditing:!1,labelOrientation:"vertical",collectLabelsFromTokens:!0,menuType:"static",labels:[],tokens:[{text:"Tokens not found",labels:["Error!"]}]};return Object.assign(e,this.options),e["isEdited"]=!1,e["submitMode"]=!0,e["showMenu"]=!1,e["selectedToken"]=null,e["isHorizontal"]="horizontal"===e.labelOrientation,e.tokens.forEach((function(e){e.labels||(e.labels=[])})),e},computed:{labelValues:function(){return this.labels.map((function(e){return e.text}))},labelDict:function(){return this.labels.reduce((function(e,t){return e[t.text]=t,e}),{})}},methods:{styleObjectsToString:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){if(!t)return e;for(var n in t)e+="".concat(n,": ").concat(t[n],"; ");return e}),"")},onTokenClick:function(e,t){var n=this;this.allowEditing&&(this.showMenu=!0,t.target.classList.contains("delete-label")||this.resetSelectedToken(),this.selectedToken=this.tokens[e],this.$nextTick((function(){n.selectedToken["element"]=t.target.closest(".token");n.positionMenu();n.$emit("ui-updated")})))},resetSelectedToken:function(){this.selectedToken&&delete this.selectedToken.element,this.selectedToken=null},deleteLabel:function(e,t,n){e.labels.splice(t,1),this.isEdited=!0,this.resetSelectedToken(),this.selectedToken=e,this.$emit("labels-changed",e),this.$emit("ui-updated")},onMenuItemClick:function(e){var t=this;this.selectedToken.labels.includes(e)?this.selectedToken.labels.splice(this.selectedToken.labels.indexOf(e),1):this.selectedToken.labels.push(e),this.sortTokenLabels(this.selectedToken),this.isEdited=!0,this.$nextTick((function(){t.positionMenu(),t.$emit("menu-item-clicked"),t.$emit("ui-updated")}))},collectAllLabelsFromTokens:function(){var e,t=Object(y["a"])(this.tokens);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.labels.length>0){var o,a=Object(y["a"])(n.labels);try{for(a.s();!(o=a.n()).done;){var i=o.value;this.labelValues.includes(i)||this.labels.push({text:i})}}catch(c){a.e(c)}finally{a.f()}}}}catch(c){t.e(c)}finally{t.f()}},setLabelColors:function(){var e,t=["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],n=["#000000","#ffffff"],o=[1,1,0,1,1,1,0,1,0,0,1,0,1,0,1,0,1,0,1,1],a=0,i=Object(y["a"])(this.labels);try{for(i.s();!(e=i.n()).done;){var c=e.value;if(c.style||(c.style={}),!("background-color"in c.style)&&!("color"in c.style)){var s={"background-color":t[a%20],color:n[o[a%20]]};Object.assign(c.style,s),a++}}}catch(l){i.e(l)}finally{i.f()}},sortTokenLabels:function(e){var t=this;e.labels.sort((function(e,n){return t.labelValues.indexOf(e)-t.labelValues.indexOf(n)}))},partialCopy:function(e,t){var n={};for(var o in e)t.includes(o)||(n[o]=e[o]);return n},getData:function(){var e,t=[],n=Object(y["a"])(this.tokens);try{for(n.s();!(e=n.n()).done;){var o=e.value,a=this.partialCopy(o,["element"]);t.push(a)}}catch(i){n.e(i)}finally{n.f()}return{tokens:t}},positionMenu:function(){if("dropdown"===this.menuType){var e=this.selectedToken.element,t=document.querySelector(".menu"),n=document.querySelector(".menu .arrow"),o=8;return Object.assign(n.style,{width:"".concat(o,"px"),height:"".concat(o,"px")}),k["a"](e,t,{placement:"bottom",middleware:[g["a"]({element:n}),g["c"](o/2)]}).then((function(e){var a=e.x,i=e.y,c=e.placement,s=e.middlewareData;Object.assign(t.style,{left:"".concat(a,"px"),top:"".concat(i,"px")});var l=s.arrow.x,r=s.arrow.y,u={top:"bottom",right:"left",bottom:"top",left:"right"}[c.split("-")[0]];Object.assign(n.style,Object(v["a"])({left:null!=l?"".concat(l,"px"):"",top:null!=r?"".concat(r,"px"):"",right:"",bottom:""},u,"".concat(-o/4,"px")))})),t.getBoundingClientRect()}},onSubmit:function(){this.$emit("submit-data",this.getData()),this.isEdited=!1},onReset:function(){this.labels=JSON.parse(JSON.stringify(this.originalData.labels)),this.tokens=JSON.parse(JSON.stringify(this.originalData.tokens)),this.isEdited=!1,this.$emit("ui-updated")}},created:function(){this.collectLabelsFromTokens&&this.collectAllLabelsFromTokens(),this.setLabelColors(),this.originalData=JSON.parse(JSON.stringify(this.$data))},mounted:function(){var e=this;if("static"===this.menuType){var t=document.querySelector(".menu");Object.assign(t.style,{position:"relative"}),t.classList.add("menu-static")}document.addEventListener("click",(function(t){t.target.closest(".menu")||t.target.closest(".token")||t.target.classList.contains("delete-label")||("dropdown"===e.menuType&&(e.showMenu=!1),e.showMenu=!1,e.resetSelectedToken())}))}};n("2a84");T.render=m,T.__scopeId="data-v-260237ba";var S=T,w={name:"MyComponent",props:["args"],components:{Annotator:S},created:function(){r()},methods:{onUIUpdated:function(){console.log("updating"),setTimeout((function(){l["a"].setFrameHeight()}),0)},submitData:function(e){console.log(e),l["a"].setComponentValue(JSON.stringify(e))}}};w.render=s;var x=w,E=Object(a["E"])("data-v-bef81972");Object(a["t"])("data-v-bef81972");var C={key:0},D=Object(a["i"])("h1",{class:"err__title"},"Component Error",-1),M={class:"err__msg"};Object(a["s"])();var _=E((function(e,t,n,o,i,c){return Object(a["r"])(),Object(a["d"])("div",null,[""!=e.componentError?(Object(a["r"])(),Object(a["d"])("div",C,[D,Object(a["i"])("div",M,"Message: "+Object(u["F"])(e.componentError),1)])):null!=e.renderData?Object(a["v"])(e.$slots,"default",{key:1,args:e.renderData.args,disabled:e.renderData.disabled}):Object(a["e"])("",!0)])})),L=n("a1e9"),F=Object(a["j"])({name:"WithStreamlitConnection",setup:function(){var e=Object(L["i"])(void 0),t=Object(L["i"])(""),n=function(n){var o=n;e.value=o.detail,t.value=""};return Object(a["o"])((function(){l["a"].events.addEventListener(l["a"].RENDER_EVENT,n),l["a"].setComponentReady()})),Object(a["q"])((function(){""!=t.value&&l["a"].setFrameHeight()})),Object(a["p"])((function(){l["a"].events.removeEventListener(l["a"].RENDER_EVENT,n)})),Object(a["n"])((function(e){t.value=String(e)})),{renderData:e,componentError:t}}});n("44dc");F.render=_,F.__scopeId="data-v-bef81972";var N=F,$=Object(a["j"])({name:"App",components:{MyComponent:x,WithStreamlitConnection:N}});n("2f0f");$.render=c;var H=$;Object(o["a"])(H).mount("#app")}});
//# sourceMappingURL=app.3fd3790d.js.map