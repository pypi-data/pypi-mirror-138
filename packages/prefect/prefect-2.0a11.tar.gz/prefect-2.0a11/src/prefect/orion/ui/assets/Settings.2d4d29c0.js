var F=Object.defineProperty,U=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var D=(e,t,s)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,C=(e,t)=>{for(var s in t||(t={}))z.call(t,s)&&D(e,s,t[s]);if(x)for(var s of x(t))K.call(t,s)&&D(e,s,t[s]);return e},w=(e,t)=>U(e,B(t));var m=(e,t,s)=>(D(e,typeof t!="symbol"?t+"":t,s),s);import{U as I,V as R,r as S,o as r,x as P,w as f,d as o,t as p,c as l,v as b,X as A,F as g,p as q,b as E,a as $,j as N,q as v}from"./vendor.3aa9d18a.js";import{_ as T,A as O,E as j}from"./index.5b9a0170.js";var X=Object.defineProperty,G=Object.getOwnPropertyDescriptor,H=(e,t,s,a)=>{for(var n=a>1?void 0:a?G(t,s):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,s,n):c(n))||n);return a&&n&&X(t,s,n),n};const J=["cancelled","completed","failed","pending","running","scheduled"],L="orion-color-mode";let k=class extends R{constructor(){super(...arguments);m(this,"colorMode",localStorage.getItem(L)||"Default");m(this,"colorModes",["Default","Achromatomaly","Achromatopsia","Protanomaly","Protaponia","Deuteranomaly","Deuteranopia","Tritanomaly","Tritanopia"]);m(this,"colorMap",{})}showToast(e){this.$toast(w(C({},e),{timeout:1e4}))}mounted(){const e=window.getComputedStyle(document.documentElement);this.colorModes.forEach(t=>{const s=t.toLowerCase();this.colorMap[t]=[],J.forEach(a=>{const n=`--${a}-${s}`,i=e.getPropertyValue(n);i&&this.colorMap[t].push(i)})})}};k=H([I({components:{},watch:{colorMode(e){localStorage.setItem(L,e),document.body.classList.forEach(s=>{s.includes("-color-mode")&&document.body.classList.remove(s)}),document.body.classList.add(e.toLowerCase()+"-color-mode"),this.showToast({type:"success",message:"Color theme saved"})}}})],k);const Q=k,W=e=>(q("data-v-376aa2db"),e=e(),E(),e),Y={class:"theme-option d-flex align-center"},Z=W(()=>o("i",{class:"pi pi-palette-line mr-1"},null,-1)),ee={class:"theme-option__label"},te={class:"theme-palette ml-auto"},se={class:"theme-option d-flex align-center"},oe={class:"theme-option__label"},ne={class:"theme-palette ml-auto"};function ae(e,t,s,a,n,i){const c=S("m-simple-select");return r(),P(c,{modelValue:e.colorMode,"onUpdate:modelValue":t[0]||(t[0]=d=>e.colorMode=d),options:e.colorModes,search:""},{"selected-option-label":f(({label:d})=>[o("div",Y,[Z,o("span",ee,p(d),1),o("div",te,[(r(!0),l(g,null,b(e.colorMap[e.colorMode],u=>(r(),l("div",{key:u,class:"palette-option",style:A({"background-color":u})},null,4))),128))])])]),"option-label":f(({label:d})=>[o("div",se,[o("span",oe,p(d),1),o("div",ne,[(r(!0),l(g,null,b(e.colorMap[d],u=>(r(),l("div",{key:u,class:"palette-option",style:A({"background-color":u})},null,4))),128))])])]),_:1},8,["modelValue","options"])}var re=T(Q,[["render",ae],["__scopeId","data-v-376aa2db"]]);var le=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,ce=(e,t,s,a)=>{for(var n=a>1?void 0:a?ie(t,s):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,s,n):c(n))||n);return a&&n&&le(t,s,n),n};let V=class extends R{constructor(){super(...arguments);m(this,"queries",{settings:O.query({endpoint:j.settings}),version:O.query({endpoint:j.version})});m(this,"resetDatabaseConfirmation","");m(this,"showResetSection",!1)}get settings(){return this.queries.settings.response}get version(){return this.queries.version.response}get settingsSections(){if(!this.settings)return[];const e=w(C({},this.settings),{base:{}});return Object.entries(e).forEach(([t,s])=>{this.objectCheck(s)?e[t]=s:(e.base[t]=s,delete e[t])}),this.flatten(Object.entries(e)).sort((t,s)=>t.key.toUpperCase().localeCompare(s.key.toUpperCase()))}async resetDatabase(){const e=await O.query({endpoint:j.database_clear,body:{confirm:!0}}).fetch();this.showToast({type:e.error?"error":"success",message:e.error?e.error:"Database reset"})}showToast(e){this.$toast(w(C({},e),{timeout:5e3}))}objectCheck(e){return e&&typeof e=="object"&&!Array.isArray(e)}flatten(e){return e.reduce((t,[s,a])=>{const n={key:s,content:void 0};return this.objectCheck(a)?n.content=this.flatten(Object.entries(a)):n.content=a,t.push(n),t},[])}};V=ce([I({components:{StateColorModeSelector:re}})],V);const de=V,h=e=>(q("data-v-748b4430"),e=e(),E(),e),pe={class:"d-flex align-center justify-space-between"},ue=h(()=>o("span",{class:"d-flex align-center"},[o("i",{class:"pi pi-settings-3-line pi-2x text--grey-40"}),o("h1",{class:"ml-1"},"Settings")],-1)),_e={class:"font-weight-semibold"},me=h(()=>o("span",{class:"text--grey-40"},"Orion Version:",-1)),he={class:"ml-1"},ye={class:"mt-4"},fe=h(()=>o("h3",{class:"font-weight-semibold my-1"},"Color theme",-1)),be={class:"font-weight-semibold setting--section-title my-1"},ge={class:"setting--section-content font--secondary caption"},ve={class:"pa-2"},Ce={key:0},we={class:"ml-1"},Se={key:1},$e={class:"ml-1"},Me={class:"my-4"},De=h(()=>o("h3",{class:"font-weight-semibold"},"Reset database",-1)),Oe=h(()=>o("div",{class:"d-flex align-end my-1 text--error"},[o("i",{class:"pi pi-error-warning-line pi-lg"}),o("span",{class:"ml-1"}," Resetting the database will permanently delete all data stored in Orion ")],-1)),je=v(" Reset "),ke={key:1},Ve=h(()=>o("div",null," Are you sure you want to permanently delete your data? ",-1)),xe=h(()=>o("div",null,[v(" If so, type the word "),o("span",{class:"text--error"},"CONFIRM"),v(" to proceed. ")],-1)),Ie=v(" Reset Database "),Re=v(" Cancel ");function Pe(e,t,s,a,n,i){const c=S("StateColorModeSelector"),d=S("m-button"),u=S("m-input");return r(),l("div",null,[o("header",pe,[ue,o("span",_e,[me,o("span",he,p(e.version),1)])]),o("section",ye,[fe,$(c)]),(r(!0),l(g,null,b(e.settingsSections,_=>(r(),l("section",{key:_.label,class:"mt-4 setting--section my-2"},[o("h3",be,p(_.key),1),o("section",ge,[o("div",ve,[(r(!0),l(g,null,b(_.content,y=>(r(),l("div",{key:y.key},[Array.isArray(y.content)?(r(),l("div",Ce,[(r(!0),l(g,null,b(y.content,M=>(r(),l("section",{key:M.key,class:"setting--section-subsection"},[o("span",null,p(M.key)+":",1),o("span",we,p(M.content),1)]))),128))])):(r(),l("div",Se,[o("span",null,p(y.key)+":",1),o("span",$e,p(y.content),1)]))]))),128))])])]))),128)),o("section",Me,[De,Oe,e.showResetSection?N("",!0):(r(),P(d,{key:0,color:"delete",height:"36px",width:"100px",class:"mt-1",onClick:t[0]||(t[0]=_=>e.showResetSection=!0),miter:""},{default:f(()=>[je]),_:1})),e.showResetSection?(r(),l("section",ke,[Ve,xe,$(u,{modelValue:e.resetDatabaseConfirmation,"onUpdate:modelValue":t[1]||(t[1]=_=>e.resetDatabaseConfirmation=_),placeholder:"CONFIRM",class:"my-2",style:{"max-width":"400px"}},null,8,["modelValue"]),o("div",null,[$(d,{color:"delete",height:"36px",disabled:e.resetDatabaseConfirmation!=="CONFIRM",miter:"",onClick:e.resetDatabase},{default:f(()=>[Ie]),_:1},8,["disabled","onClick"]),$(d,{color:"secondary",height:"36px",width:"100px",class:"ml-2",miter:"",onClick:t[2]||(t[2]=_=>e.showResetSection=!1)},{default:f(()=>[Re]),_:1})])])):N("",!0)])])}var Ne=T(de,[["render",Pe],["__scopeId","data-v-748b4430"]]);export{Ne as default};
