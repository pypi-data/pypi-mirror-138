from invenio_db import db
from invenio_records.models import RecordMetadataBase
from invenio_communities.records.records.models import CommunityRelationMixin


{% for b in python.record_metadata_bases %}
from {{ b|package_name }} import {{ b|base_name }}
{% endfor %}

class {{ python.record_metadata_class|base_name }}({% for b in python.record_metadata_bases %}{{ b|base_name }}, {% endfor %}db.Model, RecordMetadataBase):
    """Model for {{ python.record_class|base_name }} metadata."""

    __tablename__ = "{{ python.record_metadata_table_name }}"

    # Enables SQLAlchemy-Continuum versioning
    __versioned__ = {}


class Community{{ python.record_metadata_class|base_name }}(db.Model, CommunityRelationMixin):
    """Model for Community to {{ python.record_class|base_name }} mapping."""
    __tablename__ = 'communities_{{ python.record_metadata_table_name }}'
    __record_model__ = {{ python.record_metadata_class|base_name }}
    # __request_model__ = RequestMetadata
