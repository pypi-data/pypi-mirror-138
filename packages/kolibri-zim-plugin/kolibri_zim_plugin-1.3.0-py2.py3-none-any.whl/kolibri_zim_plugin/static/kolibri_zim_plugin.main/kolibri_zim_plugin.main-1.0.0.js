!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=33)}([function(module,exports){module.exports=kolibriCoreAppGlobal.urls},function(module,exports){module.exports=kolibriCoreAppGlobal},function(module,exports,__webpack_require__){var isObject=__webpack_require__(3),now=__webpack_require__(16),toNumber=__webpack_require__(19),nativeMax=Math.max,nativeMin=Math.min;module.exports=function(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function(){return void 0===timerId?result:trailingEdge(now())},debounced}},function(module,exports){module.exports=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(17),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(4).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports){module.exports=kolibriCoreAppGlobal.coreVue.components.CoreFullscreen},function(module,exports){module.exports=kolibriCoreAppGlobal.coreVue.components.TechnicalTextBlock},function(module,exports){module.exports=kolibriCoreAppGlobal.lib.apiResource},function(module,exports){module.exports=kolibriCoreAppGlobal.coreVue.mixins.commonCoreStrings},function(module,exports,__webpack_require__){var root=__webpack_require__(4);module.exports=function(){return root.Date.now()}},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(18))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){var baseTrim=__webpack_require__(20),isObject=__webpack_require__(3),isSymbol=__webpack_require__(22),reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}},function(module,exports,__webpack_require__){var trimmedEndIndex=__webpack_require__(21),reTrimStart=/^\s+/;module.exports=function(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}},function(module,exports){var reWhitespace=/\s/;module.exports=function(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(23),isObjectLike=__webpack_require__(26);module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(5),getRawTag=__webpack_require__(24),objectToString=__webpack_require__(25),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(5),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},function(module,exports){module.exports=function(value){return null!=value&&"object"==typeof value}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(6)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(7)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(8)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(9)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(10)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(11)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return zimModule}));var urls,external_kolibriCoreAppGlobal_=__webpack_require__(1),external_kolibriCoreAppGlobal_default=__webpack_require__.n(external_kolibriCoreAppGlobal_),external_kolibriCoreAppGlobal_urls_=__webpack_require__(0),external_kolibriCoreAppGlobal_urls_default=__webpack_require__.n(external_kolibriCoreAppGlobal_urls_);urls=external_kolibriCoreAppGlobal_urls_default.a,__webpack_require__.p=urls.static("kolibri_zim_plugin.main/");var KolibriModule=function(options){for(var ref,args=[],len=arguments.length-1;len-- >0;)args[len]=arguments[len+1];this.name="kolibri_zim_plugin.main";var safeOptions={};this.kolibriModuleOptions.forEach((function(option){options[option]&&(safeOptions[option]=options[option])})),Object.assign(this,safeOptions),(ref=this).initialize.apply(ref,[options].concat(args)),this._registerKolibriModule()},kolibri_module_prototypeAccessors={kolibriModuleOptions:{configurable:!0},Kolibri:{configurable:!0}};kolibri_module_prototypeAccessors.kolibriModuleOptions.get=function(){return[]},KolibriModule.prototype._registerKolibriModule=function(){external_kolibriCoreAppGlobal_default.a.registerKolibriModuleSync(this)},KolibriModule.prototype.initialize=function(){},KolibriModule.prototype.ready=function(){},KolibriModule.prototype.stopListening=function(event,method){external_kolibriCoreAppGlobal_default.a.stopListening(event,this,method)},KolibriModule.prototype.emit=function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];external_kolibriCoreAppGlobal_default.a.emit.apply(external_kolibriCoreAppGlobal_default.a,args)},kolibri_module_prototypeAccessors.Kolibri.get=function(){return external_kolibriCoreAppGlobal_default.a},Object.defineProperties(KolibriModule.prototype,kolibri_module_prototypeAccessors);var content_renderer_module=function(KolibriModule){function ContentRenderer(){KolibriModule.apply(this,arguments)}KolibriModule&&(ContentRenderer.__proto__=KolibriModule),ContentRenderer.prototype=Object.create(KolibriModule&&KolibriModule.prototype),ContentRenderer.prototype.constructor=ContentRenderer;var prototypeAccessors={rendererComponent:{configurable:!0}};return prototypeAccessors.rendererComponent.get=function(){return null},ContentRenderer.prototype.loadDirectionalCSS=function(direction){return this.Kolibri.loadDirectionalCSS(this,direction)},Object.defineProperties(ContentRenderer.prototype,prototypeAccessors),ContentRenderer}(KolibriModule),external_kolibriCoreAppGlobal_coreVue_components_CoreFullscreen_=__webpack_require__(12),external_kolibriCoreAppGlobal_coreVue_components_CoreFullscreen_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_CoreFullscreen_),debounce=__webpack_require__(2),debounce_default=__webpack_require__.n(debounce),views_ZimBreadcrumbsMenuvue_type_script_lang_js_={name:"ZimBreadcrumbsMenu",components:{},props:{breadcrumbs:{type:Array},currentUrl:{type:String}},computed:{visibleBreadcrumbs:function(){return this.breadcrumbs.slice(-4)}},methods:{breadcrumbIsEnabled:function(breadcrumb){return void 0!==breadcrumb.href&&breadcrumb.href!==this.currentUrl}},$trs:{}};__webpack_require__(27);function normalizeComponent(scriptExports,render,staticRenderFns,functionalTemplate,injectStyles,scopeId,moduleIdentifier,shadowMode){var hook,options="function"==typeof scriptExports?scriptExports.options:scriptExports;if(render&&(options.render=render,options.staticRenderFns=staticRenderFns,options._compiled=!0),functionalTemplate&&(options.functional=!0),scopeId&&(options._scopeId="data-v-"+scopeId),moduleIdentifier?(hook=function(context){(context=context||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(context=__VUE_SSR_CONTEXT__),injectStyles&&injectStyles.call(this,context),context&&context._registeredComponents&&context._registeredComponents.add(moduleIdentifier)},options._ssrRegister=hook):injectStyles&&(hook=shadowMode?function(){injectStyles.call(this,(options.functional?this.parent:this).$root.$options.shadowRoot)}:injectStyles),hook)if(options.functional){options._injectStyles=hook;var originalRender=options.render;options.render=function(h,context){return hook.call(context),originalRender(h,context)}}else{var existing=options.beforeCreate;options.beforeCreate=existing?[].concat(existing,hook):[hook]}return{exports:scriptExports,options:options}}var ZimBreadcrumbsMenu=normalizeComponent(views_ZimBreadcrumbsMenuvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("transition-group",{attrs:{name:"zim-breadcrumbs-fade",mode:"out-in",tag:"ol"}},[_vm._l(_vm.visibleBreadcrumbs,(function(breadcrumb,index){return[_c("li",{key:index,ref:"breadcrumb"+index,refInFor:!0,staticClass:"zim-breadcrumb-item"},[_c("KButton",{staticClass:"zim-breadcrumb-button",attrs:{primary:!1,appearance:"flat-button",text:breadcrumb.title,title:breadcrumb.title,disabled:!_vm.breadcrumbIsEnabled(breadcrumb)},on:{click:function($event){return _vm.$emit("activate",breadcrumb)}}})],1)]}))],2)}),[],!1,null,"643fb1ed",null).exports,views_ZimContentViewvue_type_script_lang_js_={name:"ZimContentView",components:{},props:{zimFilename:{type:String}},computed:{indexUrl:function(){return external_kolibriCoreAppGlobal_urls_default.a.zim_index(this.zimFilename)}},methods:{navigateToUrl:function(url){this.$refs.iframe.contentWindow.location=url},navigateToArticle:function(path){this.$refs.iframe.contentWindow.location=this.articleUrl(path)},onIframeLoad:function(){try{this.$refs.iframe.contentWindow.removeEventListener("unload",this.onIframeUnload),this.$refs.iframe.contentWindow.addEventListener("unload",this.onIframeUnload)}catch(DOMException){}this.onIframeLocationChanged()},onIframeUnload:function(){setTimeout(this.onIframeLocationChanged,0)},onIframeLocationChanged:function(){var href,title,isLoading,isExternal,contentDocument=this.$refs.iframe.contentDocument,contentWindow=this.$refs.iframe.contentWindow;try{href=contentWindow.location.href}catch(DOMException){href=void 0}contentDocument&&"loading"==contentDocument.readyState?(title="…",isLoading=!0):contentDocument?title=contentDocument.title:(title="…",isExternal=!0),this.$emit("onnavigate",{href:href,title:title,isLoading:isLoading,isExternal:isExternal})},articleUrl:function(path){return external_kolibriCoreAppGlobal_urls_default.a.zim_article(this.zimFilename,path)}},$trs:{}},ZimContentView=(__webpack_require__(28),normalizeComponent(views_ZimContentViewvue_type_script_lang_js_,(function(){var _h=this.$createElement;return(this._self._c||_h)("iframe",{ref:"iframe",staticClass:"iframe",style:{backgroundColor:this.$themePalette.white},attrs:{sandbox:"allow-scripts allow-same-origin",frameBorder:"0",src:this.indexUrl},on:{load:this.onIframeLoad}})}),[],!1,null,"2d07466b",null).exports),external_kolibriCoreAppGlobal_coreVue_components_TechnicalTextBlock_=__webpack_require__(13),external_kolibriCoreAppGlobal_coreVue_components_TechnicalTextBlock_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_TechnicalTextBlock_),zimSearchResource=new(__webpack_require__(14).Resource)({name:"zim",search:function(zim_filename,ref){var query=ref.query,start=ref.start,max_results=ref.max_results,suggest=ref.suggest,url=external_kolibriCoreAppGlobal_urls_default.a.zim_search(zim_filename);return this.client({url:url,method:"get",params:{query:query,start:start,max_results:max_results,suggest:suggest}})}}),external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_=__webpack_require__(15),views_ZimSearchFormvue_type_script_lang_js_={name:"ZimSearchForm",components:{},mixins:[__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_).a],props:{icon:{type:String,default:"search",validator:function(val){return["search","forward"].includes(val)}}},data:function(){return{searchInputValue:"",lastSubmitValue:""}},computed:{searchBarDisabled:function(){return this.searchInputValue===this.lastSubmitValue}},watch:{searchInputValue:function(value){this.$emit("input",value)}},mounted:function(){},beforeDestroy:function(){},methods:{focus:function(){this.$refs.searchInput.focus()},getInput:function(){return this.searchInputValue},onEscKeyDown:function(){""===this.searchInputValue?this.$emit("cancel"):this.clearInput()},onClearButtonClick:function(){this.clearInput(),this.$refs.searchInput.focus()},onSubmit:function(){this.lastSubmitValue=this.searchInputValue,this.searchInputValue?this.$emit("submit",this.searchInputValue):this.$emit("reset")},clearInput:function(){this.searchInputValue="",this.lastSubmitValue="",this.$emit("reset")}},$trs:{clearButtonLabel:"Clear",startSearchButtonLabel:"Start search",searchPlaceholder:"Search for an article"}},views_ZimSearchViewvue_type_script_lang_js_=(__webpack_require__(29),{name:"ZimSearchView",components:{ZimSearchForm:normalizeComponent(views_ZimSearchFormvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("form",{staticClass:"search-box",on:{submit:function($event){return $event.preventDefault(),_vm.onSubmit.apply(null,arguments)},keydown:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"esc",27,$event.key,["Esc","Escape"])?null:($event.preventDefault(),_vm.onEscKeyDown.apply(null,arguments))}}},[_c("div",{staticClass:"search-box-row",style:{backgroundColor:_vm.$themeTokens.surface,borderColor:_vm.$themePalette.grey.v_300,fontSize:"16px"}},[_c("label",{staticClass:"visuallyhidden",attrs:{for:"search-input"}},[_vm._v(_vm._s(_vm.coreString("searchLabel")))]),_c("input",{directives:[{name:"model",rawName:"v-model.trim",value:_vm.searchInputValue,expression:"searchInputValue",modifiers:{trim:!0}}],ref:"searchInput",staticClass:"search-input",attrs:{type:"search",name:"search-input",dir:"auto",autocomplete:"off",placeholder:_vm.$tr("searchPlaceholder")},domProps:{value:_vm.searchInputValue},on:{input:function($event){$event.target.composing||(_vm.searchInputValue=$event.target.value.trim())},blur:function($event){return _vm.$forceUpdate()}}}),_c("div",{staticClass:"search-buttons-wrapper"},[_c("KIconButton",{staticClass:"search-clear-button",class:""===_vm.searchInputValue?"":"search-clear-button-visible",attrs:{icon:"clear",color:_vm.$themeTokens.text,size:"small",ariaLabel:_vm.$tr("clearButtonLabel")},on:{click:_vm.onClearButtonClick}}),_c("div",{staticClass:"search-submit-button-wrapper",style:{backgroundColor:_vm.$themeTokens.primaryDark}},[_c("KIconButton",{staticClass:"search-submit-button",class:{"rtl-icon":"forward"===_vm.icon&&_vm.isRtl},style:{fill:_vm.$themeTokens.textInverted},attrs:{icon:_vm.icon,color:"white",disabled:_vm.searchBarDisabled,ariaLabel:_vm.$tr("startSearchButtonLabel"),type:"submit"}})],1)],1)])])}),[],!1,null,"8af7f686",null).exports,TechnicalTextBlock:external_kolibriCoreAppGlobal_coreVue_components_TechnicalTextBlock_default.a},props:{zimFilename:{type:String}},data:function(){return{isSearchMoreWaiting:0,isSearchWaiting:0,searchResults:{},suggestResults:{}}},computed:{searchHasMore:function(){return this.searchResults.next},remainingResults:function(){return this.searchResults.next?this.searchResults.count-this.searchResults.next:0},startSuggestDebounced:function(){return debounce_default()(this.startSuggest,500)}},beforeDestroy:function(){this.startSuggestDebounced.cancel()},methods:{focus:function(){this.$refs.searchForm.focus()},onSearchFormReset:function(){this.suggestResults={},this.searchResults={}},onSearchFormInput:function(){this.startSuggestDebounced()},onSearchFormSubmit:function(query){var this$1=this;this.isSearchWaiting+=1,this.startSearch(query).finally((function(){this$1.isSearchWaiting-=1}))},onSearchMoreClick:function(){var this$1=this;this.isSearchMoreWaiting+=1,this.startSearch(this.searchResults.query,this.searchResults.next).finally((function(){this$1.isSearchMoreWaiting-=1}))},startSuggest:function(){var this$1=this,query=this.$refs.searchForm.getInput();if(!(query.length<3))return zimSearchResource.search(this.zimFilename,{query:query,max_results:20,suggest:!0}).then((function(result){if(this$1.$refs.searchForm.getInput()===query){var articles=result.data.articles;this$1.suggestResults={query:query,articles:this$1.filterDuplicateArticles(articles,5),success:!0}}})).catch((function(error){console.log("error",error),this$1.suggestResults={}}));this.suggestResults={}},startSearch:function(query,start){var this$1=this;void 0===start&&(start=0);return zimSearchResource.search(this.zimFilename,{query:query,start:start,max_results:10,snippet_length:140}).then((function(result){var ref=result.data,articles=ref.articles,count=ref.count,end=start+articles.length,next=end<count?end:null;query===this$1.searchResults.query&&start===this$1.searchResults.next?this$1.searchResults={query:query,articles:this$1.searchResults.articles.concat(articles),count:count,next:next,success:!0}:this$1.searchResults={query:query,articles:articles,count:count,next:next,success:!0}})).catch((function(error){this$1.searchResults={query:query,error:error}}))},filterDuplicateArticles:function(articles,limit){var articlePaths=new Set;return articles.reduce((function(result,article){var path=article.redirect||article.path;return!articlePaths.has(path)&&result.length<limit?(articlePaths.add(path),result.concat(article)):result}),[])},articleUrl:function(path){return external_kolibriCoreAppGlobal_urls_default.a.zim_article(this.zimFilename,path)}},$trs:{searchResultsMsg:"{count, plural, one {{count} result} other {Top {count} results}} for '{query}'",noSearchResultsMsg:"No results for '{query}'",moreResultsMsg:"{count, plural, one {{count} more result} other {{count} more results}}",loadMoreButtonLabel:"Load more"}}),ZimSearchView=(__webpack_require__(30),normalizeComponent(views_ZimSearchViewvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"zim-search"},[_c("ZimSearchForm",{ref:"searchForm",on:{input:_vm.onSearchFormInput,submit:_vm.onSearchFormSubmit,reset:_vm.onSearchFormReset,cancel:function($event){return _vm.$emit("cancel")}}}),_vm.isSearchWaiting>0?_c("div",{staticClass:"zim-search-loader"},[_c("KLinearLoader")],1):_vm._e(),_vm.suggestResults.success&&_vm.suggestResults.articles.length>0?[_c("ol",{staticClass:"zim-suggest-results-list"},[_vm._l(_vm.suggestResults.articles,(function(article,index){return[_c("li",{key:index,ref:"article"+index,refInFor:!0,staticClass:"zim-suggest-result-item"},[_c("KButton",{staticClass:"zim-suggest-result-button",attrs:{appearance:"flat-button",appearanceOverrides:{color:_vm.$themeTokens.link,":hover":{color:_vm.$themeTokens.linkDark}},text:article.title,title:article.title,href:_vm.articleUrl(article.path)},on:{click:function($event){return $event.preventDefault(),_vm.$emit("activate",article)}}})],1)]}))],2)]:_vm._e(),_vm.searchResults.error?[_c("h2",[_vm._v("There was an error searching for '"+_vm._s(_vm.searchResults.query)+"'")]),_c("TechnicalTextBlock",{attrs:{text:String(_vm.searchResults.error)}})]:_vm.searchResults.success&&_vm.searchResults.count>0?[_c("h2",[_vm._v("\n      "+_vm._s(_vm.$tr("searchResultsMsg",{query:_vm.searchResults.query,count:_vm.$formatNumber(_vm.searchResults.articles.length)}))+"\n    ")]),_c("ol",{staticClass:"zim-search-results-list"},[_vm._l(_vm.searchResults.articles,(function(article,index){return[_c("li",{key:index,ref:"article"+index,refInFor:!0,staticClass:"zim-search-result-item"},[_c("KButton",{attrs:{appearance:"basic-link",text:article.title,href:_vm.articleUrl(article.path)},on:{click:function($event){return $event.preventDefault(),_vm.$emit("activate",article)}}}),_c("p",[_vm._v(_vm._s(article.snippet)+" …")])],1)]}))],2),_vm.searchHasMore?[_c("div",{staticClass:"zim-search-footer"},[_c("p",[_vm._v("\n          "+_vm._s(_vm.$tr("moreResultsMsg",{count:_vm.$formatNumber(_vm.remainingResults)}))+"\n        ")]),_c("div",{staticClass:"zim-search-more"},[_c("KButton",{attrs:{appearance:"raised-button",primary:"true",disabled:_vm.isSearchWaiting>0||_vm.isSearchMoreWaiting>0,text:_vm.$tr("loadMoreButtonLabel")},on:{click:function($event){return $event.preventDefault(),_vm.onSearchMoreClick.apply(null,arguments)}}}),_vm.isSearchMoreWaiting>0?_c("KCircularLoader"):_vm._e()],1)])]:_vm._e()]:_vm.searchResults.success&&0===_vm.searchResults.count?[_c("h2",[_vm._v(_vm._s(_vm.$tr("noSearchResultsMsg",{query:_vm.searchResults.query})))])]:_vm._e()],2)}),[],!1,null,"3eb0a6bc",null).exports),views_ShuffleIconvue_type_script_lang_js_={name:"ShuffleIcon",components:{ShuffleIconBaselineSvg:normalizeComponent({name:"icon-3d0186e4ba55b5527142e335adeeda63"},(function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("svg",{attrs:{viewBox:"0 0 24 24",role:"presentation",focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"}},[_c("path",{attrs:{d:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"}})])}),[],!1,null,null,null).exports},props:{color:{type:String,default:null},disableColor:{type:Boolean,default:!1}},computed:{computedColor:function(){return this.disableColor?null:this.color?this.color:this.$themeTokens.text}}},ShuffleIcon=(__webpack_require__(31),normalizeComponent(views_ShuffleIconvue_type_script_lang_js_,(function(){var _h=this.$createElement;return(this._self._c||_h)("ShuffleIconBaselineSvg",{style:{fill:this.computedColor}})}),[],!1,null,"592b8182",null).exports),views_ZimRendererIndexvue_type_script_lang_js_={name:"ZimRendererIndex",components:{CoreFullscreen:external_kolibriCoreAppGlobal_coreVue_components_CoreFullscreen_default.a,ZimSearchView:ZimSearchView,ZimContentView:ZimContentView,ZimBreadcrumbsMenu:ZimBreadcrumbsMenu,ShuffleIcon:ShuffleIcon},data:function(){return{isInFullscreen:!1,isSearching:!1,currentUrl:void 0,zimNavigationHistory:new Array,fullscreenHeaderHeight:"37px",resizeObserver:null}},computed:{zimFilename:function(){return this.defaultFile.checksum+"."+this.defaultFile.extension},iframeHeight:function(){return this.options&&this.options.height||"500px"},iframeWidth:function(){return this.options&&this.options.width||"auto"},contentRendererHeight:function(){return x=this.iframeHeight,y=this.fullscreenHeaderHeight,parseInt(x,10)+parseInt(y,10)+"px";var x,y},fullscreenText:function(){return this.isInFullscreen?this.$tr("exitFullscreen"):this.$tr("enterFullscreen")},searchText:function(){return this.$tr("search")},randomArticleText:function(){return this.$tr("randomArticle")},navSearchButtonStyle:function(){return this.isSearching?{backgroundColor:this.$themePalette.grey.v_300}:{backgroundColor:this.$themePalette.grey.v_200}},mainContainerStyle:function(){return this.isInFullscreen?{position:"absolute",top:this.fullscreenHeaderHeight,bottom:0}:{height:this.iframeHeight}},breadcrumbs:function(){return 0===this.zimNavigationHistory.length?[{title:this.$tr("homeBreadcrumb"),href:this.indexUrl}]:this.zimNavigationHistory.slice()},onNavRandomArticleClickDebounced:function(){return debounce_default()(this.onNavRandomArticleClick,500,{leading:!0})}},mounted:function(){this.initResizeObserver(),this.$emit("startTracking"),this.pollProgress()},beforeDestroy:function(){this.destroyResizeObserver(),this.timeout&&clearTimeout(this.timeout),this.$emit("stopTracking")},methods:{initResizeObserver:function(){this.resizeObserver=new ResizeObserver(this.onFullscreenHeaderResize),this.resizeObserver.observe(this.$refs.fullscreenHeader),this.onFullscreenHeaderResize()},destroyResizeObserver:function(){this.resizeObserver&&this.resizeObserver.disconnect()},onFullscreenHeaderResize:function(){this.fullscreenHeaderHeight=this.$refs.fullscreenHeader.offsetHeight+"px"},recordProgress:function(){this.$emit("updateProgress",this.durationBasedProgress),this.pollProgress()},pollProgress:function(){var this$1=this;this.timeout=setTimeout((function(){this$1.recordProgress()}),15e3)},onNavSearchClick:function(){var this$1=this;this.isSearching=!0,this.$nextTick((function(){this$1.$refs.zimSearchView.focus()}))},onNavRandomArticleClick:function(){var random_article_url=external_kolibriCoreAppGlobal_urls_default.a.zim_random_article(this.zimFilename);this.$refs.zimContentView.navigateToUrl(random_article_url)},onNavBreadcrumbActivate:function(breadcrumb){this.isSearching=!1,breadcrumb.href&&this.$refs.zimContentView.navigateToUrl(breadcrumb.href)},onZimSearchViewActivate:function(ref){var path=ref.path;this.isSearching=!1,this.zimNavigationHistory.splice(1),this.$refs.zimContentView.navigateToArticle(path)},onZimSearchViewCancel:function(){this.isSearching=!1},onZimSearchOverlayClick:function(event){event.target===this.$refs.zimSearchOverlay&&(this.isSearching=!1)},onZimContentViewNavigate:function(ref){var href=ref.href,title=ref.title;this.currentUrl=href;var existingIndex=this.zimNavigationHistory.findIndex((function(breadcrumb){return breadcrumb.href===href}));existingIndex>=0&&this.zimNavigationHistory.splice(existingIndex),0==this.zimNavigationHistory.length&&(title=this.$tr("homeBreadcrumb")),this.zimNavigationHistory.push({title:title,href:href})}},$trs:{enterFullscreen:"View Fullscreen",exitFullscreen:"Exit Fullscreen",homeBreadcrumb:"Home",randomArticle:"Random Article",search:"Search"}},ZimRendererIndex=(__webpack_require__(32),normalizeComponent(views_ZimRendererIndexvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("CoreFullscreen",{ref:"zimRenderer",staticClass:"zim-renderer",style:{height:_vm.contentRendererHeight,width:_vm.iframeWidth},on:{changeFullscreen:function($event){_vm.isInFullscreen=$event}}},[_c("div",{ref:"fullscreenHeader",staticClass:"fullscreen-header",style:{backgroundColor:this.$themePalette.grey.v_100}},[_c("nav",{staticClass:"zim-actions"},[_c("KButton",{staticClass:"zim-search-button",style:_vm.navSearchButtonStyle,attrs:{primary:!1,appearance:"flat-button","aria-controls":"zim-container",text:_vm.searchText,icon:"search"},on:{click:_vm.onNavSearchClick}}),_c("KButton",{staticClass:"zim-random-article-button",attrs:{primary:!1,appearance:"flat-button",title:_vm.randomArticleText},on:{click:_vm.onNavRandomArticleClickDebounced}},[_c("ShuffleIcon",{attrs:{slot:"icon"},slot:"icon"})],1),_c("ZimBreadcrumbsMenu",{attrs:{breadcrumbs:_vm.breadcrumbs,currentUrl:_vm.isSearching?void 0:_vm.currentUrl},on:{activate:_vm.onNavBreadcrumbActivate}})],1),_c("KButton",{staticClass:"fullscreen-button",attrs:{primary:!1,appearance:"flat-button",icon:_vm.isInFullscreen?"fullscreen_exit":"fullscreen"},on:{click:function($event){return _vm.$refs.zimRenderer.toggleFullscreen()}}},[_vm._v("\n      "+_vm._s(_vm.fullscreenText)+"\n    ")])],1),_c("div",{staticClass:"main-container",style:_vm.mainContainerStyle},[_c("div",{ref:"zimSearchOverlay",staticClass:"zim-search-overlay",attrs:{hidden:!_vm.isSearching},on:{click:function($event){return _vm.onZimSearchOverlayClick($event)}}},[_c("ZimSearchView",{ref:"zimSearchView",attrs:{zimFilename:_vm.zimFilename},on:{activate:_vm.onZimSearchViewActivate,cancel:_vm.onZimSearchViewCancel}})],1),_c("ZimContentView",{ref:"zimContentView",attrs:{zimFilename:_vm.zimFilename},on:{onnavigate:_vm.onZimContentViewNavigate}})],1)])}),[],!1,null,"796e3b78",null).exports),zimModule=new(function(ContentRendererModule){function ZimModule(){ContentRendererModule.apply(this,arguments)}ContentRendererModule&&(ZimModule.__proto__=ContentRendererModule),ZimModule.prototype=Object.create(ContentRendererModule&&ContentRendererModule.prototype),ZimModule.prototype.constructor=ZimModule;var prototypeAccessors={rendererComponent:{configurable:!0}};return prototypeAccessors.rendererComponent.get=function(){return ZimRendererIndex},Object.defineProperties(ZimModule.prototype,prototypeAccessors),ZimModule}(content_renderer_module))}]);
//# sourceMappingURL=kolibri_zim_plugin.main-1.0.0.js.map